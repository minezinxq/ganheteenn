"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=20)}([function(t,e,r){"use strict";var a;r.d(e,"a",(function(){return a})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(a||(a={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return l}));var a=function(){},n={trace:a,debug:a,log:a,warn:a,info:a,error:a},i=n;function o(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):a}function s(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];r.forEach((function(e){i[e]=t[e]?t[e].bind(t):o(e)}))}(t,"debug","log","info","warn","error");try{i.log()}catch(t){i=n}}else i=n}var l=n},function(t,e,r){"use strict";var a,n;r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return n})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(a||(a={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};Number.MAX_SAFE_INTEGER},function(t,e,r){"use strict";var a,n;r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return p}));var a,n=r(3),i=r(11),o=r(1),s=r(17),l=r(12);function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function c(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(a||(a={}));var f=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[a.AUDIO]=null,e[a.VIDEO]=null,e[a.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),a=[];1===r.length?a[0]=e?e.byteRangeEndOffset:0:a[0]=parseInt(r[1]),a[1]=parseInt(r[0])+a[0],this._byteRange=a},d(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(i.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),h=function(t){function e(e,r){var a;return(a=t.call(this,r)||this)._decryptdata=null,a.rawProgramDateTime=null,a.programDateTime=null,a.tagList=[],a.duration=0,a.sn=0,a.levelkey=void 0,a.type=void 0,a.loader=null,a.level=-1,a.cc=0,a.startPTS=void 0,a.endPTS=void 0,a.appendedPTS=void 0,a.startDTS=void 0,a.endDTS=void 0,a.start=0,a.deltaPTS=void 0,a.maxStartPTS=void 0,a.minEndPTS=void 0,a.stats=new l.a,a.urlId=0,a.data=void 0,a.bitrateTest=!1,a.title=null,a.initSegment=null,a.type=e,a}u(e,t);var r=e.prototype;return r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=s.a.fromURI(t.uri)).method=t.method,r.iv=this.createInitializationVector(e),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(t,e,r,a,n,i){void 0===i&&(i=!1);var o=this.elementaryStreams,s=o[t];s?(s.startPTS=Math.min(s.startPTS,e),s.endPTS=Math.max(s.endPTS,r),s.startDTS=Math.min(s.startDTS,a),s.endDTS=Math.max(s.endDTS,n)):o[t]={startPTS:e,endPTS:r,startDTS:a,endDTS:n,partial:i}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[a.AUDIO]=null,t[a.VIDEO]=null,t[a.AUDIOVIDEO]=null},d(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(n.a)(this.programDateTime))return null;var t=Object(n.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(f),p=function(t){function e(e,r,a,n,i){var o;(o=t.call(this,a)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new l.a,o.duration=e.decimalFloatingPoint("DURATION"),o.gap=e.bool("GAP"),o.independent=e.bool("INDEPENDENT"),o.relurl=e.enumeratedString("URI"),o.fragment=r,o.index=n;var s=e.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,i),i&&(o.fragOffset=i.fragOffset+i.duration),o}return u(e,t),d(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(f)},function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"g",(function(){return d})),r.d(e,"f",(function(){return f})),r.d(e,"d",(function(){return h})),r.d(e,"c",(function(){return p})),r.d(e,"e",(function(){return y})),r.d(e,"h",(function(){return v})),r.d(e,"a",(function(){return g}));var a=r(9),n=r(5),i=Math.pow(2,32)-1,o=[].push;function s(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r}function u(t,e,r){"data"in t&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function c(t,e){var r,a,n,i=[];if(!e.length)return i;"data"in t?(r=t.data,a=t.start,n=t.end):(a=0,n=(r=t).byteLength);for(var u=a;u<n;){var d=l(r,u),f=d>1?u+d:n;if(s(r.subarray(u+4,u+8))===e[0])if(1===e.length)i.push({data:r,start:u+8,end:f});else{var h=c({data:r,start:u+8,end:f},e.slice(1));h.length&&o.apply(i,h)}u=f}return i}function d(t){var e=c(t,["moov"])[0],r=e?e.end:null,a=c(t,["sidx"]);if(!a||!a[0])return null;var n=[],i=a[0],o=i.data[0],s=0===o?8:16,u=l(i,s);s+=4,s+=0===o?8:16,s+=2;var d=i.end+0,f=function(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r}(i,s);s+=2;for(var h=0;h<f;h++){var p=s,m=l(i,p);p+=4;var y=2147483647&m;if(1==(2147483648&m)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var v=l(i,p);p+=4,n.push({referenceSize:y,subsegmentDuration:v,info:{duration:v/u,start:d,end:d+y-1}}),d+=y,s=p+=4}return{earliestPresentationTime:0,timescale:u,version:o,referencesCount:f,references:n,moovEndOffset:r}}function f(t){for(var e=[],r=c(t,["moov","trak"]),a=0;a<r.length;a++){var i=r[a],o=c(i,["tkhd"])[0];if(o){var u=o.data[o.start],d=0===u?12:20,f=l(o,d),h=c(i,["mdia","mdhd"])[0];if(h){var p=l(h,d=0===(u=h.data[h.start])?12:20),m=c(i,["mdia","hdlr"])[0];if(m){var y=s(m.data.subarray(m.start+8,m.start+12)),v={soun:n.a.AUDIO,vide:n.a.VIDEO}[y];if(v){var g=c(i,["mdia","minf","stbl","stsd"])[0],b=void 0;g&&(b=s(g.data.subarray(g.start+12,g.start+16))),e[f]={timescale:p,type:v},e[v]={timescale:p,id:f,codec:b}}}}}}return c(t,["moov","mvex","trex"]).forEach((function(t){var r=l(t,4),a=e[r];a&&(a.default={duration:l(t,12),flags:l(t,20)})})),e}function h(t,e){return c(e,["moof","traf"]).reduce((function(e,r){var a=c(r,["tfdt"])[0],n=a.data[a.start],i=c(r,["tfhd"]).reduce((function(e,r){var i=l(r,4),o=t[i];if(o){var s=l(a,4);1===n&&(s*=Math.pow(2,32),s+=l(a,8));var u=s/(o.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==i&&isFinite(i)&&(null===e||i<e)?i:e}),null)||0}function p(t,e){for(var r=0,a=0,i=0,o=c(t,["moof","traf"]),s=0;s<o.length;s++){var u=o[s],f=c(u,["tfhd"])[0],h=e[l(f,4)];if(h){var p=h.default,y=l(f,0)|(null==p?void 0:p.flags),v=null==p?void 0:p.duration;8&y&&(v=l(f,2&y?12:8));for(var g=h.timescale||9e4,b=c(u,["trun"]),w=0;w<b.length;w++)!(r=m(b[w]))&&v&&(r=v*l(b[w],4)),h.type===n.a.VIDEO?a+=r/g:h.type===n.a.AUDIO&&(i+=r/g)}}if(0===a&&0===i){var S=d(t);if(null!=S&&S.references)return S.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return a||i}function m(t){var e=l(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var a=0,n=l(t,4),i=0;i<n;i++)256&e&&(a+=l(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return a}function y(t,e,r){c(e,["moof","traf"]).forEach((function(e){c(e,["tfhd"]).forEach((function(a){var n=l(a,4),o=t[n];if(o){var s=o.timescale||9e4;c(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],a=l(t,4);if(0===e)u(t,4,a-r*s);else{a*=Math.pow(2,32),a+=l(t,8),a-=r*s,a=Math.max(a,0);var n=Math.floor(a/(i+1)),o=Math.floor(a%(i+1));u(t,4,n),u(t,8,o)}}))}}))}))}function v(t){var e={valid:null,remainder:null},r=c(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var n=r[r.length-1];return e.valid=Object(a.a)(t,0,n.start-8),e.remainder=Object(a.a)(t,n.start-8),e}function g(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return c})),r.d(e,"c",(function(){return f})),r.d(e,"f",(function(){return g}));var a,n=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},i=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},o=function(t,e){for(var r=e,a=0;n(t,e);)a+=10,a+=s(t,e+6),i(t,e+10)&&(a+=10),e+=a;if(a>0)return t.subarray(r,r+a)},s=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},l=function(t,e){return n(t,e)&&s(t,e+6)+10<=t.length-e},u=function(t){for(var e=f(t),r=0;r<e.length;r++){var a=e[r];if(c(a))return v(a)}},c=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=s(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},f=function(t){for(var e=0,r=[];n(t,e);){for(var a=s(t,e+6),o=(e+=10)+a;e+8<o;){var l=d(t.subarray(e)),u=h(l);u&&r.push(u),e+=l.size+10}i(t,e)&&(e+=10)}return r},h=function(t){return"PRIV"===t.type?p(t):"W"===t.type[0]?y(t):m(t)},p=function(t){if(!(t.size<2)){var e=g(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},m=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data.subarray(1));return{key:t.type,data:n}}},y=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data);return{key:t.type,data:n}},v=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],a=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return a/=45,r&&(a+=47721858.84),Math.round(a)}},g=function(t,e){void 0===e&&(e=!1);var r=b();if(r){var a=r.decode(t);if(e){var n=a.indexOf("\0");return-1!==n?a.substring(0,n):a}return a.replace(/\0/g,"")}for(var i,o,s,l=t.length,u="",c=0;c<l;){if(0===(i=t[c++])&&e)return u;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(i);break;case 12:case 13:o=t[c++],u+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=t[c++],s=t[c++],u+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&s)<<0)}}return u};function b(){return a||void 0===self.TextDecoder||(a=new self.TextDecoder("utf-8")),a}},function(t,e,r){"use strict";function a(t,e,r,a){void 0===r&&(r=1),void 0===a&&(a=!1);var n=t*e*r;return a?Math.round(n):n}function n(t,e,r,n){return void 0===r&&(r=1),void 0===n&&(n=!1),a(t,e,1/r,n)}function i(t,e){return void 0===e&&(e=!1),a(t,1e3,1/9e4,e)}function o(t,e){return void 0===e&&(e=1),a(t,9e4,1/e)}r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o}))},function(t,e,r){"use strict";function a(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}r.d(e,"a",(function(){return a}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return lt})),r.d(e,"d",(function(){return ct})),r.d(e,"a",(function(){return dt})),r.d(e,"b",(function(){return ft}));var a=r(0),n=r(2),i=r(15),o=r(3),s=r(7),l=r(6),u=r(9),c=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Object(l.a)(this.cachedData,t),this.cachedData=null);var r,a,n=s.b(t,0),i=n?n.length:0,o=this._audioTrack,c=this._id3Track,f=n?s.d(n):void 0,h=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(f,e)),n&&n.length>0&&c.samples.push({pts:this.initPTS,dts:this.initPTS,data:n}),a=this.initPTS;i<h;){if(this.canParse(t,i)){var p=this.appendFrame(o,t,i);p?(this.frameIndex++,a=p.sample.pts,r=i+=p.length):i=h}else s.a(t,i)?(n=s.b(t,i),c.samples.push({pts:a,dts:a,data:n}),r=i+=n.length):i++;if(i===h&&r!==h){var m=Object(u.a)(t,r);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,m):this.cachedData=m}}return{audioTrack:o,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:c,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.destroy=function(){},t}(),d=function(t,e){return Object(o.a)(t)?90*t:9e4*e},f=c,h=r(1);function p(t,e){return 255===t[e]&&240==(246&t[e+1])}function m(t,e){return 1&t[e+1]?7:9}function y(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function v(t,e){return e+1<t.length&&p(t,e)}function g(t,e){if(v(t,e)){var r=m(t,e);if(e+r>=t.length)return!1;var a=y(t,e);if(a<=r)return!1;var n=e+a;return n===t.length||v(t,n)}return!1}function b(t,e,r,i,o){if(!t.samplerate){var s=function(t,e,r,i){var o,s,l,u,c=navigator.userAgent.toLowerCase(),d=i,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&e[r+2])>>>6);var p=(60&e[r+2])>>>2;if(!(p>f.length-1))return l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,h.b.log("manifest codec:"+i+", ADTS type:"+o+", samplingIndex:"+p),/firefox/i.test(c)?p>=6?(o=5,u=new Array(4),s=p-3):(o=2,u=new Array(2),s=p):-1!==c.indexOf("android")?(o=2,u=new Array(2),s=p):(o=5,u=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&p>=6?s=p-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(c))||!i&&1===l)&&(o=2,u=new Array(2)),s=p)),u[0]=o<<3,u[0]|=(14&p)>>1,u[1]|=(1&p)<<7,u[1]|=l<<3,5===o&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:f[p],channelCount:l,codec:"mp4a.40."+o,manifestCodec:d};t.trigger(a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}(e,r,i,o);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,h.b.log("parsed codec:"+t.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function w(t){return 9216e4/t}function S(t,e,r,a,n){var i=function(t,e,r,a,n){var i=m(t,e),o=y(t,e);if((o-=i)>0)return{headerLength:i,frameLength:o,stamp:r+a*n}}(e,r,a,n,w(t.samplerate));if(i){var o,s=i.frameLength,l=i.headerLength,u=i.stamp,c=l+s,d=Math.max(0,r+c-e.length);d?(o=new Uint8Array(c-l)).set(e.subarray(r+l,e.length),0):o=e.subarray(r+l,r+c);var f={unit:o,pts:u};return d||t.samples.push(f),{sample:f,length:c,missing:d}}}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){var e,r;function a(e,r){var a;return(a=t.call(this)||this).observer=void 0,a.config=void 0,a.observer=e,a.config=r,a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,k(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(s.b(t,0)||[]).length,r=t.length;e<r;e++)if(g(t,e))return h.b.log("ADTS sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&p(t,e)&&y(t,e)<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){b(t,this.observer,e,r,t.manifestCodec);var a=S(t,e,r,this.initPTS,this.frameIndex);if(a&&0===a.missing)return a},a}(f);T.minProbeByteLength=9;var E=T,x=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(l.b)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,r={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(e=Object(l.a)(this.remainderData,t));var a=Object(l.h)(e);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=e;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:r,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.flush=function(){var t={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:t,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();x.minProbeByteLength=1024;var _=x,L=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],R=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],O=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C=[0,1,1,4];function I(t,e,r,a,n){if(!(r+24>e.length)){var i=D(e,r);if(i&&r+i.frameLength<=e.length){var o=a+n*(9e4*i.samplesPerFrame/i.sampleRate),s={unit:e.subarray(r,r+i.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(s),{sample:s,length:i.frameLength,missing:0}}}}function D(t,e){var r=t[e+1]>>3&3,a=t[e+1]>>1&3,n=t[e+2]>>4&15,i=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==i){var o=t[e+2]>>1&1,s=t[e+3]>>6,l=1e3*A[14*(3===r?3-a:3===a?3:4)+n-1],u=R[3*(3===r?0:2===r?1:2)+i],c=3===s?1:2,d=O[r][a],f=C[a],h=8*d*f,p=Math.floor(d*l/u+o)*f;if(null===L){var m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);L=m?parseInt(m[1]):0}return!!L&&L<=87&&2===a&&l>=224e3&&0===s&&(t[e+3]=128|t[e+3]),{sampleRate:u,channelCount:c,frameLength:p,samplesPerFrame:h}}}function P(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function M(t,e){return e+1<t.length&&P(t,e)}function F(t,e){if(e+1<t.length&&P(t,e)){var r=D(t,e),a=4;null!=r&&r.frameLength&&(a=r.frameLength);var n=e+a;return n===t.length||M(t,n)}return!1}var B=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,a=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");a.set(t.subarray(r,r+n)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&h.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,a=0;a<t;a++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,a=0,n=0,i=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var m=s();if(l(5),d(3),s(),h(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var y=u();if(3===y&&d(1),h(),h(),d(1),c())for(e=3!==y?8:12,r=0;r<e;r++)c()&&p(r<6?16:64)}h();var v=u();if(0===v)u();else if(1===v)for(d(1),f(),f(),t=u(),r=0;r<t;r++)f();h(),d(1);var g=u(),b=u(),w=l(1);0===w&&d(1),d(1),c()&&(a=u(),n=u(),i=u(),o=u());var S=[1,1];if(c()&&c())switch(s()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(g+1)-2*a-2*n),height:(2-w)*(b+1)*16-(w?2:4)*(i+o),pixelRatio:S}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),N=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new i.a(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,r,a){var n=t[e].unit,i=n.subarray(16,n.length-n.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),s=this;this.decryptBuffer(o,(function(i){var o=new Uint8Array(i);n.set(o,16),a||s.decryptAacSamples(t,e+1,r)}))},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,a),!a)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)r.set(t.subarray(n,n+16),a);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)t.set(r.subarray(a,a+16),n);return t},e.decryptAvcSample=function(t,e,r,a,n,i){var o=V(n.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){n.data=l.getAvcDecryptedUnit(o,s),i||l.decryptAvcSamples(t,e,r+1,a)}))},e.decryptAvcSamples=function(t,e,r,a){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void a();for(var n=t[e].units;!(r>=n.length);r++){var i=n[r];if(!(i.data.length<=48||1!==i.type&&5!==i.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,a,i,o),!o)return}}}},t}(),U={video:1,audio:2,id3:3,text:4},j=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return!(r<0||(r&&h.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=a},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,r,i,o){var s;void 0===i&&(i=!1),void 0===o&&(o=!1),i||(this.sampleAes=null);var u=this._avcTrack,c=this._audioTrack,d=this._id3Track,f=u.pid,p=u.pesData,m=c.pid,y=d.pid,v=c.pesData,g=d.pesData,b=!1,w=this.pmtParsed,S=this._pmtId,k=e.length;if(this.remainderData&&(k=(e=Object(l.a)(this.remainderData,e)).length,this.remainderData=null),k<188&&!o)return this.remainderData=e,{audioTrack:c,avcTrack:u,id3Track:d,textTrack:this._txtTrack};var T=Math.max(0,t.syncOffset(e));(k-=(k+T)%188)<e.byteLength&&!o&&(this.remainderData=new Uint8Array(e.buffer,k,e.buffer.byteLength-k));for(var E=0,x=T;x<k;x+=188)if(71===e[x]){var _=!!(64&e[x+1]),L=((31&e[x+1])<<8)+e[x+2],A=void 0;if((48&e[x+3])>>4>1){if((A=x+5+e[x+4])===x+188)continue}else A=x+4;switch(L){case f:_&&(p&&(s=q(p))&&this.parseAVCPES(s,!1),p={data:[],size:0}),p&&(p.data.push(e.subarray(A,x+188)),p.size+=x+188-A);break;case m:_&&(v&&(s=q(v))&&(c.isAAC?this.parseAACPES(s):this.parseMPEGPES(s)),v={data:[],size:0}),v&&(v.data.push(e.subarray(A,x+188)),v.size+=x+188-A);break;case y:_&&(g&&(s=q(g))&&this.parseID3PES(s),g={data:[],size:0}),g&&(g.data.push(e.subarray(A,x+188)),g.size+=x+188-A);break;case 0:_&&(A+=e[A]+1),S=this._pmtId=z(e,A);break;case S:_&&(A+=e[A]+1);var R=H(e,A,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);(f=R.avc)>0&&(u.pid=f),(m=R.audio)>0&&(c.pid=m,c.isAAC=R.isAAC),(y=R.id3)>0&&(d.pid=y),b&&!w&&(h.b.log("reparse from beginning"),b=!1,x=T-188),w=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else E++;E>0&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+E+" TS packet/s that do not start with 0x47"}),u.pesData=p,c.pesData=v,d.pesData=g;var O={audioTrack:c,avcTrack:u,id3Track:d,textTrack:this._txtTrack};return o&&this.extractRemainingSamples(O),O},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,a=t.avcTrack,n=t.id3Track,i=a.pesData,o=r.pesData,s=n.pesData;i&&(e=q(i))?(this.parseAVCPES(e,!0),a.pesData=null):a.pesData=i,o&&(e=q(o))?(r.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),r.pesData=null):(null!=o&&o.size&&h.b.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o),s&&(e=q(s))?(this.parseID3PES(e),n.pesData=null):n.pesData=s},e.demuxSampleAes=function(t,e,r){var a=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new N(this.observer,this.config,e);return this.decrypt(a,n)},e.decrypt=function(t,e){return new Promise((function(r){var a=t.audioTrack,n=t.avcTrack;a.samples&&a.isAAC?e.decryptAacSamples(a.samples,0,(function(){n.samples?e.decryptAvcSamples(n.samples,0,0,(function(){r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var r,a=this,n=this._avcTrack,i=this.parseAVCNALu(t.data),o=this.avcSample,l=!1;t.data=null,o&&i.length&&!n.audFound&&(Y(o,n),o=this.avcSample=G(!1,t.pts,t.dts,"")),i.forEach((function(e){switch(e.type){case 1:r=!0,o||(o=a.avcSample=G(!0,t.pts,t.dts,"")),o.frame=!0;var i=e.data;if(l&&i.length>4){var u=new B(i).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(o.key=!0)}break;case 5:r=!0,o||(o=a.avcSample=G(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:r=!0;var c=new B(V(e.data));c.readUByte();for(var d=0,f=0,h=!1,p=0;!h&&c.bytesAvailable>1;){d=0;do{d+=p=c.readUByte()}while(255===p);f=0;do{f+=p=c.readUByte()}while(255===p);if(4===d&&0!==c.bytesAvailable){if(h=!0,181===c.readUByte()&&49===c.readUShort()&&1195456820===c.readUInt()&&3===c.readUByte()){for(var m=c.readUByte(),y=31&m,v=[m,c.readUByte()],g=0;g<y;g++)v.push(c.readUByte()),v.push(c.readUByte()),v.push(c.readUByte());K(a._txtTrack.samples,{type:3,pts:t.pts,bytes:v})}}else if(5===d&&0!==c.bytesAvailable){if(h=!0,f>16){for(var b=[],w=0;w<16;w++)b.push(c.readUByte().toString(16)),3!==w&&5!==w&&7!==w&&9!==w||b.push("-");for(var S=f-16,k=new Uint8Array(S),T=0;T<S;T++)k[T]=c.readUByte();K(a._txtTrack.samples,{pts:t.pts,payloadType:d,uuid:b.join(""),userData:Object(s.f)(k),userDataBytes:k})}}else if(f<c.bytesAvailable)for(var E=0;E<f;E++)c.readUByte()}break;case 7:if(r=!0,l=!0,!n.sps){var x=new B(e.data).readSPS();n.width=x.width,n.height=x.height,n.pixelRatio=x.pixelRatio,n.sps=[e.data],n.duration=a._duration;for(var _=e.data.subarray(1,4),L="avc1.",A=0;A<3;A++){var R=_[A].toString(16);R.length<2&&(R="0"+R),L+=R}n.codec=L}break;case 8:r=!0,n.pps||(n.pps=[e.data]);break;case 9:r=!1,n.audFound=!0,o&&Y(o,n),o=a.avcSample=G(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,o&&(o.debug+="unknown NAL "+e.type+" ")}o&&r&&o.units.push(e)})),e&&o&&(Y(o,n),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,r=this.avcSample;if(!r||0===r.units.length){var a=this._avcTrack.samples;r=a[a.length-1]}if(null!==(t=r)&&void 0!==t&&t.units){var n=r.units;e=n[n.length-1]}return e},e.parseAVCNALu=function(t){var e,r,a=t.byteLength,n=this._avcTrack,i=n.naluState||0,o=i,s=[],l=0,u=-1,c=0;for(-1===i&&(u=0,c=31&t[0],i=0,l=1);l<a;)if(e=t[l++],i)if(1!==i)if(e)if(1===e){if(u>=0){var d={data:t.subarray(u,l-i-1),type:c};s.push(d)}else{var f=this.getLastNalUnit();if(f&&(o&&l<=4-o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-o)),(r=l-i-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(t.subarray(0,r),f.data.byteLength),f.data=h,f.state=0}}l<a?(u=l,c=31&t[l],i=0):i=-1}else i=0;else i=3;else i=e?0:2;else i=e?0:1;if(u>=0&&i>=0){var p={data:t.subarray(u,a),type:c,state:i};s.push(p)}if(0===s.length){var m=this.getLastNalUnit();if(m){var y=new Uint8Array(m.data.byteLength+t.byteLength);y.set(m.data,0),y.set(t,m.data.byteLength),m.data=y}}return n.naluState=i,s},e.parseAACPES=function(t){var e,r,i,o,s,l=0,u=this._audioTrack,c=this.aacOverFlow,d=t.data;if(c){this.aacOverFlow=null;var f=c.sample.unit.byteLength,p=Math.min(c.missing,f),m=f-p;c.sample.unit.set(d.subarray(0,p),m),u.samples.push(c.sample),l=c.missing}for(e=l,r=d.length;e<r-1&&!v(d,e);e++);if(e===l||(e<r-1?(i="AAC PES did not start with ADTS header,offset:"+e,o=!1):(i="no ADTS header found in AAC PES",o=!0),h.b.warn("parsing error:"+i),this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:o,reason:i}),!o)){if(b(u,this.observer,d,e,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!c)return void h.b.warn("[tsdemuxer]: AAC PES unknown PTS");var y=w(u.samplerate);s=c.sample.pts+y}for(var g=0;e<r;){if(v(d,e)){if(e+5<r){var k=S(u,d,e,s,g);if(k){if(!k.missing){e+=k.length,g++;continue}this.aacOverFlow=k}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,r=e.length,a=0,n=0,i=t.pts;if(void 0!==i)for(;n<r;)if(M(e,n)){var o=I(this._audioTrack,e,n,i,a);if(!o)break;n+=o.length,a++}else n++;else h.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):h.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function G(t,e,r,a){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:a,length:0}}function z(t,e){return(31&t[e+10])<<8|t[e+11]}function H(t,e,r,a){var n={audio:-1,avc:-1,id3:-1,isAAC:!0},i=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){var o=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!a){h.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=o);break;case 21:-1===n.id3&&(n.id3=o);break;case 219:if(!a){h.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=o);break;case 3:case 4:r?-1===n.audio&&(n.audio=o,n.isAAC=!1):h.b.log("MPEG audio found, not supported in this browser");break;case 36:h.b.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return n}function q(t){var e,r,a,n,i,o=0,s=t.data;if(!t||0===t.size)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1===((e=s[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var u=e[7];192&u&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?n-(i=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(h.b.warn(Math.round((n-i)/9e4)+"s delta between PTS and DTS, align them"),n=i):i=n);var c=(a=e[8])+9;if(t.size<=c)return null;t.size-=c;for(var d=new Uint8Array(t.size),f=0,p=s.length;f<p;f++){var m=(e=s[f]).byteLength;if(c){if(c>m){c-=m;continue}e=e.subarray(c),m-=c,c=0}d.set(e,o),o+=m}return r&&(r-=a+3),{data:d,pts:n,dts:i,len:r}}return null}function Y(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,a=r.length;if(!a)return void e.dropped++;var n=r[a-1];t.pts=n.pts,t.dts=n.dts}e.samples.push(t)}t.debug.length&&h.b.log(t.pts+"/"+t.dts+":"+t.debug)}function K(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var a=r-1;a>=0;a--)if(e.pts<t[a].pts){t.splice(a,0,e);break}}else t.push(e)}function V(t){for(var e=t.byteLength,r=[],a=1;a<e-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;var n=e-r.length,i=new Uint8Array(n),o=0;for(a=0;a<n;o++,a++)o===r[0]&&(o++,r.shift()),i[a]=t[o];return i}j.minProbeByteLength=188;var W=j;function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){var e,r;function a(){return t.apply(this,arguments)||this}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,X(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(s.b(t,0)||[]).length,r=t.length;e<r;e++)if(F(t,e))return h.b.log("MPEG Audio sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return P(t,e)&&4<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){if(null!==this.initPTS)return I(t,e,r,this.initPTS,this.frameIndex)},a}(f);Q.minProbeByteLength=4;var $=Q,J=r(16),Z=r(5),tt=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,r){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var a=this.initData=Object(l.f)(t);e||(e=rt(a.audio,Z.a.AUDIO)),r||(r=rt(a.video,Z.a.VIDEO));var n={};a.audio&&a.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:a.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:a.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:h.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},e.remux=function(t,e,r,a,n){var i=this.initPTS,s=this.lastEndDTS,u={audio:void 0,video:void 0,text:a,id3:r,initSegment:void 0};Object(o.a)(s)||(s=this.lastEndDTS=n||0);var c=e.samples;if(!c||!c.length)return u;var d={initPTS:void 0,timescale:1},f=this.initData;if(f&&f.length||(this.generateInitSegment(c),f=this.initData),!f||!f.length)return h.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(o.a)(i)||(this.initPTS=d.initPTS=i=et(f,c,s));var p=Object(l.c)(c,f),m=s,y=p+m;Object(l.e)(f,c,i),p>0?this.lastEndDTS=y:(h.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var v=!!f.audio,g=!!f.video,b="";v&&(b+="audio"),g&&(b+="video");var w={data1:c,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:b,hasAudio:v,hasVideo:g,nb:1,dropped:0};return u.audio="audio"===w.type?w:void 0,u.video="audio"!==w.type?w:void 0,u.text=a,u.id3=r,u.initSegment=d,u},t}(),et=function(t,e,r){return Object(l.d)(t,e)-r};function rt(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===Z.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var at,nt=tt,it=r(13);try{at=self.performance.now.bind(self.performance)}catch(t){h.b.debug("Unable to use Performance API on this environment"),at=self.Date.now}var ot=[{demux:W,remux:J.a},{demux:_,remux:nt},{demux:E,remux:J.a},{demux:$,remux:J.a}],st=1024;ot.forEach((function(t){var e=t.demux;st=Math.max(st,e.minProbeByteLength)}));var lt=function(){function t(t,e,r,a,n){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new it.a,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=a,this.id=n}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,a){var n=this,i=r.transmuxing;i.executeStart=at();var o=new Uint8Array(t),s=this.cache,u=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;a&&(this.currentTransmuxState=a);var f=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(o,e);if(f&&"AES-128"===f.method){var h=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(o,f.key.buffer,f.iv.buffer).then((function(t){var e=n.push(t,null,r);return n.decryptionPromise=null,e})),this.decryptionPromise;var p=h.softwareDecrypt(o,f.key.buffer,f.iv.buffer);if(!p)return i.executeEnd=at(),ut(r);o=new Uint8Array(p)}var m=a||c,y=m.contiguous,v=m.discontinuity,g=m.trackSwitch,b=m.accurateTimeOffset,w=m.timeOffset,S=m.initSegmentChange,k=d.audioCodec,T=d.videoCodec,E=d.defaultInitPts,x=d.duration,_=d.initSegmentData;if((v||g||S)&&this.resetInitSegment(_,k,T,x),(v||S)&&this.resetInitialTimestamp(E),y||this.resetContiguity(),this.needsProbing(o,v,g)){if(s.dataLength){var L=s.flush();o=Object(l.a)(L,o)}this.configureTransmuxer(o,d)}var A=this.transmux(o,f,w,b,r),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,i.executeEnd=at(),A},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=at();var i=this.decrypter,o=this.cache,s=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var u=[],c=s.timeOffset;if(i){var d=i.flush();d&&u.push(this.push(d,null,t))}var f=o.dataLength;o.reset();var h=this.demuxer,p=this.remuxer;if(!h||!p)return f>=st&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=at(),[ut(t)];var m=h.flush(c);return ct(m)?m.then((function(r){return e.flushRemux(u,r,t),u})):(this.flushRemux(u,m,t),u)},e.flushRemux=function(t,e,r){var a=e.audioTrack,n=e.avcTrack,i=e.id3Track,o=e.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,u=s.timeOffset;h.b.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var c=this.remuxer.remux(a,n,i,o,u,l,!0,this.id);t.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=at()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,a){var n=this.demuxer,i=this.remuxer;n&&i&&(n.resetInitSegment(e,r,a),i.resetInitSegment(t,e,r))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,a,n){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,a,n):this.transmuxUnencrypted(t,r,a,n)},e.transmuxUnencrypted=function(t,e,r,a){var n=this.demuxer.demux(t,e,!1,!this.config.progressive),i=n.audioTrack,o=n.avcTrack,s=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(i,o,s,l,e,r,!1,this.id),chunkMeta:a}},e.transmuxSampleAes=function(t,e,r,a,n){var i=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:i.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,r,a,!1,i.id),chunkMeta:n}}))},e.configureTransmuxer=function(t,e){for(var r,a=this.config,n=this.observer,i=this.typeSupported,o=this.vendor,s=e.audioCodec,l=e.defaultInitPts,u=e.duration,c=e.initSegmentData,d=e.videoCodec,f=0,p=ot.length;f<p;f++)if(ot[f].demux.probe(t)){r=ot[f];break}r||(h.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:_,remux:nt});var m=this.demuxer,y=this.remuxer,v=r.remux,g=r.demux;y&&y instanceof v||(this.remuxer=new v(n,a,i,o)),m&&m instanceof g||(this.demuxer=new g(n,a,i),this.probe=g.probe),this.resetInitSegment(c,s,d,u),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,r){return!this.demuxer||!this.remuxer||e||r},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new i.a(this.observer,this.config)),t},t}(),ut=function(t){return{remuxResult:{},chunkMeta:t}};function ct(t){return"then"in t&&t.then instanceof Function}var dt=function(t,e,r,a,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=a,this.defaultInitPts=n},ft=function(t,e,r,a,n,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=a,this.timeOffset=n,this.initSegmentChange=i}},function(t,e,r){var a,n,i,o,s;a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=s.normalizePath(a.path),s.buildURLFromParts(a)}var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(u.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+i.path;u.path=s.normalizePath(d)}else u.path=o.path,i.params||(u.params=o.params,i.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(u)},parseURL:function(t){var e=a.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),a=0,n=0;n<t.length;n++){var i=t[n];r.set(i,a),a+=i.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},function(t,e,r){"use strict";var a=Object.prototype.hasOwnProperty,n="~";function i(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,a||t,i),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)a.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},u.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,a,i,o){var s=n?n+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,a),!0;case 5:return c.fn.call(c.context,e,r,a,i),!0;case 6:return c.fn.call(c.context,e,r,a,i,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,a);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,a){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return l(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||a&&!o.once||r&&o.context!==r||l(this,i);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==e||a&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:l(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u},function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var a=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),n=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),i=r(9),o=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),a=0;a<4;a++)r[a]=e.getUint32(4*a);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,a=r[0],n=r[1],i=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,t[h]=y,e[y]=h;var v=f[h],g=f[v],b=f[g],w=257*f[y]^16843008*y;a[h]=w<<24|w>>>8,n[h]=w<<16|w>>>16,i[h]=w<<8|w>>>24,o[h]=w,w=16843009*b^65537*g^257*v^16843008*h,l[y]=w<<24|w>>>8,u[y]=w<<16|w>>>16,c[y]=w<<8|w>>>24,d[y]=w,h?(h=v^f[f[f[b^v]]],p^=f[f[p]]):h=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,a=0;a<e.length&&r;)r=e[a]===this.key[a],a++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var i,o,s,l,u=this.ksRows=4*(n+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],y=p[1],v=p[2],g=p[3];for(i=0;i<u;i++)i<n?s=c[i]=e[i]:(l=s,i%n==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=h[i/n|0]<<24):n>6&&i%n==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[i]=s=(c[i-n]^l)>>>0);for(o=0;o<u;o++)i=u-o,l=3&o?c[i]:c[i-4],d[o]=o<4||i<=4?l:m[f[l>>>24]]^y[f[l>>>16&255]]^v[f[l>>>8&255]]^g[f[255&l]],d[o]=d[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var a,n,i,o,s,l,u,c,d,f,h,p,m,y,v=this.keySize+6,g=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,S=w[0],k=w[1],T=w[2],E=w[3],x=this.uint8ArrayToUint32Array_(r),_=x[0],L=x[1],A=x[2],R=x[3],O=new Int32Array(t),C=new Int32Array(O.length),I=this.networkToHostOrderSwap;e<O.length;){for(d=I(O[e]),f=I(O[e+1]),h=I(O[e+2]),p=I(O[e+3]),s=d^g[0],l=p^g[1],u=h^g[2],c=f^g[3],m=4,y=1;y<v;y++)a=S[s>>>24]^k[l>>16&255]^T[u>>8&255]^E[255&c]^g[m],n=S[l>>>24]^k[u>>16&255]^T[c>>8&255]^E[255&s]^g[m+1],i=S[u>>>24]^k[c>>16&255]^T[s>>8&255]^E[255&l]^g[m+2],o=S[c>>>24]^k[s>>16&255]^T[l>>8&255]^E[255&u]^g[m+3],s=a,l=n,u=i,c=o,m+=4;a=b[s>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^g[m],n=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&s]^g[m+1],i=b[u>>>24]<<24^b[c>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^g[m+2],o=b[c>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^g[m+3],C[e]=I(a^_),C[e+1]=I(o^L),C[e+2]=I(i^A),C[e+3]=I(n^R),_=d,L=f,A=h,R=p,e+=4}return C.buffer},t}(),s=r(1),l=r(6),u=function(){function t(t,e,r){var a=(void 0===r?{}:r).removePKCS7Padding,n=void 0===a||a;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=n,n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e,r,a,n=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(a=(r=(e=n).byteLength)&&new DataView(e.buffer).getUint8(r-1))?Object(i.a)(e,0,r-a):e:n}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r,a){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,r);var n=this.flush();n&&a(n.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,r).then(a)},e.softwareDecrypt=function(t,e,r){var a=this.currentIV,n=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(t=Object(l.a)(s,t),this.remainderData=null);var u=this.getValidChunk(t);if(!u.length)return null;a&&(r=a);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new o),c.expandKey(e);var d=n;return this.currentResult=c.decrypt(u.buffer,0,r),this.currentIV=Object(i.a)(u,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,r){var i=this,o=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new n(o,e)),this.fastAesKey.expandKey().then((function(e){return o?new a(o,r).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(a){return i.onWebCryptoError(a,t,e,r)}))},e.onWebCryptoError=function(t,e,r,a){return s.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,a)},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=Object(i.a)(t,0,r),this.remainderData=Object(i.a)(t,r)),e},e.logOnce=function(t){this.logEnabled&&(s.b.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return g}));var a=r(3),n=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),i=Math.pow(2,32)-1,o=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:a};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=i,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=8,r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var i=a.length,o=i;i--;)e+=a[i].byteLength;var s=new Uint8Array(e);for(s[0]=e>>24&255,s[1]=e>>16&255,s[2]=e>>8&255,s[3]=255&e,s.set(t,4),i=0,e=8;i<o;i++)s.set(a[i],e),e+=a[i].byteLength;return s},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,a){return t.box(t.types.moof,t.mfhd(e),t.traf(a,r))},t.moov=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(a).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(a))},t.mvhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var r,a,n=e.samples||[],i=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)a=n[r].flags,i[r+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,a,n,i=[],o=[];for(r=0;r<e.sps.length;r++)n=(a=e.sps[r]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(a));for(r=0;r<e.pps.length;r++)n=(a=e.pps[r]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(a));var s=t.box(t.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(o))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,a=e.duration*e.timescale,n=e.width,o=e.height,s=Math.floor(a/(i+1)),l=Math.floor(a%(i+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,r){var a=t.sdtp(e),n=e.id,o=Math.floor(r/(i+1)),s=Math.floor(r%(i+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,a.length+16+20+8+16+8+8),a)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var a,n,i,o,s,l,u=e.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),a=0;a<c;a++)i=(n=u[a]).duration,o=n.size,s=n.flags,l=n.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*a);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),a=new Uint8Array(t.FTYP.byteLength+r.byteLength);return a.set(t.FTYP),a.set(r,t.FTYP.byteLength),a},t}();o.types=void 0,o.HDLR_TYPES=void 0,o.STTS=void 0,o.STSC=void 0,o.STCO=void 0,o.STSZ=void 0,o.VMHD=void 0,o.SMHD=void 0,o.STSD=void 0,o.FTYP=void 0,o.DINF=void 0;var s=o,l=r(0),u=r(2),c=r(1),d=r(4),f=r(8);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var p=null,m=null,y=!1,v=function(){function t(t,e,r,a){if(void 0===a&&(a=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===p){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);p=n?parseInt(n[1]):0}if(null===m){var i=navigator.userAgent.match(/Safari\/(\d+)/i);m=i?parseInt(i[1]):0}y=!!p&&p<75||!!m&&m<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){c.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){c.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){c.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var a=r.pts-t;return a<-4294967296?(e=!0,g(t,r.pts)):a>0?t:r.pts}),t[0].pts);return e&&c.b.debug("PTS rollover detected"),r},e.remux=function(t,e,r,a,n,i,o,s){var l,u,f,h,p,m,y=n,v=n,b=t.pid>-1,w=e.pid>-1,S=e.samples.length,k=t.samples.length>0,T=S>1;if((!b||k)&&(!w||T)||this.ISGenerated||o){this.ISGenerated||(f=this.generateIS(t,e,n));var E=this.isVideoContiguous,x=-1;if(T&&(x=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!E&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,x>0){c.b.warn("[mp4-remuxer]: Dropped "+x+" out of "+S+" video samples due to a missing keyframe");var _=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(x),e.dropped+=x,v+=(e.samples[0].pts-_)/(e.timescale||9e4)}else-1===x&&(c.b.warn("[mp4-remuxer]: No keyframe found out of "+S+" video samples"),m=!1);if(this.ISGenerated){if(k&&T){var L=this.getVideoStartPts(e.samples),A=(g(t.samples[0].pts,L)-L)/e.inputTimeScale;y+=Math.max(0,A),v+=Math.max(0,-A)}if(k){if(t.samplerate||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(t,e,n)),u=this.remuxAudio(t,y,this.isAudioContiguous,i,w||T||s===d.b.AUDIO?v:void 0),T){var R=u?u.endPTS-u.startPTS:0;e.inputTimeScale||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(t,e,n)),l=this.remuxVideo(e,v,E,R)}}else T&&(l=this.remuxVideo(e,v,E,0));l&&(l.firstKeyFrame=x,l.independent=-1!==x)}}return this.ISGenerated&&(r.samples.length&&(p=this.remuxID3(r,n)),a.samples.length&&(h=this.remuxText(a,n))),{audio:u,video:l,initSegment:f,independent:m,text:h,id3:p}},e.generateIS=function(t,e,r){var n,i,o,l=t.samples,u=e.samples,c=this.typeSupported,d={},f=!Object(a.a)(this._initPTS),h="audio/mp4";if(f&&(n=i=1/0),t.config&&l.length&&(t.timescale=t.samplerate,t.isAAC||(c.mpeg?(h="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:h,codec:t.codec,initSegment:!t.isAAC&&c.mpeg?new Uint8Array(0):s.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(o=t.inputTimeScale,n=i=l[0].pts-Math.round(o*r))),e.sps&&e.pps&&u.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:s.initSegment([e]),metadata:{width:e.width,height:e.height}},f)){o=e.inputTimeScale;var p=this.getVideoStartPts(u),m=Math.round(o*r);i=Math.min(i,g(u[0].dts,p)-m),n=Math.min(n,p-m)}if(Object.keys(d).length)return this.ISGenerated=!0,f&&(this._initPTS=n,this._initDTS=i),{tracks:d,initPTS:n,timescale:o}},e.remuxVideo=function(t,e,r,a){var n,i,o,d=t.inputTimeScale,m=t.samples,v=[],w=m.length,S=this._initPTS,k=this.nextAvcDts,T=8,E=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,_=0,L=!1;r&&null!==k||(k=e*d-(m[0].pts-g(m[0].dts,m[0].pts)));for(var A=0;A<w;A++){var R=m[A];R.pts=g(R.pts-S,k),R.dts=g(R.dts-S,k),R.dts>R.pts&&(_=Math.max(Math.min(_,R.pts-R.dts),-18e3)),R.dts<m[A>0?A-1:A].dts&&(L=!0)}L&&m.sort((function(t,e){var r=t.dts-e.dts,a=t.pts-e.pts;return r||a})),i=m[0].dts,o=m[m.length-1].dts;var O=Math.round((o-i)/(w-1));if(_<0){if(_<-2*O){c.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(f.b)(-O,!0)+" ms");for(var C=_,I=0;I<w;I++)m[I].dts=C=Math.max(C,m[I].pts-O),m[I].pts=Math.max(C,m[I].pts)}else{c.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(f.b)(_,!0)+" ms to overcome this issue");for(var D=0;D<w;D++)m[D].dts=m[D].dts+_}i=m[0].dts}if(r){var P=i-k,M=P>O;if(M||P<-1){M?c.b.warn("AVC: "+Object(f.b)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):c.b.warn("AVC: "+Object(f.b)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),i=k;var F=m[0].pts-P;m[0].dts=i,m[0].pts=F,c.b.log("Video: First PTS/DTS adjusted: "+Object(f.b)(F,!0)+"/"+Object(f.b)(i,!0)+", delta: "+Object(f.b)(P,!0)+" ms")}}y&&(i=Math.max(0,i));for(var B=0,N=0,U=0;U<w;U++){for(var j=m[U],G=j.units,z=G.length,H=0,q=0;q<z;q++)H+=G[q].data.length;N+=H,B+=z,j.length=H,j.dts=Math.max(j.dts,i),j.pts=Math.max(j.pts,j.dts,0),E=Math.min(j.pts,E),x=Math.max(j.pts,x)}o=m[w-1].dts;var Y,K=N+4*B+8;try{Y=new Uint8Array(K)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating video mdat "+K})}var V=new DataView(Y.buffer);V.setUint32(0,K),Y.set(s.types.mdat,4);for(var W=0;W<w;W++){for(var X=m[W],Q=X.units,$=0,J=0,Z=Q.length;J<Z;J++){var tt=Q[J],et=tt.data,rt=tt.data.byteLength;V.setUint32(T,rt),T+=4,Y.set(et,T),T+=rt,$+=4+rt}if(W<w-1)n=m[W+1].dts-X.dts;else{var at=this.config,nt=X.dts-m[W>0?W-1:W].dts;if(at.stretchShortVideoTrack&&null!==this.nextAudioPts){var it=Math.floor(at.maxBufferHole*d),ot=(a?E+a*d:this.nextAudioPts)-X.pts;ot>it?((n=ot-nt)<0&&(n=nt),c.b.log("[mp4-remuxer]: It is approximately "+ot/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=nt}else n=nt}var st=Math.round(X.pts-X.dts);v.push(new b(X.key,n,$,st))}if(v.length&&p&&p<70){var lt=v[0].flags;lt.dependsOn=2,lt.isNonSync=0}this.nextAvcDts=k=o+n,this.isVideoContiguous=!0;var ut={data1:s.moof(t.sequenceNumber++,i,h({},t,{samples:v})),data2:Y,startPTS:E/d,endPTS:(x+n)/d,startDTS:i/d,endDTS:k/d,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:t.dropped};return t.samples=[],t.dropped=0,ut},e.remuxAudio=function(t,e,r,a,i){var o=t.inputTimeScale,d=o/(t.samplerate?t.samplerate:o),f=t.isAAC?1024:1152,p=f*d,m=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,v=[],w=t.samples,S=y?0:8,k=this.nextAudioPts||-1,T=e*o;if(this.isAudioContiguous=r=r||w.length&&k>0&&(a&&Math.abs(T-k)<9e3||Math.abs(g(w[0].pts-m,T)-k)<20*p),w.forEach((function(t){t.pts=g(t.pts-m,T)})),!r||k<0){if(!(w=w.filter((function(t){return t.pts>=0}))).length)return;k=0===i?0:a?Math.max(0,T):w[0].pts}if(t.isAAC)for(var E=void 0!==i,x=this.config.maxAudioFramesDrift,_=0,L=k;_<w.length;_++){var A=w[_],R=A.pts,O=R-L,C=Math.abs(1e3*O/o);if(O<=-x*p&&E)0===_&&(c.b.warn("Audio frame @ "+(R/o).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*O/o)+" ms."),this.nextAudioPts=k=L=R);else if(O>=x*p&&C<1e4&&E){var I=Math.round(O/p);(L=R-I*p)<0&&(I--,L+=p),0===_&&(this.nextAudioPts=k=L),c.b.warn("[mp4-remuxer]: Injecting "+I+" audio frame @ "+(L/o).toFixed(3)+"s due to "+Math.round(1e3*O/o)+" ms gap.");for(var D=0;D<I;D++){var P=Math.max(L,0),M=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);M||(c.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=A.unit.subarray()),w.splice(_,0,{unit:M,pts:P}),L+=p,_++}}A.pts=L,L+=p}for(var F,B=null,N=null,U=0,j=w.length;j--;)U+=w[j].unit.byteLength;for(var G=0,z=w.length;G<z;G++){var H=w[G],q=H.unit,Y=H.pts;if(null!==N)v[G-1].duration=Math.round((Y-N)/d);else{if(r&&t.isAAC&&(Y=k),B=Y,!(U>0))return;U+=S;try{F=new Uint8Array(U)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(F.buffer).setUint32(0,U),F.set(s.types.mdat,4))}F.set(q,S);var K=q.byteLength;S+=K,v.push(new b(!0,f,K,0)),N=Y}var V=v.length;if(V){var W=v[v.length-1];this.nextAudioPts=k=N+d*W.duration;var X=y?new Uint8Array(0):s.moof(t.sequenceNumber++,B/d,h({},t,{samples:v}));t.samples=[];var Q=B/o,$=k/o,J={data1:X,data2:F,startPTS:Q,endPTS:$,startDTS:Q,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:V};return this.isAudioContiguous=!0,J}},e.remuxEmptyAudio=function(t,e,r,a){var i=t.inputTimeScale,o=i/(t.samplerate?t.samplerate:i),s=this.nextAudioPts,l=(null!==s?s:a.startDTS*i)+this._initDTS,u=a.endDTS*i+this._initDTS,d=1024*o,f=Math.ceil((u-l)/d),h=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(c.b.warn("[mp4-remuxer]: remux empty Audio"),h){for(var p=[],m=0;m<f;m++){var y=l+m*d;p.push({unit:h,pts:y,dts:y})}return t.samples=p,this.remuxAudio(t,e,r,!1)}c.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=this._initDTS,o=0;o<r;o++){var s=t.samples[o];s.pts=g(s.pts-n,e*a)/a,s.dts=g(s.dts-i,e*a)/a}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=0;i<r;i++){var o=t.samples[i];o.pts=g(o.pts-n,e*a)/a}t.samples.sort((function(t,e){return t.pts-e.pts}));var s=t.samples;return t.samples=[],{samples:s}}},t}();function g(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var b=function(t,e,r,a){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=a,this.flags=new w(t)},w=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(11);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(a.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e,r;return t.fromURL=function(e,r){return new t(e,r)},t.fromURI=function(e){return new t(e)},e=t,(r=[{key:"uri",get:function(){return this._uri}}])&&n(e.prototype,r),t}()},function(t,e,r){function a(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var a=r(r.s=ENTRY_MODULE);return a.default||a}function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(t,e,a){var i={};i[a]=[];var o=e.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return i;for(var l,u=s[1],c=new RegExp("(\\\\n|\\W)"+n(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=c.exec(o);)"dll-reference"!==l[3]&&i[a].push(l[3]);for(c=new RegExp("\\("+n(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=c.exec(o);)t[l[2]]||(i[a].push(l[1]),t[l[2]]=r(l[1]).m),i[l[2]]=i[l[2]]||[],i[l[2]].push(l[4]);for(var d,f=Object.keys(i),h=0;h<f.length;h++)for(var p=0;p<i[f[h]].length;p++)d=i[f[h]][p],isNaN(1*d)||(i[f[h]][p]=1*i[f[h]][p]);return i}function o(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var n={main:r.m},s=e.all?{main:Object.keys(n.main)}:function(t,e){for(var r={main:[e]},a={main:[]},n={main:{}};o(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],c=r[u].pop();if(n[u]=n[u]||{},!n[u][c]&&t[u][c]){n[u][c]=!0,a[u]=a[u]||[],a[u].push(c);for(var d=i(t,t[u][c],u),f=Object.keys(d),h=0;h<f.length;h++)r[f[h]]=r[f[h]]||[],r[f[h]]=r[f[h]].concat(d[f[h]])}}return a}(n,t),l="";Object.keys(s).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;s[t][e];)e++;s[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s[t].map((function(e){return JSON.stringify(e)+": "+n[t][e].toString()})).join(",")+"});\n"})),l=l+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s.main.map((function(t){return JSON.stringify(t)+": "+n.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return s}));var a=r(10),n=r(0),i=r(1),o=r(14);function s(t){var e=new o.EventEmitter,r=function(e,r){t.postMessage({event:e,data:r})};e.on(n.a.FRAG_DECRYPTED,r),e.on(n.a.ERROR,r),t.addEventListener("message",(function(n){var o=n.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.transmuxer=new a.c(e,o.typeSupported,s,o.vendor,o.id),Object(i.a)(s.debug),r("init",null);break;case"configure":t.transmuxer.configure(o.config);break;case"demux":var u=t.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(a.d)(u)?u.then((function(e){l(t,e)})):l(t,u);break;case"flush":var d=o.chunkMeta,f=t.transmuxer.flush(d);Object(a.d)(f)?f.then((function(e){c(t,e,d)})):c(t,f,d)}}))}function l(t,e){if((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,a=[],n=e.remuxResult,i=n.audio,o=n.video;i&&u(a,i),o&&u(a,o),t.postMessage({event:"transmuxComplete",data:e},a)}}function u(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function c(t,e,r){e.forEach((function(e){l(t,e)})),t.postMessage({event:"flush",data:r})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return ea}));var a=r(11),n=r(3),i=r(0),o=r(2),s=r(1),l=r(6),u=r(5);function c(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e,r;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},e=t,(r=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(n.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&c(e.prototype,r),t}(),f=r(17),h=/^(\d+)x(\d+)$/,p=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,m=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),a=0;a<e.length/2;a++)r[a]=parseInt(e.slice(2*a,2*a+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=h.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(p.lastIndex=0;null!==(e=p.exec(t));){var a=e[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),r[e[1]]=a}return r},t}(),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function v(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var g=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,b=/#EXT-X-MEDIA:(.*)/g,w=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),S=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),k=/\.(mp4|m4s|m4v|m4a)$/i,T=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var a=t[r];if(a.id===e)return a}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return(r+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var a,n=[],i={},o=!1;for(g.lastIndex=0;null!=(a=g.exec(e));)if(a[1]){var s=new m(a[1]),l={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:t.resolve(a[2],r)},u=s.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),E((s.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),n.push(l)}else if(a[3]){var c=new m(a[3]);c["DATA-ID"]&&(o=!0,i[c["DATA-ID"]]=c)}return{levels:n,sessionData:o?i:null}},t.parseMasterPlaylistMedia=function(e,r,a,n){var i;void 0===n&&(n=[]);var o=[],s=0;for(b.lastIndex=0;null!==(i=b.exec(e));){var l=new m(i[1]);if(l.TYPE===a){var u={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:a,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(n.length){var c=t.findGroup(n,u.groupId)||n[0];x(u,c,"audioCodec"),x(u,c,"textCodec")}o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,r,i,o){var l,c,h,p=new d(e),y=p.fragments,v=null,g=0,b=0,T=0,E=0,x=null,L=new u.b(i,e),A=-1,R=!1;for(w.lastIndex=0,p.m3u8=t;null!==(l=w.exec(t));){R&&(R=!1,(L=new u.b(i,e)).start=T,L.sn=g,L.cc=E,L.level=r,v&&(L.initSegment=v,L.rawProgramDateTime=v.rawProgramDateTime));var O=l[1];if(O){L.duration=parseFloat(O);var C=(" "+l[2]).slice(1);L.title=C||null,L.tagList.push(C?["INF",O,C]:["INF",O])}else if(l[3])Object(n.a)(L.duration)&&(L.start=T,h&&(L.levelkey=h),L.sn=g,L.level=r,L.cc=E,L.urlId=o,y.push(L),L.relurl=(" "+l[3]).slice(1),_(L,x),x=L,T+=L.duration,g++,b=0,R=!0);else if(l[4]){var I=(" "+l[4]).slice(1);x?L.setByteRange(I,x):L.setByteRange(I)}else if(l[5])L.rawProgramDateTime=(" "+l[5]).slice(1),L.tagList.push(["PROGRAM-DATE-TIME",L.rawProgramDateTime]),-1===A&&(A=y.length);else{if(!(l=l[0].match(S))){s.b.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&void 0===l[c];c++);var D=(" "+l[c]).slice(1),P=(" "+l[c+1]).slice(1),M=l[c+2]?(" "+l[c+2]).slice(1):"";switch(D){case"PLAYLIST-TYPE":p.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":g=p.startSN=parseInt(P);break;case"SKIP":var F=new m(P),B=F.decimalInteger("SKIPPED-SEGMENTS");if(Object(n.a)(B)){p.skippedSegments=B;for(var N=B;N--;)y.unshift(null);g+=B}var U=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(p.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":p.targetduration=parseFloat(P);break;case"VERSION":p.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":p.live=!1;break;case"#":(P||M)&&L.tagList.push(M?[P,M]:[P]);break;case"DIS":E++;case"GAP":L.tagList.push([D]);break;case"BITRATE":L.tagList.push([D,P]);break;case"DISCONTINUITY-SEQ":E=parseInt(P);break;case"KEY":var j,G=new m(P),z=G.enumeratedString("METHOD"),H=G.URI,q=G.hexadecimalInteger("IV"),Y=G.enumeratedString("KEYFORMATVERSIONS"),K=G.enumeratedString("KEYID"),V=null!=(j=G.enumeratedString("KEYFORMAT"))?j:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(V)>-1){s.b.warn("Keyformat "+V+" is not supported from the manifest");continue}if("identity"!==V)continue;z&&(h=f.a.fromURL(e,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(z)>=0&&(h.method=z,h.keyFormat=V,K&&(h.keyID=K),Y&&(h.keyFormatVersions=Y),h.iv=q));break;case"START":var W=new m(P).decimalFloatingPoint("TIME-OFFSET");Object(n.a)(W)&&(p.startTimeOffset=W);break;case"MAP":var X=new m(P);L.relurl=X.URI,X.BYTERANGE&&L.setByteRange(X.BYTERANGE),L.level=r,L.sn="initSegment",h&&(L.levelkey=h),L.initSegment=null,v=L,R=!0;break;case"SERVER-CONTROL":var Q=new m(P);p.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),p.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),p.canSkipDateRanges=p.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),p.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),p.holdBack=Q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new m(P);p.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var J=p.partList;J||(J=p.partList=[]);var Z=b>0?J[J.length-1]:void 0,tt=b++,et=new u.c(new m(P),L,e,tt,Z);J.push(et),L.duration+=et.duration;break;case"PRELOAD-HINT":var rt=new m(P);p.preloadHint=rt;break;case"RENDITION-REPORT":var at=new m(P);p.renditionReports=p.renditionReports||[],p.renditionReports.push(at);break;default:s.b.warn("line parsed but not handled: "+l)}}}x&&!x.relurl?(y.pop(),T-=x.duration,p.partList&&(p.fragmentHint=x)):p.partList&&(_(L,x),L.cc=E,p.fragmentHint=L);var nt=y.length,it=y[0],ot=y[nt-1];if((T+=p.skippedSegments*p.targetduration)>0&&nt&&ot){p.averagetargetduration=T/nt;var st=ot.sn;p.endSN="initSegment"!==st?st:0,it&&(p.startCC=it.cc,it.initSegment||p.fragments.every((function(t){return t.relurl&&(e=t.relurl,k.test(null!=(r=null===(n=a.parseURL(e))||void 0===n?void 0:n.path)?r:""));var e,r,n}))&&(s.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(L=new u.b(i,e)).relurl=ot.relurl,L.level=r,L.sn="initSegment",it.initSegment=L,p.needSidxRanges=!0))}else p.endSN=0,p.startCC=0;return p.fragmentHint&&(T+=p.fragmentHint.duration),p.totalduration=T,p.endCC=E,A>0&&function(t,e){for(var r=t[e],a=e;a--;){var n=t[a];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(y,A),p},t}();function E(t,e){["video","audio","text"].forEach((function(r){var a=t.filter((function(t){return function(t,e){var r=y[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(a.length){var n=a.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:a[0],t=t.filter((function(t){return-1===a.indexOf(t)}))}})),e.unknownCodecs=t}function x(t,e,r){var a=e[r];a&&(t[r]=a)}function _(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(n.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var L=r(4);function A(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var R=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,a=e.loader,n=new(r||a)(e);return t.loader=n,this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:L.a.MANIFEST,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,a=e.level,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:null,level:a,responseType:"text",type:L.a.LEVEL,url:n,deliveryDirectives:i})},e.onAudioTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:L.a.AUDIO_TRACK,url:n,deliveryDirectives:i})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:L.a.SUBTITLE_TRACK,url:n,deliveryDirectives:i})},e.load=function(t){var e,r,a,n,i,o,l=this.hls.config,u=this.getInternalLoader(t);if(u){var c=u.context;if(c&&c.url===t.url)return void s.b.trace("[playlist-loader]: playlist request ongoing");s.b.log("[playlist-loader]: aborting previous loader for type: "+t.type),u.abort()}switch(t.type){case L.a.MANIFEST:r=l.manifestLoadingMaxRetry,a=l.manifestLoadingTimeOut,n=l.manifestLoadingRetryDelay,i=l.manifestLoadingMaxRetryTimeout;break;case L.a.LEVEL:case L.a.AUDIO_TRACK:case L.a.SUBTITLE_TRACK:r=0,a=l.levelLoadingTimeOut;break;default:r=l.levelLoadingMaxRetry,a=l.levelLoadingTimeOut,n=l.levelLoadingRetryDelay,i=l.levelLoadingMaxRetryTimeout}if(u=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===L.a.LEVEL&&null!==t.level?o=this.hls.levels[t.level].details:t.type===L.a.AUDIO_TRACK&&null!==t.id?o=this.hls.audioTracks[t.id].details:t.type===L.a.SUBTITLE_TRACK&&null!==t.id&&(o=this.hls.subtitleTracks[t.id].details),o)){var d=o.partTarget,f=o.targetduration;d&&f&&(a=Math.min(1e3*Math.max(3*d,.8*f),a))}var h={timeout:a,maxRetry:r,retryDelay:n,maxRetryDelay:i,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(t,h,p)},e.loadsuccess=function(t,e,r,a){if(void 0===a&&(a=null),r.isSidxRequest)return this.handleSidxRequest(t,r),void this.handlePlaylistLoaded(t,e,r,a);this.resetInternalLoader(r.type);var n=t.data;0===n.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,r,a):this.handleMasterPlaylist(t,e,r,a)):this.handleManifestParsingError(t,r,"no EXTM3U delimiter",a)},e.loaderror=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!1,t)},e.loadtimeout=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!0)},e.handleMasterPlaylist=function(t,e,r,a){var n=this.hls,o=t.data,l=A(t,r),u=T.parseMasterPlaylist(o,l),c=u.levels,d=u.sessionData;if(c.length){var f=c.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),h=c.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),p=T.parseMasterPlaylistMedia(o,l,"AUDIO",f),y=T.parseMasterPlaylistMedia(o,l,"SUBTITLES",h),v=T.parseMasterPlaylistMedia(o,l,"CLOSED-CAPTIONS");p.length&&(p.some((function(t){return!t.url}))||!c[0].audioCodec||c[0].attrs.AUDIO||(s.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new m({}),bitrate:0,url:""}))),n.trigger(i.a.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:y,captions:v,url:l,stats:e,networkDetails:a,sessionData:d})}else this.handleManifestParsingError(t,r,"no level found in manifest",a)},e.handleTrackOrLevelPlaylist=function(t,e,r,a){var s=this.hls,l=r.id,u=r.level,c=r.type,d=A(t,r),f=Object(n.a)(l)?l:0,h=Object(n.a)(u)?u:f,p=function(t){switch(t.type){case L.a.AUDIO_TRACK:return L.b.AUDIO;case L.a.SUBTITLE_TRACK:return L.b.SUBTITLE;default:return L.b.MAIN}}(r),y=T.parseLevelPlaylist(t.data,d,h,p,f);if(y.fragments.length){if(c===L.a.MANIFEST){var v={attrs:new m({}),bitrate:0,details:y,name:"",url:d};s.trigger(i.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:e,networkDetails:a,sessionData:null})}if(e.parsing.end=performance.now(),y.needSidxRanges){var g,b=null===(g=y.fragments[0].initSegment)||void 0===g?void 0:g.url;this.load({url:b,isSidxRequest:!0,type:c,level:u,levelDetails:y,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else r.levelDetails=y,this.handlePlaylistLoaded(t,e,r,a)}else s.trigger(i.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},e.handleSidxRequest=function(t,e){var r=Object(l.g)(new Uint8Array(t.data));if(r){var a=r.references,n=e.levelDetails;a.forEach((function(t,e){var a=t.info,i=n.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+a.end-a.start)+"@"+String(a.start)),i.initSegment&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,r,a){this.hls.trigger(i.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:e.type===L.a.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:a})},e.handleNetworkError=function(t,e,r,a){void 0===r&&(r=!1),s.b.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var n=o.a.UNKNOWN,l=!1,u=this.getInternalLoader(t);switch(t.type){case L.a.MANIFEST:n=r?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,l=!0;break;case L.a.LEVEL:n=r?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,l=!1;break;case L.a.AUDIO_TRACK:n=r?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case L.a.SUBTITLE_TRACK:n=r?o.a.SUBTITLE_TRACK_LOAD_TIMEOUT:o.a.SUBTITLE_LOAD_ERROR,l=!1}u&&this.resetInternalLoader(t.type);var c={type:o.b.NETWORK_ERROR,details:n,fatal:l,url:t.url,loader:u,context:t,networkDetails:e};a&&(c.response=a),this.hls.trigger(i.a.ERROR,c)},e.handlePlaylistLoaded=function(t,e,r,a){var n=r.type,o=r.level,s=r.id,l=r.groupId,u=r.loader,c=r.levelDetails,d=r.deliveryDirectives;if(null!=c&&c.targetduration){if(u)switch(c.live&&(u.getCacheAge&&(c.ageHeader=u.getCacheAge()||0),u.getCacheAge&&!isNaN(c.ageHeader)||(c.ageHeader=0)),n){case L.a.MANIFEST:case L.a.LEVEL:this.hls.trigger(i.a.LEVEL_LOADED,{details:c,level:o||0,id:s||0,stats:e,networkDetails:a,deliveryDirectives:d});break;case L.a.AUDIO_TRACK:this.hls.trigger(i.a.AUDIO_TRACK_LOADED,{details:c,id:s||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d});break;case L.a.SUBTITLE_TRACK:this.hls.trigger(i.a.SUBTITLE_TRACK_LOADED,{details:c,id:s||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d})}}else this.handleManifestParsingError(t,r,"invalid target duration",a)},t}(),O=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(i.a.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(i.a.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var r=e.frag,a=r.type,n=this.loaders[a];if(r.decryptdata){var o=r.decryptdata.uri;if(o!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(n&&(s.b.warn("abort previous key loader for type:"+a),n.abort()),!o)return void s.b.warn("key uri is falsy");var u=l.loader,c=r.loader=this.loaders[a]=new u(l);this.decrypturl=o,this.decryptkey=null;var d={url:o,frag:r,responseType:"arraybuffer"},f={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(d,f,h)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(i.a.KEY_LOADED,{frag:r}))}else s.b.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,r){var a=r.frag;a.decryptdata?(this.decryptkey=a.decryptdata.key=new Uint8Array(t.data),a.loader=null,delete this.loaders[a.type],this.hls.trigger(i.a.KEY_LOADED,{frag:a})):s.b.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.loadtimeout=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}();function C(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function I(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){s.b.debug("[texttrack-utils]: "+r);var a=new self.TextTrackCue(e.startTime,e.endTime,e.text);a.id=e.id,t.addCue(a)}"disabled"===r&&(t.mode=r)}function D(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function P(t,e,r){var a=t.mode;if("disabled"===a&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var n=function(t,e,r){var a=[],n=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var a=0,n=r;a<=n;){var i=Math.floor((n+a)/2);if(e<t[i].startTime)n=i-1;else{if(!(e>t[i].startTime&&a<r))return i;a=i+1}}return t[a].startTime-e<e-t[n].startTime?a:n}(t,e);if(n>-1)for(var i=n,o=t.length;i<o;i++){var s=t[i];if(s.startTime>=e&&s.endTime<=r)a.push(s);else if(s.startTime>r)return a}return a}(t.cues,e,r),i=0;i<n.length;i++)t.removeCue(n[i]);"disabled"===a&&(t.mode=a)}var M=r(7),F=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(D(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return C(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=e.frag,a=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,i=0;i<a.length;i++){var o=M.c(a[i].data);if(o){var s=a[i].pts,l=i<a.length-1?a[i+1].pts:r.end;l-s<=0&&(l=s+.25);for(var u=0;u<o.length;u++){var c=o[u];if(!M.e(c)){var d=new n(s,l,"");d.value=c,this.id3Track.addCue(d)}}}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.type;if(!n||"audio"===n){var i=this.id3Track;i&&P(i,r,a)}},t}();function B(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var N,U=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},a.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.a.ERROR,this.onError)},a.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},a.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},a.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},a.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},a.onError=function(t,e){e.details===o.a.BUFFER_STALLED_ERROR&&(this.stallCount++,s.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},a.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var a=this.config,n=a.lowLatencyMode,i=a.maxLiveSyncPlaybackRate;if(n&&1!==i){var o=this.targetLatency;if(null!==o){var s=r-o,l=s<Math.min(this.maxLatency,o+e.targetduration);if(e.live&&l&&s>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,i)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,c))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},a.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},a.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,a=t.targetduration,n=this.config,i=n.liveSyncDuration,o=n.liveSyncDurationCount,s=n.lowLatencyMode,l=this.hls.userConfig,u=s&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==i?i:o*a);var c=a;return u+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var a=r.edge,n=t-e-this.edgeStalled,i=a-r.totalduration,o=a-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(i,n),o)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return r?t.buffered.end(r-1):e.edge-this.currentTime}}])&&B(e.prototype,r),t}();function j(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}!function(t){t.No="",t.Yes="YES",t.v2="v2"}(N||(N={}));var G=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),z=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e,r;return e=t,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&j(e.prototype,r),t}();function H(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function q(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}function Y(t,e){var r=e.startPTS;if(Object(n.a)(r)){var a,i=0;e.sn>t.sn?(i=r-t.start,a=t):(i=t.start-r,a=e),a.duration!==i&&(a.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function K(t,e,r,a,i,o){a-r<=0&&(s.b.warn("Fragment should have a positive duration",e),a=r+e.duration,o=i+e.duration);var l=r,u=a,c=e.startPTS,d=e.endPTS;if(Object(n.a)(c)){var f=Math.abs(c-r);Object(n.a)(e.deltaPTS)?e.deltaPTS=Math.max(f,e.deltaPTS):e.deltaPTS=f,l=Math.max(r,c),r=Math.min(r,c),i=Math.min(i,e.startDTS),u=Math.min(a,d),a=Math.max(a,d),o=Math.max(o,e.endDTS)}e.duration=a-r;var h=r-e.start;e.appendedPTS=a,e.start=e.startPTS=r,e.maxStartPTS=l,e.startDTS=i,e.endPTS=a,e.minEndPTS=u,e.endDTS=o;var p,m=e.sn;if(!t||m<t.startSN||m>t.endSN)return 0;var y=m-t.startSN,v=t.fragments;for(v[y]=e,p=y;p>0;p--)Y(v[p],v[p-1]);for(p=y;p<v.length-1;p++)Y(v[p],v[p+1]);return t.fragmentHint&&Y(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function V(t,e){for(var r=null,a=t.fragments,i=a.length-1;i>=0;i--){var o=a[i].initSegment;if(o){r=o;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var l,u=0;if(function(t,e,r){for(var a=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(a?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=n;u<=i;u++){var c=l[o+u],d=s[u];a&&!d&&u<a&&(d=e.fragments[u]=c),c&&d&&r(c,d)}}(t,e,(function(t,a){t.relurl&&(u=t.cc-a.cc),Object(n.a)(t.startPTS)&&Object(n.a)(t.endPTS)&&(a.start=a.startPTS=t.startPTS,a.startDTS=t.startDTS,a.appendedPTS=t.appendedPTS,a.maxStartPTS=t.maxStartPTS,a.endPTS=t.endPTS,a.endDTS=t.endDTS,a.minEndPTS=t.minEndPTS,a.duration=t.endPTS-t.startPTS,a.duration&&(l=a),e.PTSKnown=e.alignedSliding=!0),a.elementaryStreams=t.elementaryStreams,a.loader=t.loader,a.stats=t.stats,a.urlId=t.urlId,t.initSegment&&(a.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null===(e=r)||void 0===e?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){s.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var c=e.skippedSegments;c--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var d=e.fragments;if(u){s.b.warn("discontinuity sliding from playlist, take drift into account");for(var f=0;f<d.length;f++)d[f].cc+=u}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var a=0,n=0,i=t.length;n<=i;n++){var o=t[n],s=e[n+a];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?r(o,s):a--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),l?K(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):W(t,e),d.length&&(e.totalduration=e.edge-d[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var h=e.advancedDateTime;if(e.advanced&&h){var p=e.edge;e.driftStart||(e.driftStartTime=h,e.driftStart=p),e.driftEndTime=h,e.driftEnd=p}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function W(t,e){var r=e.startSN+e.skippedSegments-t.startSN,a=t.fragments;r<0||r>=a.length||X(e,a[r].start)}function X(t,e){if(e){for(var r=t.fragments,a=t.skippedSegments;a<r.length;a++)r[a].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}var Q=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=s.b.log.bind(s.b,e+":"),this.warn=s.b.warn.bind(s.b,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===o.b.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=""+i.URI;if(o===t.substr(-o.length)){var s=parseInt(i["LAST-MSN"]),l=parseInt(i["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var u=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&u>e.partTarget&&(l+=1)}if(Object(n.a)(s))return new G(s,Object(n.a)(l)?l:void 0,N.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,r){var a=this,n=e.details,i=e.stats,o=i.loading.end?Math.max(0,self.performance.now()-i.loading.end):0;if(n.advancedDateTime=Date.now()-o,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+t+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&V(r,n),!this.canLoad||!n.live)return;var s,l=void 0,u=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var c=this.hls.config.lowLatencyMode,d=n.lastPartSn,f=n.endSN,h=n.lastPartIndex,p=d===f;-1!==h?(l=p?f+1:d,u=p?c?0:h:h+1):l=f+1;var m=n.age,y=m+n.ageHeader,v=Math.min(y-n.partTarget,1.5*n.targetduration);if(v>0){if(r&&v>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+v+" with playlist age: "+n.age),v=0;else{var g=Math.floor(v/n.targetduration);l+=g,void 0!==u&&(u+=Math.round(v%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+v+" skip sn "+g+" to part "+u)}n.tuneInGoal=v}if(s=this.getDeliveryDirectives(n,e.deliveryDirectives,l,u),c||!p)return void this.loadPlaylist(s)}else s=this.getDeliveryDirectives(n,e.deliveryDirectives,l,u);var b=function(t,e){var r,a=1e3*t.levelTargetDuration,n=a/2,i=t.age,o=i>0&&i<3*a,s=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(o){var u=333*t.misses;r=Math.max(Math.min(n,2*s),u),t.availabilityDelay=(t.availabilityDelay||0)+r}else r=n;else o?(l=Math.min(l||a/2,i),t.availabilityDelay=l,r=l+a-i):r=a-s;return Math.round(r)}(n,i);void 0!==l&&n.canBlockReload&&(b-=n.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return a.loadPlaylist(s)}),b)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,a){var n=function(t,e){var r=t.canSkipUntil,a=t.canSkipDateRanges,n=t.endSN;return r&&(void 0!==e?e-n:0)<r?a?N.v2:N.Yes:N.No}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,a=e.part,n=N.No),new G(r,a,n)},e.retryLoadingOrFail=function(t){var e,r=this,a=this.hls.config,n=this.retryCount<a.levelLoadingMaxRetry;if(n)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var i=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),i),this.warn("retry playlist loading #"+this.retryCount+" in "+i+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return n},t}();function $(){return($=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function J(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),rt=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Z(e,r);var n,s,l=a.prototype;return l._registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.ERROR,this.onError,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},l.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},l.onManifestLoaded=function(t,e){var r,a,n=[],s=[],l=[],u={},c=!1,d=!1,f=!1;if(e.levels.forEach((function(t){var e=t.attrs;c=c||!(!t.width||!t.height),d=d||!!t.videoCodec,f=f||!!t.audioCodec,et&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var r=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(a=u[r])?a.url.push(t.url):(a=new z(t),u[r]=a,n.push(a)),e&&(e.AUDIO&&H(a,"audio",e.AUDIO),e.SUBTITLES&&H(a,"text",e.SUBTITLES))})),(c||d)&&f&&(n=n.filter((function(t){var e=t.videoCodec,r=t.width,a=t.height;return!!e||!(!r||!a)}))),n=n.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||v(e,"audio"))&&(!r||v(r,"video"))})),e.audioTracks&&q(s=e.audioTracks.filter((function(t){return!t.audioCodec||v(t.audioCodec,"audio")}))),e.subtitles&&q(l=e.subtitles),n.length>0){r=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var h=0;h<n.length;h++)if(n[h].bitrate===r){this._firstLevel=h,this.log("manifest loaded, "+n.length+" level(s) found, first bitrate: "+r);break}var p=f&&!d,m={levels:n,audioTracks:s,subtitleTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:f,video:d,altAudio:!p&&s.some((function(t){return!!t.url}))};this.hls.trigger(i.a.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},l.onError=function(e,r){if(t.prototype.onError.call(this,e,r),!r.fatal){var a=r.context,n=this._levels[this.currentLevelIndex];if(a&&(a.type===L.a.AUDIO_TRACK&&n.audioGroupIds&&a.groupId===n.audioGroupIds[n.urlId]||a.type===L.a.SUBTITLE_TRACK&&n.textGroupIds&&a.groupId===n.textGroupIds[n.urlId]))this.redundantFailover(this.currentLevelIndex);else{var i,s=!1,l=!0;switch(r.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:if(r.frag){var u=this._levels[r.frag.level];u?(u.fragmentError++,u.fragmentError>this.hls.config.fragLoadingMaxRetry&&(i=r.frag.level)):i=r.frag.level}break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:a&&(a.deliveryDirectives&&(l=!1),i=a.level),s=!0;break;case o.a.REMUX_ALLOC_ERROR:i=r.level,s=!0}void 0!==i&&this.recoverLevel(r,i,s,l)}}},l.recoverLevel=function(t,e,r,a){var n=t.details,i=this._levels[e];if(i.loadError++,r){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(a){var o=i.url.length;if(o>1&&i.loadError<o)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var s=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(n+": switch to "+s),t.levelRetry=!0,this.hls.nextAutoLevel=s)}}},l.redundantFailover=function(t){var e=this._levels[t],r=e.url.length;if(r>1){var a=(e.urlId+1)%r;this.warn("Switching to redundant URL-id "+a),this._levels.forEach((function(t){t.urlId=a})),this.level=t}},l.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===L.b.MAIN){var a=this._levels[r.level];void 0!==a&&(a.fragmentError=0,a.loadError=0)}},l.onLevelLoaded=function(t,e){var r,a,n=e.level,i=e.details,o=this._levels[n];if(!o)return this.warn("Invalid level index "+n),void(null!==(a=e.deliveryDirectives)&&void 0!==a&&a.skip&&(i.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(n,e,o.details)):null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(i.deltaUpdateFailed=!0)},l.onAudioTrackSwitched=function(t,e){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var a=-1,n=this.hls.audioTracks[e.id].groupId,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===n){a=i;break}a!==r.urlId&&(r.urlId=a,this.startLoad())}},l.loadPlaylist=function(t){var e=this.currentLevelIndex,r=this._levels[e];if(this.canLoad&&r&&r.url.length>0){var a=r.urlId,n=r.url[a];if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+n),this.clearTimer(),this.hls.trigger(i.a.LEVEL_LOADING,{url:n,level:e,id:a,deliveryDirectives:t||null})}},l.removeLevel=function(t,e){var r=function(t,r){return r!==e},a=this._levels.filter((function(a,n){return n!==t||a.url.length>1&&void 0!==e&&(a.url=a.url.filter(r),a.audioGroupIds&&(a.audioGroupIds=a.audioGroupIds.filter(r)),a.textGroupIds&&(a.textGroupIds=a.textGroupIds.filter(r)),a.urlId=0,!0)})).map((function(t,e){var r=t.details;return null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e})),t}));this._levels=a,this.hls.trigger(i.a.LEVELS_UPDATED,{levels:a})},n=a,(s=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==t||null===(e=r[t])||void 0===e||!e.details)){if(t<0||t>=r.length){var a=t<0;if(this.hls.trigger(i.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:t,fatal:a,reason:"invalid level idx"}),a)return;t=Math.min(t,r.length-1)}this.clearTimer();var n=this.currentLevelIndex,s=r[n],l=r[t];this.log("switching to level "+t+" from "+n),this.currentLevelIndex=t;var u=$({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(i.a.LEVEL_SWITCHING,u);var c=l.details;if(!c||c.live){var d=this.switchParams(l.uri,null==s?void 0:s.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&J(n.prototype,s),a}(Q);!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(tt||(tt={}));var at=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===L.b.MAIN){var r=this.activeFragment,a=this.activeParts;if(!r)return null;if(a)for(var n=a.length;n--;){var i=a[n],o=i?i.end:r.appendedPTS;if(i.start<=t&&void 0!==o&&t<=o)return n>9&&(this.activeParts=a.slice(n-9)),i}else if(r.start<=t&&void 0!==r.appendedPTS&&t<=r.appendedPTS)return r}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,a=Object.keys(r),n=a.length;n--;){var i=r[a[n]];if((null==i?void 0:i.body.type)===e&&i.buffered){var o=i.body;if(o.start<=t&&t<=o.end)return o}}return null},e.detectEvictedFragments=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i)if(i.buffered){var o=i.range[t];o&&o.time.some((function(t){var r=!a.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&a.removeFragment(i.body),r}))}else i.body.type===r&&a.removeFragment(i.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,a=t.frag,n=t.part;if(r&&"initSegment"!==a.sn){var i=it(a),o=this.fragments[i];o&&(Object.keys(r).forEach((function(t){var i=a.elementaryStreams[t];if(i){var s=r[t],l=null!==n||!0===i.partial;o.range[t]=e.getBufferedTimes(a,n,l,s)}})),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},e.fragBuffered=function(t){var e=it(t),r=this.fragments[e];r&&(r.backtrack=r.loaded=null,r.buffered=!0)},e.getBufferedTimes=function(t,e,r,a){for(var n={time:[],partial:r},i=e?e.start:t.start,o=e?e.end:t.end,s=t.minEndPTS||o,l=t.maxStartPTS||i,u=0;u<a.length;u++){var c=a.start(u)-this.bufferPadding,d=a.end(u)+this.bufferPadding;if(l>=c&&s<=d){n.time.push({startPTS:Math.max(i,a.start(u)),endPTS:Math.min(o,a.end(u))});break}if(i<d&&o>c)n.partial=!0,n.time.push({startPTS:Math.max(i,a.start(u)),endPTS:Math.min(o,a.end(u))});else if(o<=c)break}return n},e.getPartialFragment=function(t){var e,r,a,n=null,i=0,o=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach((function(l){var u=s[l];u&&nt(u)&&(r=u.body.start-o,a=u.body.end+o,t>=r&&t<=a&&(e=Math.min(t-r,a-t),i<=e&&(n=u.body,i=e)))})),n},e.getState=function(t){var e=it(t),r=this.fragments[e];return r?r.buffered?nt(r)?tt.PARTIAL:tt.OK:r.backtrack?tt.BACKTRACKED:tt.APPENDING:tt.NOT_LOADED},e.backtrack=function(t,e){var r=it(t),a=this.fragments[r];if(!a||a.backtrack)return null;var n=a.backtrack=e||a.loaded;return a.loaded=null,n},e.getBacktrackData=function(t){var e=it(t),r=this.fragments[e];if(r){var a,n=r.backtrack;if(null!=n&&null!==(a=n.payload)&&void 0!==a&&a.byteLength)return n;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,r){for(var a,n,i=0;i<r.length;i++){if(a=r.start(i)-this.bufferPadding,n=r.end(i)+this.bufferPadding,t>=a&&e<=n)return!0;if(e<=a)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!a){var n=it(r);this.fragments[n]={body:r,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,a=e.frag,n=e.part,i=e.timeRanges;if(a.type===L.b.MAIN)if(this.activeFragment=a,n){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(n)}else this.activeParts=null;this.timeRanges=i,Object.keys(i).forEach((function(t){var e=i[t];if(r.detectEvictedFragments(t,e),!n)for(var o=0;o<e.length;o++)a.appendedPTS=Math.max(e.end(o),a.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=it(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i&&i.buffered){var o=i.body;o.type===r&&o.start<e&&o.end>t&&a.removeFragment(o)}}))},e.removeFragment=function(t){var e=it(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function nt(t){var e,r;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(r=t.range.audio)||void 0===r?void 0:r.partial))}function it(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var ot=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),st={length:0,start:function(){return 0},end:function(){return 0}},lt=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var a=t.getBuffered(e),n=0;n<a.length;n++)if(r>=a.start(n)&&r<=a.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,a){try{if(e){var n,i=t.getBuffered(e),o=[];for(n=0;n<i.length;n++)o.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(o,r,a)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var a=[];if(r)for(var n=0;n<t.length;n++){var i=a.length;if(i){var o=a[i-1].end;t[n].start-o<r?t[n].end>o&&(a[i-1].end=t[n].end):a.push(t[n])}else a.push(t[n])}else a=t;for(var s,l=0,u=e,c=e,d=0;d<a.length;d++){var f=a[d].start,h=a[d].end;if(e+r>=f&&e<h)u=f,l=(c=h)-e;else if(e+r<f){s=f;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},t.getBuffered=function(t){try{return t.buffered}catch(t){return s.b.log("failed to get media.buffered",t),st}},t}(),ut=function(t,e,r,a,n,i){void 0===a&&(a=0),void 0===n&&(n=-1),void 0===i&&(i=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=a,this.part=n,this.partial=i};function ct(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function dt(t,e){for(var r=e.fragments,a=0,n=r.length;a<n;a++)ct(r[a],t);e.fragmentHint&&ct(e.fragmentHint,t),e.alignedSliding=!0}function ft(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var a=function(t,e){var r=t.fragments,a=e.fragments;if(a.length&&r.length){var n=function(t,e){for(var r=null,a=0,n=t.length;a<n;a++){var i=t[a];if(i&&i.cc===e){r=i;break}}return r}(r,a[0].cc);if(n&&(!n||n.startPTS))return n;s.b.log("No frag in previous level to align on")}else s.b.log("No fragments to align")}(r.details,e);a&&Object(n.a)(a.start)&&(s.b.log("Adjusting PTS using last level due to CC increase within current level "+e.url),dt(a.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,i=(a-r)/1e3+e.fragments[0].start;i&&Object(n.a)(i)&&(s.b.log("Adjusting PTS using programDateTime delta "+(a-r)+"ms, sliding:"+i.toFixed(3)+" "+t.url+" "),dt(i,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||W(e.details,r))}function ht(t,e){var r=t.programDateTime;if(r){var a=(r-e)/1e3;t.start=t.startPTS=a,t.endPTS=a+t.duration}}function pt(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime-1e3*e.fragments[0].start;t.fragments.forEach((function(t){ht(t,r)})),t.fragmentHint&&ht(t.fragmentHint,r),t.alignedSliding=!0}}var mt=function(t,e){for(var r=0,a=t.length-1,n=null,i=null;r<=a;){var o=e(i=t[n=(r+a)/2|0]);if(o>0)r=n+1;else{if(!(o<0))return i;a=n-1}}return null};function yt(t,e,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var n=null;return t?n=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(n=e[0]),n&&0===vt(r,a,n)?n:mt(e,vt.bind(null,r,a))||n}function vt(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var a=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-a<=t?1:r.start-a>t&&r.start?-1:0}function gt(t,e,r){var a=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-a>t}function bt(t){var e="function"==typeof Map?new Map:void 0;return(bt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return wt(t,arguments,Tt(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),kt(a,t)})(t)}function wt(t,e,r){return(wt=St()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&kt(n,r.prototype),n}).apply(null,arguments)}function St(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=Math.pow(2,17),xt=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,a=t.url;if(!a)return Promise.reject(new Lt({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(a?"part list":"url")));this.abort();var n=this.config,i=n.fLoader,s=n.loader;return new Promise((function(a,l){r.loader&&r.loader.destroy();var u=r.loader=t.loader=i?new i(n):new s(n),c=_t(t),d={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:Et};t.stats=u.stats,u.load(c,d,{onSuccess:function(e,n,i,o){r.resetLoader(t,u),a({frag:t,part:null,payload:e.data,networkDetails:o})},onError:function(e,a,n){r.resetLoader(t,u),l(new Lt({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:n}))},onAbort:function(e,a,n){r.resetLoader(t,u),l(new Lt({type:o.b.NETWORK_ERROR,details:o.a.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:n}))},onTimeout:function(e,a,n){r.resetLoader(t,u),l(new Lt({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:n}))},onProgress:function(r,a,n,i){e&&e({frag:t,part:null,payload:n,networkDetails:i})}})}))},e.loadPart=function(t,e,r){var a=this;this.abort();var n=this.config,i=n.fLoader,s=n.loader;return new Promise((function(l,u){a.loader&&a.loader.destroy();var c=a.loader=t.loader=i?new i(n):new s(n),d=_t(t,e),f={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:Et};e.stats=c.stats,c.load(d,f,{onSuccess:function(n,i,o,s){a.resetLoader(t,c),a.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:n.data,networkDetails:s};r(u),l(u)},onError:function(r,n,i){a.resetLoader(t,c),u(new Lt({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:r,networkDetails:i}))},onAbort:function(r,n,i){t.stats.aborted=e.stats.aborted,a.resetLoader(t,c),u(new Lt({type:o.b.NETWORK_ERROR,details:o.a.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:i}))},onTimeout:function(r,n,i){a.resetLoader(t,c),u(new Lt({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:i}))}})}))},e.updateStatsFromPart=function(t,e){var r=t.stats,a=e.stats,n=a.total;if(r.loaded+=a.loaded,n){var i=Math.round(t.duration/e.duration),o=Math.min(Math.round(r.loaded/n),i),s=(i-o)*Math.round(r.loaded/o);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=a.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function _t(t,e){void 0===e&&(e=null);var r=e||t,a={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,o=r.byteRangeEndOffset;return Object(n.a)(i)&&Object(n.a)(o)&&(a.rangeStart=i,a.rangeEnd=o),a}var Lt=function(t){var e,r;function a(e){for(var r,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(r=t.call.apply(t,[this].concat(n))||this).data=void 0,r.data=e,r}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,kt(e,r),a}(bt(Error)),At=r(15),Rt=function(t){for(var e="",r=t.length,a=0;a<r;a++)e+="["+t.start(a).toFixed(3)+","+t.end(a).toFixed(3)+"]";return e};function Ot(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var It="STOPPED",Dt="IDLE",Pt="KEY_LOADING",Mt="FRAG_LOADING",Ft="FRAG_LOADING_WAITING_RETRY",Bt="WAITING_TRACK",Nt="PARSING",Ut="PARSED",jt="BACKTRACKING",Gt="ENDED",zt="ERROR",Ht="WAITING_INIT_PTS",qt="WAITING_LEVEL",Yt=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=It,n.media=void 0,n.mediaBuffer=void 0,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=a,n.log=s.b.log.bind(s.b,a+":"),n.warn=s.b.warn.bind(s.b,a+":"),n.hls=e,n.fragmentLoader=new xt(e.config),n.fragmentTracker=r,n.config=e.config,n.decrypter=new At.a(e,e.config),e.on(i.a.KEY_LOADED,n.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Ct(e,r);var u,c,d=a.prototype;return d.doTick=function(){this.onTickEnd()},d.onTickEnd=function(){},d.startLoad=function(t){},d.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=It},d._streamEnded=function(t,e){var r=this.fragCurrent,a=this.fragmentTracker;if(!e.live&&r&&r.sn>=e.endSN&&!t.nextStart){var n=e.partList;if(null!=n&&n.length){var i=n[n.length-1];return lt.isBuffered(this.media,i.start+i.duration/2)}var o=a.getState(r);return o===tt.PARTIAL||o===tt.OK}return!1},d.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.state===It&&this.startLoad(a.startPosition)},d.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,a=this.mediaBuffer,i=this.state,o=r?r.currentTime:0,s=lt.bufferInfo(a||r,o,t.maxBufferHole);if(this.log("media seeking to "+(Object(n.a)(o)?o.toFixed(3):o)+", state: "+i),i===Gt)this.resetLoadingState();else if(e&&!s.len){var l=t.maxFragLookUpTolerance,u=e.start-l,c=o>e.start+e.duration+l;(o<u||c)&&(c&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}r&&(this.lastCurrentTime=o),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()},d.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},d.onKeyLoaded=function(t,e){if(this.state===Pt&&e.frag===this.fragCurrent&&this.levels){this.state=Dt;var r=this.levels[e.frag.level].details;r&&this.loadFragment(e.frag,r,e.frag.start)}},d.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},d.onHandlerDestroyed=function(){this.state=It,this.hls.off(i.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},d.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Pt,this.fragCurrent=t,this.hls.trigger(i.a.KEY_LOADING,{frag:t})},d.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},d._loadFragForPlayback=function(t,e,r){var a=this;this._doFragLoad(t,e,r,(function(e){if(a.fragContextChanged(t))return a.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void a.fragmentTracker.removeFragment(t);t.stats.chunkCount++,a._handleFragmentLoadProgress(e)})).then((function(e){if(e){a.fragLoadError=0;var r=a.state;if(!a.fragContextChanged(t))return"payload"in e&&(a.log("Loaded fragment "+t.sn+" of level "+t.level),a.hls.trigger(i.a.FRAG_LOADED,e),a.state===jt)?(a.fragmentTracker.backtrack(t,e),void a.resetFragmentLoading(t)):void a._handleFragmentLoadComplete(e);(r===Mt||r===jt||!a.fragCurrent&&r===Nt)&&(a.fragmentTracker.removeFragment(t),a.state=Dt)}})).catch((function(e){a.warn(e),a.resetFragmentLoading(t)}))},d.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var a={startOffset:t,endOffset:e,type:r};this.fragLoadError=0,this.hls.trigger(i.a.BUFFER_FLUSHING,a)}},d._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(r){if(!r||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return r})).then((function(r){var a=e.hls,n=r.payload,o=t.decryptdata;if(n&&n.byteLength>0&&o&&o.key&&o.iv&&"AES-128"===o.method){var s=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(n),o.key.buffer,o.iv.buffer).then((function(e){var n=self.performance.now();return a.trigger(i.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:s,tdecrypt:n}}),r.payload=e,r}))}return r})).then((function(r){var a=e.fragCurrent,n=e.hls,o=e.levels;if(!o)throw new Error("init load aborted, missing levels");o[t.level].details;var s=t.stats;e.state=Dt,e.fragLoadError=0,t.data=new Uint8Array(r.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),r.frag===a&&n.trigger(i.a.FRAG_BUFFERED,{stats:s,frag:a,part:null,id:t.type}),e.tick()})).catch((function(r){e.warn(r),e.resetFragmentLoading(t)}))},d.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},d.fragBufferedComplete=function(t,e){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+Rt(lt.getBuffered(r))),this.state=Dt,this.tick()},d._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,a=t.part,n=t.partsLoaded,i=!n||0===n.length||n.some((function(t){return!t})),o=new ut(r.level,r.sn,r.stats.chunkCount+1,0,a?a.index:-1,!i);e.flush(o)}},d._handleFragmentLoadProgress=function(t){},d._doFragLoad=function(t,e,r,a){var o=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(t.start,r||0),this.config.lowLatencyMode&&e){var s=e.partList;if(s&&a){r>t.end&&e.fragmentHint&&(t=e.fragmentHint);var l=this.getNextPart(s,t,r);if(l>-1){var u=s[l];return this.log("Loading part sn: "+t.sn+" p: "+u.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+l+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=Mt,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,part:s[l],targetBufferTime:r}),this.doFragPartsLoad(t,s,l,a).catch((function(t){return o.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(s,r))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),Object(n.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Mt,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragmentLoader.load(t,a).catch((function(t){return o.handleFragLoadError(t)}))},d.doFragPartsLoad=function(t,e,r,a){var n=this;return new Promise((function(o,s){var l=[];!function r(u){var c=e[u];n.fragmentLoader.loadPart(t,c,a).then((function(a){l[c.index]=a;var s=a.part;n.hls.trigger(i.a.FRAG_LOADED,a);var d=e[u+1];if(!d||d.fragment!==t)return o({frag:t,part:s,partsLoaded:l});r(u+1)})).catch(s)}(r)}))},d.handleFragLoadError=function(t){var e=t.data;return e&&e.details===o.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(i.a.ERROR,e),null},d._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Nt){var r=e.frag,a=e.part,n=e.level,i=self.performance.now();r.stats.parsing.end=i,a&&(a.stats.parsing.end=i),this.updateLevelTiming(r,a,n,t.partial)}else this.fragCurrent||(this.state=Dt)},d.getCurrentContext=function(t){var e=this.levels,r=t.level,a=t.sn,n=t.part;if(!e||!e[r])return this.warn("Levels object was unset while buffering fragment "+a+" of level "+r+". The current chunk will not be buffered."),null;var i=e[r],o=n>-1?function(t,e,r){if(!t||!t.details)return null;var a=t.details.partList;if(a)for(var n=a.length;n--;){var i=a[n];if(i.index===r&&i.fragment.sn===e)return i}return null}(i,a,n):null,s=o?o.fragment:function(t,e,r){if(!t||!t.details)return null;var a=t.details,n=a.fragments[e-a.startSN];return n||((n=a.fragmentHint)&&n.sn===e?n:e<a.startSN&&r&&r.sn===e?r:null)}(i,a,this.fragCurrent);return s?{frag:s,part:o,level:i}:null},d.bufferFragmentData=function(t,e,r,a){if(t&&this.state===Nt){var n=t.data1,o=t.data2,s=n;if(n&&o&&(s=Object(l.a)(n,o)),s&&s.length){var u={type:t.type,frag:e,part:r,chunkMeta:a,parent:e.type,data:s};this.hls.trigger(i.a.BUFFER_APPENDING,u),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},d.flushBufferGap=function(t){var e=this.media;if(e)if(lt.isBuffered(e,e.currentTime)){var r=e.currentTime,a=lt.bufferInfo(e,r,0),n=t.duration,i=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),o=Math.max(Math.min(t.start-i,a.end-i),r+i);t.start-o>i&&this.flushMainBuffer(o,t.start)}else this.flushMainBuffer(0,t.start)},d.getFwdBufferInfo=function(t,e){var r=this.config,a=this.getLoadPosition();if(!Object(n.a)(a))return null;var i=lt.bufferInfo(t,a,r.maxBufferHole);if(0===i.len&&void 0!==i.nextStart){var o=this.fragmentTracker.getBufferedFrag(a,e);if(o&&i.nextStart<o.end)return lt.bufferInfo(t,a,Math.max(i.nextStart,r.maxBufferHole))}return i},d.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},d.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},d.getNextFragment=function(t,e){var r,a,n=e.fragments,i=n.length;if(!i)return null;var o,s=this.config,l=n[0].start;if(e.live){var u=s.initialLiveManifestSize;if(i<u)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+u+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(e,n),this.startPosition=o?this.hls.liveSyncPosition||o.start:t)}else t<=l&&(o=n[0]);if(!o){var c=s.lowLatencyMode?e.partEnd:e.fragmentEnd;o=this.getFragmentAtPosition(t,c,e)}return null===(r=o)||void 0===r||!r.initSegment||null!==(a=o)&&void 0!==a&&a.initSegment.data||this.bitrateTest||(o=o.initSegment),o},d.getNextPart=function(t,e,r){for(var a=-1,n=!1,i=!0,o=0,s=t.length;o<s;o++){var l=t[o];if(i=i&&!l.independent,a>-1&&r<l.start)break;var u=l.loaded;!u&&(n||l.independent||i)&&l.fragment===e&&(a=o),n=u}return a},d.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},d.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,a=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(n.a)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var a=0;a<t.length;++a){var i=t[a];if(gt(e,r,i))return i}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var i=r.sn+1;if(i>=t.startSN&&i<=t.endSN){var o=e[i-t.startSN];r.cc===o.cc&&(a=o,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(a=function(t,e){return mt(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn)}}else{var s=this.hls.liveSyncPosition;null!==s&&(a=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return a},d.getFragmentAtPosition=function(t,e,r){var a,n=this.config,i=this.fragPrevious,o=r.fragments,s=r.endSN,l=r.fragmentHint,u=n.maxFragLookUpTolerance,c=!!(n.lowLatencyMode&&r.partList&&l);if(c&&l&&!this.bitrateTest&&(o=o.concat(l),s=l.sn),a=t<e?yt(i,o,t,t>e-u?0:u):o[o.length-1]){var d=a.sn-r.startSN,f=i&&a.level===i.level,h=o[d+1];if(this.fragmentTracker.getState(a)===tt.BACKTRACKED){a=null;for(var p=d;o[p]&&this.fragmentTracker.getState(o[p])===tt.BACKTRACKED;)a=i?o[p--]:o[--p];a||(a=h)}else i&&a.sn===i.sn&&!c&&f&&(a.sn<s&&this.fragmentTracker.getState(h)!==tt.OK?(this.log("SN "+a.sn+" just loaded, load next one: "+h.sn),a=h):a=null)}return a},d.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var a=this.hls.liveSyncPosition,n=r.currentTime,i=t.fragments[0].start,o=t.edge,s=n>=i-e.maxFragLookUpTolerance&&n<=o;if(null!==a&&r.duration>a&&(n<a||!s)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!s&&r.readyState<4||n<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=a),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+a.toFixed(3)),r.currentTime=a))}}},d.alignPlaylists=function(t,e){var r=this.levels,a=this.levelLastLoaded,i=this.fragPrevious,o=null!==a?r[a]:null,s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var l=t.fragments[0].start,u=!e,c=t.alignedSliding&&Object(n.a)(l);if(u||!c&&!l){ft(i,o,t);var d=t.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+s),d}return l},d.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},d.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var a=t.startTimeOffset;Object(n.a)(a)?(r=e+a,a<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+a+" found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},d.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},d.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},d.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=Dt)},d.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var r=e.frag;if(r&&r.type===t){this.fragCurrent;var a=this.config;if(this.fragLoadError+1<=a.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var n=Math.min(Math.pow(2,this.fragLoadError)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+t+" "+r.level+" failed to load, retrying in "+n+"ms"),this.retryDate=self.performance.now()+n,this.fragLoadError++,this.state=Ft}else e.levelRetry?(t===L.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Dt):(s.b.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=zt)}}},d.afterBufferFlushed=function(t,e,r){if(t){var a=lt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,a,r),this.state===Gt&&this.resetLoadingState()}},d.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Dt},d.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},d.updateLevelTiming=function(t,e,r,a){var n=this,o=r.details;Object.keys(t.elementaryStreams).reduce((function(e,s){var l=t.elementaryStreams[s];if(l){var u=l.endPTS-l.startPTS;if(u<=0)return n.warn("Could not parse fragment "+t.sn+" "+s+" duration reliably ("+u+") resetting transmuxer to fallback to playlist timing"),n.resetTransmuxer(),e||!1;var c=a?0:K(o,t,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return n.hls.trigger(i.a.LEVEL_PTS_UPDATED,{details:o,level:r,drift:c,type:s,frag:t,start:l.startPTS,end:l.endPTS}),!0}return e}),!1)?(this.state=Ut,this.hls.trigger(i.a.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},d.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},u=a,(c=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&Ot(u.prototype,c),a}(ot);function Kt(){return self.MediaSource||self.WebKitMediaSource}function Vt(){return self.SourceBuffer||self.WebKitSourceBuffer}var Wt=r(18),Xt=r(10),Qt=r(14),$t=Kt()||{isTypeSupported:function(){return!1}},Jt=function(){function t(t,e,r,a){var n=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=r,this.onFlush=a;var l=t.config,u=function(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)};this.observer=new Qt.EventEmitter,this.observer.on(i.a.FRAG_DECRYPTED,u),this.observer.on(i.a.ERROR,u);var c={mp4:$t.isTypeSupported("video/mp4"),mpeg:$t.isTypeSupported("audio/mpeg"),mp3:$t.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){var f;s.b.log("demuxing in webworker");try{f=this.worker=Wt(19),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(e){t.trigger(i.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},f.postMessage({cmd:"init",typeSupported:c,vendor:d,id:e,config:JSON.stringify(l)})}catch(t){s.b.warn("Error in worker:",t),s.b.error("Error while initializing DemuxerWorker, fallback to inline"),f&&self.URL.revokeObjectURL(f.objectURL),this.transmuxer=new Xt.c(this.observer,c,l,d,e),this.worker=null}}else this.transmuxer=new Xt.c(this.observer,c,l,d,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},e.push=function(t,e,r,a,n,i,o,l,u,c){var d,f,h=this;u.transmuxing.start=self.performance.now();var p=this.transmuxer,m=this.worker,y=i?i.start:n.start,v=n.decryptdata,g=this.frag,b=!(g&&n.cc===g.cc),w=!(g&&u.level===g.level),S=g?u.sn-g.sn:-1,k=this.part?u.part-this.part.index:1,T=!w&&(1===S||0===S&&1===k),E=self.performance.now();(w||S||0===n.stats.parsing.start)&&(n.stats.parsing.start=E),!i||!k&&T||(i.stats.parsing.start=E);var x=!(g&&(null===(d=n.initSegment)||void 0===d?void 0:d.url)===(null===(f=g.initSegment)||void 0===f?void 0:f.url)),_=new Xt.b(b,T,l,w,y,x);if(!T||b||x){s.b.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+w+"\n        contiguous: "+T+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+y+"\n        initSegmentChange: "+x);var L=new Xt.a(r,a,e,o,c);this.configureTransmuxer(L)}if(this.frag=n,this.part=i,m)m.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:u,state:_},t instanceof ArrayBuffer?[t]:[]);else if(p){var A=p.push(t,v,u,_);Object(Xt.d)(A)?A.then((function(t){h.handleTransmuxComplete(t)})):this.handleTransmuxComplete(A)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:t});else if(r){var n=r.flush(t);Object(Xt.d)(n)?n.then((function(r){e.handleFlushResult(r,t)})):this.handleFlushResult(n,t)}},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,r=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):r&&r.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}(),Zt=function(){function t(t,e,r,a){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=a}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,r=this.media,a=this.stalled,n=r.currentTime,i=r.seeking,o=this.seeking&&!i,l=!this.seeking&&i;if(this.seeking=i,n===t){if((l||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&lt.getBuffered(r).length){var u=lt.bufferInfo(r,n,0),c=u.len>0,d=u.nextStart||0;if(c||d){if(i){var f=u.len>2,h=!d||d-n>2&&!this.fragmentTracker.getPartialFragment(n);if(f||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,m=Math.max(d,u.start||0)-n,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==y||null===(p=y.details)||void 0===p?void 0:p.live)?2*y.details.targetduration:2;if(m>0&&m<=v)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==a){var b=g-a;!i&&b>=250&&this._reportStall(u.len);var w=lt.bufferInfo(r,n,e.maxBufferHole);this._tryFixBufferStall(w,b)}else this.stalled=g}}}else if(this.moved=!0,null!==a){if(this.stallReported){var S=self.performance.now()-a;s.b.warn("playback not stuck anymore @"+n+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var r=this.config,a=this.fragmentTracker,n=this.media.currentTime,i=a.getPartialFragment(n);i&&this._trySkipBufferHole(i)||t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(s.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,s.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,a=this.media,n=a.currentTime,l=0,u=lt.getBuffered(a),c=0;c<u.length;c++){var d=u.start(c);if(n+e.maxBufferHole>=l&&n<d){var f=Math.max(d+.05,a.currentTime+.1);return s.b.warn("skipping hole, adjusting currentTime from "+n+" to "+f),this.moved=!0,this.stalled=null,a.currentTime=f,t&&r.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+f,frag:t}),f}l=u.end(c)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,a=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var l=a+n*t.nudgeOffset;s.b.warn("Nudging 'currentTime' from "+a+" to "+l),r.currentTime=l,e.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.b.error("Playhead still not moving while enough data buffered @"+a+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})},t}();function te(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[stream-controller]")||this).audioCodecSwap=!1,a.gapController=null,a.level=-1,a._forceStartLoad=!1,a.altAudio=!1,a.audioOnly=!1,a.fragPlaying=null,a.onvplaying=null,a.onvseeked=null,a.fragLastKbps=0,a.stalled=!1,a.couldBacktrack=!1,a.audioCodecSwitch=!1,a.videoBuffer=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ee(e,r);var l,c,d=a.prototype;return d._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},d.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=r.startLevel;-1===a&&(r.config.testBandwidth?(a=0,this.bitrateTest=!0):a=r.nextAutoLevel),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Dt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=It},d.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Dt:this.doTickIdle();break;case qt:var t,e=this.levels,r=this.level,a=null==e||null===(t=e[r])||void 0===t?void 0:t.details;if(a&&(!a.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(a))break;this.state=Dt;break}break;case Ft:var n,i=self.performance.now(),o=this.retryDate;(!o||i>=o||null!==(n=this.media)&&void 0!==n&&n.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Dt)}this.onTickEnd()},d.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},d.doTickIdle=function(){var t,e,r=this.hls,a=this.levelLastLoaded,n=this.levels,o=this.media,s=r.config,l=r.nextLoadLevel;if(null!==a&&(o||!this.startFragRequested&&s.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&n&&n[l]){var c=n[l];this.level=r.nextLoadLevel=l;var d=c.details;if(!d||this.state===qt||d.live&&this.levelLastLoaded!==l)this.state=qt;else{var f=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:o,L.b.MAIN);if(null!==f&&!(f.len>=this.getMaxBufferLength(c.maxBitrate))){if(this._streamEnded(f,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(i.a.BUFFER_EOS,h),void(this.state=Gt)}var p=f.end,m=this.getNextFragment(p,d);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn){var y=m.sn-d.startSN;y>1&&(m=d.fragments[y-1],this.fragmentTracker.removeFragment(m))}if(m&&this.fragmentTracker.getState(m)===tt.OK&&this.nextLoadPosition>p){var v=this.audioOnly&&!this.altAudio?u.a.AUDIO:u.a.VIDEO;this.afterBufferFlushed(o,v,L.b.MAIN),m=this.getNextFragment(this.nextLoadPosition,d)}m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),"identity"!==(null===(t=m.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=m.decryptdata)&&void 0!==e&&e.key?this.loadFragment(m,d,p):this.loadKey(m,d))}}}},d.loadFragment=function(e,r,a){var n,i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,i===tt.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(e);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);i=tt.NOT_LOADED}i===tt.NOT_LOADED||i===tt.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)):i===tt.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(n=this.media)||void 0===n?void 0:n.buffered.length)&&this.fragmentTracker.removeAllFragments()},d.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,L.b.MAIN);return e&&"fragment"in e?e.fragment:e},d.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,L.b.MAIN)},d.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},d.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,a=this.getAppendedFrag(e.currentTime);if(a&&a.start>1&&this.flushMainBuffer(0,a.start-1),!e.paused&&t){var n=t[this.hls.nextLoadLevel],i=this.fragLastKbps;r=i&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*i)+1:0}else r=0;var o=this.getBufferedFrag(e.currentTime+r);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,u=s.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},d.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===Pt&&(this.state=Dt),this.nextLoadPosition=this.getLoadPosition()},d.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},d.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var a=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),a.addEventListener("playing",this.onvplaying),a.addEventListener("seeked",this.onvseeked),this.gapController=new Zt(this.config,a,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},d.onMediaPlaying=function(){this.tick()},d.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(n.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},d.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(i.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},d.onManifestParsed=function(t,e){var r,a,n,i=!1,o=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(i=!0),-1!==r.indexOf("mp4a.40.5")&&(o=!0))})),this.audioCodecSwitch=i&&o&&!("function"==typeof(null==(n=Vt())||null===(a=n.prototype)||void 0===a?void 0:a.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},d.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===Dt){var a=r[e.level];(!a.details||a.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(a.details))&&(this.state=qt)}},d.onLevelLoaded=function(t,e){var r,a=this.levels,n=e.level,o=e.details,s=o.totalduration;if(a){this.log("Level "+n+" loaded ["+o.startSN+","+o.endSN+"], cc ["+o.startCC+", "+o.endCC+"] duration:"+s);var l=this.fragCurrent;!l||this.state!==Mt&&this.state!==Ft||l.level!==e.level&&l.loader&&(this.state=Dt,l.loader.abort());var u=a[n],c=0;if(o.live||null!==(r=u.details)&&void 0!==r&&r.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,u.details)}if(u.details=o,this.levelLastLoaded=n,this.hls.trigger(i.a.LEVEL_UPDATED,{details:o,level:n}),this.state===qt){if(this.waitForCdnTuneIn(o))return;this.state=Dt}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}else this.warn("Levels were reset while loading level "+n)},d._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.levels;if(i){var o=i[r.level],s=o.details;if(s){var l=o.videoCodec,u=s.PTSKnown||!s.live,c=null===(e=r.initSegment)||void 0===e?void 0:e.data,d=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new Jt(this.hls,L.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=a?a.index:-1,p=-1!==h,m=new ut(r.level,r.sn,r.stats.chunkCount,n.byteLength,h,p),y=this.initPTS[r.cc];f.push(n,c,d,l,r,a,s.totalduration,u,m,y)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},d.onAudioTrackSwitching=function(t,e){var r=this.altAudio,a=!!e.url,n=e.id;if(!a){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var o=this.fragCurrent;null!=o&&o.loader&&(this.log("Switching to main audio track, cancel main fragment load"),o.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;r&&s.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:n})}},d.onAudioTrackSwitched=function(t,e){var r=e.id,a=!!this.hls.audioTracks[r].url;if(a){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=a,this.tick()},d.onBufferCreated=function(t,e){var r,a,n=e.tracks,i=!1;for(var o in n){var s=n[o];if("main"===s.id){if(a=o,r=s,"video"===o){var l=n[o];l&&(this.videoBuffer=l.buffer)}}else i=!0}i&&r?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},d.onFragBuffered=function(t,e){var r=e.frag,a=e.part;if(!r||r.type===L.b.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Ut&&(this.state=Dt));var n=a?a.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,a)}},d.onError=function(t,e){switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(L.b.MAIN,e);break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==zt&&(e.fatal?(this.warn(""+e.details),this.state=zt):e.levelRetry||this.state!==qt||(this.state=Dt));break;case o.a.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===Nt||this.state===Ut)){var r=!0,a=this.getFwdBufferInfo(this.media,L.b.MAIN);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},d.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var r=lt.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},d.onFragLoadEmergencyAborted=function(){this.state=Dt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},d.onBufferFlushed=function(t,e){var r=e.type;if(r!==u.a.AUDIO||this.audioOnly&&!this.altAudio){var a=(r===u.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,r,L.b.MAIN)}},d.onLevelsUpdated=function(t,e){this.levels=e.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d.seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void s.b.log("could not seek to "+r+", already seeking at "+e);var a=lt.getBuffered(t),n=(a.length?a.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(s.b.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}},d._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},d._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(r){var a=e.hls;if(r&&!a.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=Dt,e.startFragRequested=!1,e.bitrateTest=!1;var n=t.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),a.trigger(i.a.FRAG_LOADED,r)}}))},d._handleTransmuxComplete=function(t){var e,r="main",a=this.hls,o=t.remuxResult,s=t.chunkMeta,l=this.getCurrentContext(s);if(!l)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var c=l.frag,d=l.part,f=l.level,h=o.video,p=o.text,m=o.id3,y=o.initSegment,v=this.altAudio?void 0:o.audio;if(!this.fragContextChanged(c)){if(this.state=Nt,y){y.tracks&&(this._bufferInitSegment(f,y.tracks,c,s),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:c,id:r,tracks:y.tracks}));var g=y.initPTS,b=y.timescale;Object(n.a)(g)&&(this.initPTS[c.cc]=g,a.trigger(i.a.INIT_PTS_FOUND,{frag:c,id:r,initPTS:g,timescale:b}))}if(h&&!1!==o.independent){if(f.details){var w=h.startPTS,S=h.endPTS,k=h.startDTS,T=h.endDTS;if(d)d.elementaryStreams[h.type]={startPTS:w,endPTS:S,startDTS:k,endDTS:T};else if(h.firstKeyFrame&&h.independent&&(this.couldBacktrack=!0),h.dropped&&h.independent){if(this.getLoadPosition()+this.config.maxBufferHole<w)return void this.backtrack(c);c.setElementaryStreamInfo(h.type,c.start,S,c.start,T,!0)}c.setElementaryStreamInfo(h.type,w,S,k,T),this.bufferFragmentData(h,c,d,s)}}else if(!1===o.independent)return void this.backtrack(c);if(v){var E=v.startPTS,x=v.endPTS,_=v.startDTS,L=v.endDTS;d&&(d.elementaryStreams[u.a.AUDIO]={startPTS:E,endPTS:x,startDTS:_,endDTS:L}),c.setElementaryStreamInfo(u.a.AUDIO,E,x,_,L),this.bufferFragmentData(v,c,d,s)}if(null!=m&&null!==(e=m.samples)&&void 0!==e&&e.length){var A={frag:c,id:r,samples:m.samples};a.trigger(i.a.FRAG_PARSING_METADATA,A)}if(p){var R={frag:c,id:r,samples:p.samples};a.trigger(i.a.FRAG_PARSING_USERDATA,R)}}},d._bufferInitSegment=function(t,e,r,a){var n=this;if(this.state===Nt){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var o=e.audio,s=e.video,l=e.audiovideo;if(o){var u=t.audioCodec,c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==o.metadata.channelCount&&-1===c.indexOf("firefox")&&(u="mp4a.40.5")),-1!==c.indexOf("android")&&"audio/mpeg"!==o.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),t.audioCodec&&t.audioCodec!==u&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+u+'"'),o.levelCodec=u,o.id="main",this.log("Init audio buffer, container:"+o.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(t.audioCodec||"")+"/"+o.codec+"]")}s&&(s.levelCodec=t.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+s.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var o=e[t].initSegment;null!=o&&o.byteLength&&n.hls.trigger(i.a.BUFFER_APPENDING,{type:t,data:o,frag:r,part:null,chunkMeta:a,parent:r.type})})),this.tick()}},d.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=jt},d.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(lt.isBuffered(t,r)?e=this.getAppendedFrag(r):lt.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){var a=this.fragPlaying,n=e.level;a&&e.sn===a.sn&&a.level===n&&e.urlId===a.urlId||(this.hls.trigger(i.a.FRAG_CHANGED,{frag:e}),a&&a.level===n||this.hls.trigger(i.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=e)}}},l=a,(c=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&te(l.prototype,c),a}(Yt),ae=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),ne=function(){function t(t,e,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ae(t),this.fast_=new ae(e)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,a=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new ae(t,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new ae(e,a.getEstimate(),a.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*e/r;this.fast_.sample(r,a),this.slow_.sample(r,a)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function ie(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var oe=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new ne(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,r,a=t.prototype;return a.registerListeners=function(){var t=this.hls;t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){var t=this.hls;t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this)},a.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},a.onFragLoading=function(t,e){var r,a=e.frag;a.type===L.b.MAIN&&(this.timer||(this.fragCurrent=a,this.partCurrent=null!=(r=e.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},a.onLevelLoaded=function(t,e){var r=this.hls.config;e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},a._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.autoLevelEnabled,o=r.config,l=r.media;if(t&&l){var u=e?e.stats:t.stats,c=e?e.duration:t.duration;if(u.aborted)return s.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(a&&!l.paused&&l.playbackRate&&l.readyState){var d=performance.now()-u.loading.start,f=Math.abs(l.playbackRate);if(!(d<=500*c/f)){var h=r.levels,p=r.minAutoLevel,m=h[t.level],y=u.total||Math.max(u.loaded,Math.round(c*m.maxBitrate/8)),v=Math.max(1,u.bwEstimate?u.bwEstimate/8:1e3*u.loaded/d),g=(y-u.loaded)/v,b=l.currentTime,w=(lt.bufferInfo(l,b,o.maxBufferHole).end-b)/f;if(!(w>=2*c/f||g<=w)){var S,k=Number.POSITIVE_INFINITY;for(S=t.level-1;S>p&&!((k=c*h[S].maxBitrate/(6.4*v))<w);S--);if(!(k>=g)){var T=this.bwEstimator.getEstimate();s.b.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+S+"\n      Current BW estimate: "+(Object(n.a)(T)?(T/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+g.toFixed(3)+" s\n      Estimated load time for the next fragment: "+k.toFixed(3)+" s\n      Time to underbuffer: "+w.toFixed(3)+" s"),r.nextLoadLevel=S,this.bwEstimator.sample(d,u.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),r.trigger(i.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:u})}}}}}},a.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if(r.type===L.b.MAIN&&Object(n.a)(r.sn)){var o=a?a.stats:r.stats,s=a?a.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],u=(l.loaded?l.loaded.bytes:0)+o.loaded,c=(l.loaded?l.loaded.duration:0)+s;l.loaded={bytes:u,duration:c},l.realBitrate=Math.round(8*u/c)}if(r.bitrateTest){var d={stats:o,frag:r,part:a,id:r.type};this.onFragBuffered(i.a.FRAG_BUFFERED,d),r.bitrateTest=!1}}},a.onFragBuffered=function(t,e){var r=e.frag,a=e.part,n=a?a.stats:r.stats;if(!n.aborted&&r.type===L.b.MAIN&&"initSegment"!==r.sn){var i=n.parsing.end-n.loading.start;this.bwEstimator.sample(i,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},a.onError=function(t,e){switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},a.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},a.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.maxAutoLevel,n=r.config,i=r.minAutoLevel,o=r.media,l=e?e.duration:t?t.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(lt.bufferInfo(o,u,n.maxBufferHole).end-u)/c,h=this.findBestLevel(d,i,a,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(h>=0)return h;s.b.trace((f?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var p=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(!f){var v=this.bitrateTestDelay;v&&(p=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-v,s.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=y=1)}return h=this.findBestLevel(d,i,a,f+p,m,y),Math.max(h,0)},a.findBestLevel=function(t,e,r,a,n,i){for(var o,l=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,f=d[c],h=!(null==f||null===(o=f.details)||void 0===o||!o.live),p=null==f?void 0:f.codecSet,m=u?u.duration:l?l.duration:0,y=r;y>=e;y--){var v=d[y];if(v&&(!p||v.codecSet===p)){var g,b=v.details,w=(u?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m;g=y<=c?n*t:i*t;var S=d[y].maxBitrate,k=S*w/g;if(s.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+y+"/"+Math.round(g)+"/"+S+"/"+w+"/"+a+"/"+k),g>S&&(!k||h&&!this.bitrateTestDelay||k<a))return y}}return-1},e=t,(r=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this.getNextABRAutoLevel();return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}])&&ie(e.prototype,r),t}(),se=r(13);function le(){return(le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ce=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[audio-stream-controller]")||this).videoBuffer=null,a.videoTrackCC=-1,a.waitingVideoCC=-1,a.audioSwitch=!1,a.trackId=-1,a.waitingData=null,a.mainDetails=null,a.bufferFlushed=!1,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ue(e,r);var l=a.prototype;return l.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},l._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l.onInitPtsFound=function(t,e){var r=e.frag,a=e.id,n=e.initPTS;if("main"===a){var i=r.cc;this.initPTS[r.cc]=n,this.log("InitPTS for cc: "+i+" found from main: "+n),this.videoTrackCC=i,this.state===Ht&&this.tick()}},l.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=It);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Dt):(this.loadedmetadata=!1,this.state=Bt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},l.doTick=function(){switch(this.state){case Dt:this.doTickIdle();break;case Bt:var e,r=this.levels,a=this.trackId,n=null==r||null===(e=r[a])||void 0===e?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=Ht}break;case Ft:var i,o=performance.now(),l=this.retryDate;(!l||o>=l||null!==(i=this.media)&&void 0!==i&&i.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=Dt);break;case Ht:var u=this.waitingData;if(u){var c=u.frag,d=u.part,f=u.cache,h=u.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Mt;var p={frag:c,part:d,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(p),h&&t.prototype._handleFragmentLoadComplete.call(this,p)}else if(this.videoTrackCC!==this.waitingVideoCC)s.b.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),y=lt.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);vt(y.end,this.config.maxFragLookUpTolerance,c)<0&&(s.b.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=Dt}this.onTickEnd()},l.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Dt)},l.onTickEnd=function(){var t=this.media;if(t&&t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime}},l.doTickIdle=function(){var t,e,r=this.hls,a=this.levels,n=this.media,o=this.trackId,s=r.config;if(a&&a[o]&&(n||!this.startFragRequested&&s.startFragPrefetch)){var l=a[o].details;if(!l||l.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(l))this.state=Bt;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,u.a.AUDIO,L.b.AUDIO));var c=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,L.b.AUDIO);if(null!==c){var d=c.len,f=this.getMaxBufferLength(),h=this.audioSwitch;if(!(d>=f)||h){if(!h&&this._streamEnded(c,l))return r.trigger(i.a.BUFFER_EOS,{type:"audio"}),void(this.state=Gt);var p=l.fragments[0].start,m=c.end;if(h){var y=this.getLoadPosition();m=y,l.PTSKnown&&y<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}var v=this.getNextFragment(m,l);v?"identity"!==(null===(t=v.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=v.decryptdata)&&void 0!==e&&e.key?this.loadFragment(v,l,m):this.loadKey(v,l):this.bufferFlushed=!0}}}}},l.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),r=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,L.b.MAIN);return null===r?e:Math.max(e,r.len)},l.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},l.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new z(t)}))},l.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var a=this.fragCurrent;null!=a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=Dt):this.state=It,this.tick()},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},l.onLevelLoaded=function(t,e){this.mainDetails=e.details},l.onAudioTrackLoaded=function(t,e){var r,a=this.levels,n=e.details,i=e.id;if(a){this.log("Track "+i+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var o=a[i],s=0;if(n.live||null!==(r=o.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!l)return;!o.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(pt(n,l),s=n.fragments[0].start):s=this.alignPlaylists(n,o.details)}o.details=n,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(o.details,s),this.state!==Bt||this.waitForCdnTuneIn(n)||(this.state=Dt),this.tick()}else this.warn("Audio tracks were reset while loading level "+i)},l._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.config,o=this.trackId,l=this.levels;if(l){var u=l[o],c=u.details,d=i.defaultAudioCodec||u.audioCodec||"mp4a.40.2",f=this.transmuxer;f||(f=this.transmuxer=new Jt(this.hls,L.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var h=this.initPTS[r.cc],p=null===(e=r.initSegment)||void 0===e?void 0:e.data;if(void 0!==h){var m=a?a.index:-1,y=-1!==m,v=new ut(r.level,r.sn,r.stats.chunkCount,n.byteLength,m,y);f.push(n,p,d,"",r,a,c.totalduration,!1,v,h)}else s.b.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+c.startSN+" ,"+c.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:r,part:a,cache:new se.a,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=Ht}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},l._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},l.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},l.onFragBuffered=function(t,e){var r=e.frag,a=e.part;r.type===L.b.AUDIO&&(this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,a)))},l.onError=function(e,r){switch(r.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(L.b.AUDIO,r);break;case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==zt&&this.state!==It&&(this.state=r.fatal?zt:Dt,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case o.a.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===Nt||this.state===Ut)){var a=!0,n=this.getFwdBufferInfo(this.mediaBuffer,L.b.AUDIO);n&&n.len>.5&&(a=!this.reduceMaxBufferLength(n.len)),a&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},l.onBufferFlushed=function(t,e){e.type===u.a.AUDIO&&(this.bufferFlushed=!0)},l._handleTransmuxComplete=function(t){var e,r="audio",a=this.hls,n=t.remuxResult,o=t.chunkMeta,s=this.getCurrentContext(o);if(!s)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var l=s.frag,c=s.part,d=n.audio,f=n.text,h=n.id3,p=n.initSegment;if(!this.fragContextChanged(l)){if(this.state=Nt,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=p&&p.tracks&&(this._bufferInitSegment(p.tracks,l,o),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:p.tracks})),d){var m=d.startPTS,y=d.endPTS,v=d.startDTS,g=d.endDTS;c&&(c.elementaryStreams[u.a.AUDIO]={startPTS:m,endPTS:y,startDTS:v,endDTS:g}),l.setElementaryStreamInfo(u.a.AUDIO,m,y,v,g),this.bufferFragmentData(d,l,c,o)}if(null!=h&&null!==(e=h.samples)&&void 0!==e&&e.length){var b=le({frag:l,id:r},h);a.trigger(i.a.FRAG_PARSING_METADATA,b)}if(f){var w=le({frag:l,id:r},f);a.trigger(i.a.FRAG_PARSING_USERDATA,w)}}},l._bufferInitSegment=function(t,e,r){if(this.state===Nt){t.video&&delete t.video;var a=t.audio;if(a){a.levelCodec=a.codec,a.id="audio",this.log("Init audio buffer, container:"+a.container+", codecs[parsed]=["+a.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,t);var n=a.initSegment;if(null!=n&&n.byteLength){var o={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:n};this.hls.trigger(i.a.BUFFER_APPENDING,o)}this.tick()}}},l.loadFragment=function(e,r,a){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||i===tt.NOT_LOADED||i===tt.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):r.live&&!Object(n.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Ht):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)))},l.completeAudioSwitch=function(){var e=this.hls,r=this.media,a=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:a})},a}(Yt);function de(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,fe(e,r);var n,s,l=a.prototype;return l.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},l.onAudioTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.tracksInGroup[r];if(n){var i=n.details;n.details=e.details,this.log("audioTrack "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,i))}else this.warn("Invalid audio track id "+r)},l.onLevelLoading=function(t,e){this.switchLevel(e.level)},l.onLevelSwitching=function(t,e){this.switchLevel(e.level)},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r;var a=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!a.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=a;var n={audioTracks:a};this.log("Updating audio tracks, "+a.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()}}},l.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.a.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},l.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=e[this.trackId];this.log("Now switching to audio-track index "+t);var a=e[t],n=a.id,o=a.groupId,s=void 0===o?"":o,l=a.name,u=a.type,c=a.url;if(this.trackId=t,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHING,{id:n,groupId:s,name:l,type:u,url:c}),!a.details||a.details.live){var d=this.switchParams(a.url,null==r?void 0:r.details);this.loadPlaylist(d)}}},l.selectInitialTrack=function(){this.tracksInGroup;var t=this.trackName,e=this.findTrackId(t)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(i.a.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},n=a,(s=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&de(n.prototype,s),a}(Q);function pe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[subtitle-stream-controller]")||this).levels=[],a.currentTrackId=-1,a.tracksBuffered=[],a.mainDetails=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,me(e,r);var n,o,s=a.prototype;return s.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},s._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},s._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},s.startLoad=function(){this.stopLoad(),this.state=Dt,this.setInterval(500),this.tick()},s.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},s.onLevelLoaded=function(t,e){this.mainDetails=e.details},s.onSubtitleFragProcessed=function(t,e){var r=e.frag,a=e.success;if(this.fragPrevious=r,this.state=Dt,a){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,o=r.start,s=0;s<n.length;s++)if(o>=n[s].start&&o<=n[s].end){i=n[s];break}var l=r.start+r.duration;i?i.end=l:(i={start:o,end:l},n.push(i)),this.fragmentTracker.fragBuffered(r)}}},s.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset;if(0===r&&a!==Number.POSITIVE_INFINITY){var n=this.currentTrackId,i=this.levels;if(!i.length||!i[n]||!i[n].details)return;var o=a-i[n].details.targetduration;if(o<=0)return;e.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=o)t.shift();else{if(!(t[e].start<o))break;t[e].start=o,e++}})),this.fragmentTracker.removeFragmentsInRange(r,o,L.b.SUBTITLE)}},s.onError=function(t,e){var r,a=e.frag;a&&a.type===L.b.SUBTITLE&&(null!==(r=this.fragCurrent)&&void 0!==r&&r.loader&&this.fragCurrent.loader.abort(),this.state=Dt)},s.onSubtitleTracksUpdated=function(t,e){var r=this,a=e.subtitleTracks;this.tracksBuffered=[],this.levels=a.map((function(t){return new z(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){r.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},s.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},s.onSubtitleTrackLoaded=function(t,e){var r,a=e.details,n=e.id,i=this.currentTrackId,o=this.levels;if(o.length){var s=o[i];if(!(n>=o.length||n!==i)&&s){if(this.mediaBuffer=this.mediaBufferTimeRanges,a.live||null!==(r=s.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(a.deltaUpdateFailed||!l)return;var u=l.fragments[0];s.details?0===this.alignPlaylists(a,s.details)&&u&&X(a,u.start):a.hasProgramDateTime&&l.hasProgramDateTime?pt(a,l):u&&X(a,u.start)}s.details=a,this.levelLastLoaded=n,this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Dt&&(yt(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0))}}},s._handleFragmentLoadComplete=function(t){var e=t.frag,r=t.payload,a=e.decryptdata,n=this.hls;if(!this.fragContextChanged(e)&&r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(t){var r=performance.now();n.trigger(i.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:r}})}))}},s.doTick=function(){if(this.media){if(this.state===Dt){var t,e=this.currentTrackId,r=this.levels;if(!r.length||!r[e]||!r[e].details)return;var a=r[e].details,n=a.targetduration,i=this.config,o=this.media,s=lt.bufferedInfo(this.mediaBufferTimeRanges,o.currentTime-n,i.maxBufferHole),l=s.end;if(s.len>this.getMaxBufferLength()+n)return;var u,c=a.fragments,d=c.length,f=a.edge,h=this.fragPrevious;l<f?!(u=yt(h,c,l,i.maxFragLookUpTolerance))&&h&&h.start<c[0].start&&(u=c[0]):u=c[d-1],null!==(t=u)&&void 0!==t&&t.encrypted?this.loadKey(u,a):u&&this.fragmentTracker.getState(u)===tt.NOT_LOADED&&this.loadFragment(u,a,l)}}else this.state=Dt},s.loadFragment=function(e,r,a){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,r,a)},n=a,(o=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&pe(n.prototype,o),a}(Yt);function ve(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function be(t){for(var e=[],r=0;r<t.length;r++){var a=t[r];"subtitles"===a.kind&&a.label&&e.push(t[r])}return e}var we,Se=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r.subtitleDisplay=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ge(e,r);var n,o,s=a.prototype;return s.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},s.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},s.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},s.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},s.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},s.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),be(this.media.textTracks).forEach((function(t){D(t)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},s.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},s.onSubtitleTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.trackId,i=this.tracksInGroup[n];if(i){var o=i.details;i.details=e.details,this.log("subtitle track "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,o))}else this.warn("Invalid subtitle track id "+r)},s.onLevelLoading=function(t,e){this.switchLevel(e.level)},s.onLevelSwitching=function(t,e){this.switchLevel(e.level)},s.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId];if(this.groupId!==r){var a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=n;var o=this.findTrackId(null==a?void 0:a.name)||this.findTrackId();this.groupId=r;var s={subtitleTracks:n};this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,a)}}},s.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},s.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.a.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},s.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(i.a.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},s.toggleTrackModes=function(t){var e=this,r=this.media,a=this.subtitleDisplay,n=this.trackId;if(r){var i=be(r.textTracks),o=i.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var s=o[n];s&&(s.mode="disabled")}var l=o[t];l&&(l.mode=a?"showing":"hidden")}},s.setSubtitleTrack=function(t,e){var r,a=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(r=a[t])&&void 0!==r&&r.details)||t<-1||t>=a.length)){this.clearTimer();var n=a[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,n){var o=n.id,s=n.groupId,l=void 0===s?"":s,u=n.name,c=n.type,d=n.url;this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:o,groupId:l,name:u,type:c,url:d});var f=this.switchParams(n.url,null==e?void 0:e.details);this.loadPlaylist(f)}else this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},s.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=be(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},n=a,(o=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}])&&ve(n.prototype,o),a}(Q),ke=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),a={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(a,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,a=e[t],n=r[t];if(n.length){var i=n[0];try{i.execute()}catch(e){s.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(e),a&&a.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),Te=Kt(),Ee=/([ha]vc.)(?:\.[^.,]+)+/,xe=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,r=e.media,a=e.mediaSource;s.b.log("[buffer-controller]: Media source opened"),r&&(e.updateMediaElementDuration(),t.trigger(i.a.MEDIA_ATTACHED,{media:r})),a&&a.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){s.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){s.b.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.BUFFER_EOS,this.onBufferEos,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.a.FRAG_PARSED,this.onFragParsed,this),t.on(i.a.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.BUFFER_EOS,this.onBufferEos,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.a.FRAG_PARSED,this.onFragParsed,this),t.off(i.a.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ke(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,s.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&Te){var a=this.mediaSource=new Te;a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(a),this._objectUrl=r.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(s.b.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){s.b.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):s.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.a.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){s.b.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,a=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(a){var n=r.tracks[t];if(n&&"function"==typeof n.buffer.changeType){var i=e[t],o=i.codec,s=i.levelCodec,l=i.container;if((n.levelCodec||n.codec).replace(Ee,"$1")!==(s||o).replace(Ee,"$1")){var u=l+";codecs="+(s||o);r.appendChangeType(t,u)}}}else r.pendingTracks[t]=e[t]})),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,a=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[t];n&&(s.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),n.changeType(e)),a.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){s.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};a.append(n,t)},e.onBufferAppending=function(t,e){var r=this,a=this.hls,n=this.operationQueue,l=this.tracks,u=e.data,c=e.type,d=e.frag,f=e.part,h=e.chunkMeta,p=h.buffering[c],m=self.performance.now();p.start=m;var y=d.stats.buffering,v=f?f.stats.buffering:null;0===y.start&&(y.start=m),v&&0===v.start&&(v.start=m);var g=l.audio,b="audio"===c&&1===h.id&&"audio/mpeg"===(null==g?void 0:g.container),w={execute:function(){if(p.executeStart=self.performance.now(),b){var t=r.sourceBuffer[c];if(t){var e=d.start-t.timestampOffset;Math.abs(e)>=.1&&(s.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+e+") sn: "+d.sn+")"),t.timestampOffset=d.start)}}r.appendExecutor(u,c)},onStart:function(){},onComplete:function(){var t=self.performance.now();p.executeEnd=p.end=t,0===y.first&&(y.first=t),v&&0===v.first&&(v.first=t);var e=r.sourceBuffer,a={};for(var n in e)a[n]=lt.getBuffered(e[n]);r.appendError=0,r.hls.trigger(i.a.BUFFER_APPENDED,{type:c,frag:d,part:f,chunkMeta:h,parent:d.type,timeRanges:a})},onError:function(t){s.b.error("[buffer-controller]: Error encountered while trying to append to the "+c+" SourceBuffer",t);var e={type:o.b.MEDIA_ERROR,parent:d.type,details:o.a.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=o.a.BUFFER_FULL_ERROR:(r.appendError++,e.details=o.a.BUFFER_APPEND_ERROR,r.appendError>a.config.appendErrorMaxRetry&&(s.b.error("[buffer-controller]: Failed "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),a.trigger(i.a.ERROR,e)}};n.append(w,c)},e.onBufferFlushing=function(t,e){var r=this,a=this.operationQueue,n=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(i.a.BUFFER_FLUSHED,{type:t})},onError:function(e){s.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?a.append(n(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){a.append(n(t),t)}))},e.onFragParsed=function(t,e){var r=this,a=e.frag,n=e.part,o=[],l=n?n.elementaryStreams:a.elementaryStreams;l[u.a.AUDIOVIDEO]?o.push("audiovideo"):(l[u.a.AUDIO]&&o.push("audio"),l[u.a.VIDEO]&&o.push("video")),0===o.length&&s.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+a.type+" level: "+a.level+" sn: "+a.sn),this.blockBuffers((function(){var t=self.performance.now();a.stats.buffering.end=t,n&&(n.stats.buffering.end=t);var e=n?n.stats:a.stats;r.hls.trigger(i.a.FRAG_BUFFERED,{frag:a,part:n,stats:e,id:a.type})}),o)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,a){var n=r.sourceBuffer[a];return e.type&&e.type!==a||n&&!n.ended&&(n.ended=!0,s.b.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),t&&!(n&&!n.ended)}),!0)&&this.blockBuffers((function(){var t=r.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,a=this.sourceBuffer;if(r&&null!==e){var o=this.getSourceBufferTypes();if(o.length){var s=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(n.a)(s)&&!(s<0)){var l=r.currentTime,u=e.levelTargetDuration,c=Math.max(s,u),d=Math.floor(l/u)*u-c;o.forEach((function(r){var n=a[r];if(n){var o=lt.getBuffered(n);o.length>0&&d>o.start(0)&&(t.trigger(i.a.BACK_BUFFER_REACHED,{bufferEnd:d}),e.live&&t.trigger(i.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),t.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:r}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,a=this.mediaSource,i=t.fragments[0].start+t.totalduration,o=r.duration,l=Object(n.a)(a.duration)?a.duration:0;t.live&&e.config.liveDurationInfinity?(s.b.log("[buffer-controller]: Media Source duration is set to Infinity"),a.duration=1/0,this.updateSeekableRange(t)):(i>l&&i>o||!Object(n.a)(o))&&(s.b.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),a.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var a=Math.max(0,r[0].start),n=Math.max(a,a+t.totalduration);e.setLiveSeekableRange(a,n)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,a=Object.keys(r).length;if(a&&!t||2===a){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(0===n.length)return void this.hls.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});n.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var a=0;for(var n in t)if(!e[n]){var l=t[n];if(!l)throw Error("source buffer exists for track "+n+", however track does not");var u=l.levelCodec||l.codec,c=l.container+";codecs="+u;s.b.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=e[n]=r.addSourceBuffer(c),f=n;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[n]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,id:l.id},a++}catch(t){s.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:c})}}a&&this.hls.trigger(i.a.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){s.b.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(t);r&&r.onError(e)},e.removeExecutor=function(t,e,r){var a=this.media,i=this.mediaSource,o=this.operationQueue,l=this.sourceBuffer[t];if(!a||!i||!l)return s.b.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void o.shiftAndExecuteNext(t);var u=Object(n.a)(a.duration)?a.duration:1/0,c=Object(n.a)(i.duration)?i.duration:1/0,d=Math.max(0,e),f=Math.min(r,u,c);f>d?(s.b.log("[buffer-controller]: Removing ["+d+","+f+"] from the "+t+" SourceBuffer"),l.remove(d,f)):o.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,a=this.sourceBuffer[e];if(!a)return s.b.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);a.ended=!1,a.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return s.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var a=this.operationQueue,n=e.map((function(t){return a.appendBlocker(t)}));Promise.all(n).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];e&&e.updating||a.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var a=this.sourceBuffer[t];if(a){var n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),a.addEventListener(e,n)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),_e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Le=function(t){var e=t;return _e.hasOwnProperty(t)&&(e=_e[t]),String.fromCharCode(e)},Ae={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Re={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Oe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ce={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ie=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(we||(we={}));var De=function(){function t(){this.time=null,this.verboseLevel=we.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&s.b.log(this.time+" ["+t+"] "+e)},t}(),Pe=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Me=function(){function t(t,e,r,a,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=a||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var a=e[r];t.hasOwnProperty(a)&&(this[a]=t[a])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Fe=function(){function t(t,e,r,a,n,i){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Me(e,r,a,n,i)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Be=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Fe);this.logger=t,this.pos=0,this.currPenState=new Me}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(we.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(we.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Le(t);this.pos>=100?this.logger.log(we.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var a=this.chars[r].uchar;" "!==a&&(e=!1),t.push(a)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ne=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Be(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(we.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(we.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var a=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var i=n.rows[a].cueStartTime,o=this.logger.time;if(i&&null!==o&&i<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(n.rows[a+s])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[c].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(we.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(we.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(we.INFO,"Rolling up")}else this.logger.log(we.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",a=-1,n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(a=n+1,t?e.push("Row "+a+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Ue=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ne(r),this.nonDisplayedMemory=new Ne(r),this.lastOutputScreen=new Ne(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(we.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(we.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(we.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(we.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(we.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(we.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(we.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(we.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(we.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(we.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(we.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(we.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(we.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(we.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(we.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(we.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(we.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(we.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function je(t,e,r){r.a=t,r.b=e}function Ge(t,e,r){return r.a===t&&r.b===e}var ze=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new De;this.channels=[null,new Ue(t,e,a),new Ue(t+1,r,a)],this.cmdHistory={a:null,b:null},this.logger=a}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,a,n,i=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(a=127&e[o],n=127&e[o+1],0!==a||0!==n){if(this.logger.log(we.DATA,"["+Pe([e[o],e[o+1]])+"] -> ("+Pe([a,n])+")"),(r=this.parseCmd(a,n))||(r=this.parseMidrow(a,n)),r||(r=this.parsePAC(a,n)),r||(r=this.parseBackgroundAttributes(a,n)),!r&&(i=this.parseChars(a,n))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(i):this.logger.log(we.WARNING,"No channel found yet. TEXT-MODE?")}r||i||this.logger.log(we.WARNING,"Couldn't parse cleaned data "+Pe([a,n])+" orig: "+Pe([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Ge(t,e,r))return je(null,null,r),this.logger.log(we.DEBUG,"Repeated command ("+Pe([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,n=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),je(t,e,r),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(we.ERROR,"Mismatch channel in midrow parsing"),!1;var a=this.channels[r];return!!a&&(a.ccMIDROW(e),this.logger.log(we.DEBUG,"MIDROW ("+Pe([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Ge(t,e,a))return je(null,null,a),!0;var n=t<=23?1:2;r=e>=64&&e<=95?1===n?Ae[t]:Oe[t]:1===n?Re[t]:Ce[t];var i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,e)),je(t,e,a),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,a={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,a.underline=1==(1&r),r<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((r-16)/2),a},e.parseChars=function(t,e){var r,a,n=null,i=null;if(t>=25?(r=2,i=t-8):(r=1,i=t),i>=17&&i<=19?(a=17===i?e+80:18===i?e+112:e+144,this.logger.log(we.INFO,"Special char '"+Le(a)+"' in channel "+r),n=[a]):t>=32&&t<=127&&(n=0===e?[t]:[t,e]),n){var o=Pe(n);this.logger.log(we.DEBUG,"Char codes =  "+o.join(",")),je(t,e,this.cmdHistory)}return n},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var a={};16===t||24===t?(r=Math.floor((e-32)/2),a.background=Ie[r],e%2==1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var n=t<=23?1:2;return this.channels[n].setBkgData(a),je(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}(),He=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),qe=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function a(t){return r(e,t)}function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)t[o]=i[o]}return t}function i(e,i,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=e,f=i,h=o,p=null,m="",y=!0,v="auto",g="start",b=50,w="middle",S=50,k="middle";Object.defineProperty(s,"id",n({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(s,"pauseOnExit",n({},l,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",n({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},l,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},l,{get:function(){return h},set:function(t){h=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},l,{get:function(){return m},set:function(e){var a=function(e){return r(t,e)}(e);if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},l,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},l,{get:function(){return g},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},l,{get:function(){return w},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},l,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},l,{get:function(){return k},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");k=e,this.hasBeenReset=!0}})),s.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}(),Ye=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function Ke(t){function e(t,e,r,a){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(a||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var Ve=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var a=0;a<r.length;++a)if(e===r[a]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function We(t,e,r,a){var n=a?t.split(a):[t];for(var i in n)if("string"==typeof n[i]){var o=n[i].split(r);2===o.length&&e(o[0],o[1])}}var Xe=new qe(0,0,""),Qe="middle"===Xe.align?"middle":"center";function $e(t,e,r){var a=t;function n(){var e=Ke(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}if(i(),e.startTime=n(),i(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),i(),e.endTime=n(),i(),function(t,e){var a=new Ve;We(t,(function(t,e){var n;switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){a.set(t,r[i].region);break}break;case"vertical":a.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),a.integer(t,n[0]),a.percent(t,n[0])&&a.set("snapToLines",!1),a.alt(t,n[0],["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",Qe,"end"]);break;case"position":n=e.split(","),a.percent(t,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",Qe,"end","line-left","line-right","auto"]);break;case"size":a.percent(t,e);break;case"align":a.alt(t,e,["start",Qe,"end","left","right"])}}),/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical","");var n=a.get("line","auto");"auto"===n&&-1===Xe.line&&(n=-1),e.line=n,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",Qe);var i=a.get("position","auto");"auto"===i&&50===Xe.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(t,e)}function Je(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var Ze=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new Ye,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Je(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var a=t.substr(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),a}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var a="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(a=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var i=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(i?i=!1:a=r(),e.state){case"HEADER":/:/.test(a)?We(a,(function(t,e){}),/:/):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new qe(0,0,""),e.state="CUE",-1===a.indexOf("--\x3e")){e.cue.id=a;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{$e(a,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==a.indexOf("--\x3e");if(!a||o&&(i=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=a;continue;case"BADCUE":a||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t)}return this.onflush&&this.onflush(),this},t}(),tr=r(8),er=r(16),rr=/\r\n|\n\r|\n|\r/g,ar=function(t,e,r){return void 0===r&&(r=0),t.substr(r,e.length)===e},nr=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function ir(t,e,r){return nr(t.toString())+nr(e.toString())+nr(r)}function or(t,e,r,a,i,o,s,l){var u,c=new Ze,d=Object(M.f)(new Uint8Array(t)).trim().replace(rr,"\n").split("\n"),f=[],h=Object(tr.a)(e,r),p="00:00.000",m=0,y=0,v=!0,g=!1;c.oncue=function(t){var e=a[i],r=a.ccOffset,n=(m-h)/9e4;if(null!=e&&e.new&&(void 0!==y?r=a.ccOffset=e.start:function(t,e,r){var a=t[e],n=t[a.prevCC];if(!n||!n.new&&a.new)return t.ccOffset=t.presentationOffset=a.start,void(a.new=!1);for(;null!==(i=n)&&void 0!==i&&i.new;){var i;t.ccOffset+=a.start-n.start,a.new=!1,n=t[(a=n).prevCC]}t.presentationOffset=r}(a,i,n)),n&&(r=n-a.presentationOffset),g){var s=t.endTime-t.startTime,l=Object(er.b)(9e4*(t.startTime+r-y),9e4*o)/9e4;t.startTime=l,t.endTime=l+s}var u=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(u)),t.id||(t.id=ir(t.startTime,t.endTime,u)),t.endTime>0&&f.push(t)},c.onparsingerror=function(t){u=t},c.onflush=function(){u?l(u):s(f)},d.forEach((function(t){if(v){if(ar(t,"X-TIMESTAMP-MAP=")){v=!1,g=!0,t.substr(16).split(",").forEach((function(t){ar(t,"LOCAL:")?p=t.substr(6):ar(t,"MPEGTS:")&&(m=parseInt(t.substr(7)))}));try{y=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),a=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(n.a)(e)&&Object(n.a)(r)&&Object(n.a)(a)&&Object(n.a)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*a)+36e5*i}(p)/1e3}catch(t){g=!1,u=t}return}""===t&&(v=!1)}c.parse(t+"\n")})),c.flush()}function sr(){return(sr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var lr=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ur=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,cr={left:"start",center:"center",right:"end",start:"start",end:"end"};function dr(t,e,r,a,n){var i=Object(l.b)(new Uint8Array(t),["mdat"]);if(0!==i.length){var o=i[0],s=Object(M.f)(new Uint8Array(t,o.start,o.end-o.start)),u=Object(tr.c)(e,1,r);try{a(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(a).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||a[e],t}),{}),i="preserve"!==r.getAttribute("xml:space"),o=hr(fr(r,"styling","style")),s=hr(fr(r,"layout","region")),l=fr(r,"body","[begin]");return[].map.call(l,(function(t){var r=function t(e,r){return[].slice.call(e.childNodes).reduce((function(e,a,n){var i;return"br"===a.nodeName&&n?e+"\n":null!==(i=a.childNodes)&&void 0!==i&&i.length?t(a,r):r?e+a.textContent.trim().replace(/\s+/g," "):e+a.textContent}),"")}(t,i);if(!r||!t.hasAttribute("begin"))return null;var a=yr(t.getAttribute("begin"),n),l=yr(t.getAttribute("dur"),n),u=yr(t.getAttribute("end"),n);if(null===a)throw mr(t);if(null===u){if(null===l)throw mr(t);u=a+l}var c=new qe(a-e,u-e,r);c.id=ir(c.startTime,c.endTime,c.text);var d=s[t.getAttribute("region")],f=o[t.getAttribute("style")];c.position=10,c.size=80;var h=function(t,e){var r="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(a,n){var i=pr(e,r,n)||pr(t,r,n);return i&&(a[n]=i),a}),{})}(d,f),p=h.textAlign;if(p){var m=cr[p];m&&(c.lineAlign=m),c.align=p}return sr(c,h),c})).filter((function(t){return null!==t}))}(s,u))}catch(t){n(t)}}else n(new Error("Could not parse IMSC1 mdat"))}function fr(t,e,r){var a=t.getElementsByTagName(e)[0];return a?[].slice.call(a.querySelectorAll(r)):[]}function hr(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function pr(t,e,r){return t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function mr(t){return new Error("Could not parse ttml timestamp "+t)}function yr(t,e){if(!t)return null;var r=Ke(t);return null===r&&(lr.test(t)?r=function(t,e){var r=lr.exec(t),a=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/e.frameRate}(t,e):ur.test(t)&&(r=function(t,e){var r=ur.exec(t),a=Number(r[1]);switch(r[2]){case"h":return 3600*a;case"m":return 60*a;case"ms":return 1e3*a;case"f":return a/e.frameRate;case"t":return a/e.tickRate}return a}(t,e))),r}var vr=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new He(this,"textTrack1"),r=new He(this,"textTrack2"),a=new He(this,"textTrack3"),n=new He(this,"textTrack4");this.cea608Parser1=new ze(1,e,r),this.cea608Parser2=new ze(3,a,n)}t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,a,n){for(var o,s,l,u,c=!1,d=n.length;d--;){var f=n[d],h=(o=f[0],s=f[1],l=e,u=r,Math.min(s,u)-Math.max(o,l));if(h>=0&&(f[0]=Math.min(f[0],e),f[1]=Math.max(f[1],r),c=!0,h/(r-e)>.5))return}if(c||n.push([e,r]),this.config.renderTextTracksNatively){var p=this.captionsTracks[t];this.Cues.newCue(p,e,r,a)}else{var m=this.Cues.newCue(null,e,r,a);this.hls.trigger(i.a.CUES_PARSED,{type:"captions",cues:m,track:t})}},e.onInitPtsFound=function(t,e){var r=this,a=e.frag,n=e.id,o=e.initPTS,s=e.timescale,l=this.unparsedVttFrags;"main"===n&&(this.initPTS[a.cc]=o,this.timescale[a.cc]=s),l.length&&(this.unparsedVttFrags=[],l.forEach((function(t){r.onFragLoaded(i.a.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var a=e.textTracks[r];if(a[t])return a}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,a=this.media,n=e[t],i=n.label,o=n.languageCode,s=this.getExistingTrack(t);if(s)r[t]=s,D(r[t]),C(r[t],a);else{var l=this.createTextTrack("captions",i,o);l&&(l[t]=!0,r[t]=l)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var a=this.media;if(a)return a.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){D(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)D(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this;this.textTracks=[];var a=e.subtitleTracks||[],n=a.some((function(t){return"stpp.ttml.im1t"===t.textCodec}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){var o=this.tracks&&a&&this.tracks.length===a.length;if(this.tracks=a||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var a;if(e<s.length){for(var n=null,i=0;i<s.length;i++)if(gr(s[i],t)){n=s[i];break}n&&(a=n)}a?D(a):(a=r.createTextTrack("subtitles",t.name,t.lang))&&(a.mode="disabled"),a&&(a.groupId=t.groupId,r.textTracks.push(a))}))}else if(!o&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var a="textTrack"+e[1],n=r.captionsProperties[a];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}}))},e.onFragLoading=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2,n=this.lastSn,i=this.lastPartIndex;if(this.enabled&&r&&a&&e.frag.type===L.b.MAIN){var o,s,l=e.frag.sn,u=null!=(o=null==e||null===(s=e.part)||void 0===s?void 0:s.index)?o:-1;l===n+1||l===n&&u===i+1||(r.reset(),a.reset()),this.lastSn=l,this.lastPartIndex=u}},e.onFragLoaded=function(t,e){var r=e.frag,a=e.payload,o=this.initPTS,s=this.unparsedVttFrags;if(r.type===L.b.SUBTITLE)if(a.byteLength){if(!Object(n.a)(o[r.cc]))return s.push(e),void(o.length&&this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var l=r.decryptdata,u="stats"in e;if(null==l||null==l.key||"AES-128"!==l.method||u){var c=this.tracks[r.level],d=this.vttCCs;d[r.cc]||(d[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),c&&"stpp.ttml.im1t"===c.textCodec?this._parseIMSC1(r,a):this._parseVTTs(r,a,d)}}else this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,a=this.hls;dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){r._appendCues(e,t.level),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){s.b.log("Failed to parse IMSC1: "+e),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,r){var a=this,n=this.hls;or(e,this.initPTS[t.cc],this.timescale[t.cc],r,t.cc,t.start,(function(e){a._appendCues(e,t.level),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){a._fallbackToIMSC1(t,e),s.b.log("Failed to parse VTT cue: "+r),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},e._fallbackToIMSC1=function(t,e){var r=this,a=this.tracks[t.level];a.textCodec||dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){a.textCodec="stpp.ttml.im1t",r._parseIMSC1(t,e)}),(function(){a.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var a=this.textTracks[e];if("disabled"===a.mode)return;t.forEach((function(t){return I(a,t)}))}else{var n=this.tracks[e].default?"default":"subtitles"+e;r.trigger(i.a.CUES_PARSED,{type:"subtitles",cues:t,track:n})}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===L.b.SUBTITLE){if(!Object(n.a)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.a.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2;if(this.enabled&&r&&a)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var o=this.extractCea608Data(i);r.addData(e.samples[n].pts,o[0]),a.addData(e.samples[n].pts,o[1])}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.endOffsetSubtitles,i=e.type,o=this.media;if(o&&!(o.currentTime<a)){if(!i||"video"===i){var s=this.captionsTracks;Object.keys(s).forEach((function(t){return P(s[t],r,a)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(t){return P(l[t],r,n)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],r=2,a=[[],[]],n=0;n<e;n++){var i=t[r++],o=127&t[r++],s=127&t[r++],l=3&i;0===o&&0===s||0!=(4&i)&&(0!==l&&1!==l||(a[l].push(o),a[l].push(s)))}return a},t}();function gr(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function br(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var wr,Sr=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,r,a,n=t.prototype;return n.setStreamController=function(t){this.streamController=t},n.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},n.registerListeners=function(){var t=this.hls;t.on(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.unregisterListener=function(){var t=this.hls;t.off(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.onFpsDropLevelCapping=function(e,r){t.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},n.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},n.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(e){var r=this,a=this.hls.levels;if(!a.length)return-1;var n=a.filter((function(a,n){return t.isLevelAllowed(n,r.restrictedLevels)&&n<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return-1;for(var a,n,i=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=r)&&(a=s,!(n=t[o+1])||a.width!==n.width||a.height!==n.height)){i=o;break}}return i},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&br(e.prototype,r),a&&br(e,a),t}(),kr=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var a=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=a,a&&"function"==typeof a.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var a=performance.now();if(e){if(this.lastTime){var n=a-this.lastTime,o=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,u=1e3*o/n,c=this.hls;if(c.trigger(i.a.FPS_DROP,{currentDropped:o,currentDecoded:l,totalDroppedFrames:r}),u>0&&o>c.config.fpsDroppedMonitoringThreshold*l){var d=c.currentLevel;s.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(i.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}();!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(wr||(wr={}));var Tr="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Er(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var xr,_r,Lr,Ar=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},a._registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a._unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a.getLicenseServerUrl=function(t){switch(t){case wr.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},a._attemptKeySystemAccess=function(t,e,r){var a=this,n=function(t,e,r,a){switch(t){case wr.WIDEVINE:return function(t,e,r){var a={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||""})})),e.forEach((function(t){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||""})})),[a]}(e,r,a);default:throw new Error("Unknown key-system: "+t)}}(t,e,r,this._drmSystemOptions);s.b.log("Requesting encrypted media key-system access");var i=this.requestMediaKeySystemAccess(t,n);this.mediaKeysPromise=i.then((function(e){return a._onMediaKeySystemAccessObtained(t,e)})),i.catch((function(e){s.b.error('Failed to obtain key-system "'+t+'" access:',e)}))},a._onMediaKeySystemAccessObtained=function(t,e){var r=this;s.b.log('Access for key-system "'+t+'" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(a);var n=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return a.mediaKeys=e,s.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e}));return n.catch((function(t){s.b.error("Failed to create media-keys:",t)})),n},a._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},a._onNewMediaKeySession=function(t){var e=this;s.b.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(r){e._onKeySessionMessage(t,r.message)}),!1)},a._onKeySessionMessage=function(t,e){s.b.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){s.b.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},a.onMediaEncrypted=function(t){var e=this;if(s.b.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return s.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});var r=function(r){e._media&&(e._attemptSetMediaKeys(r),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(r).catch(r)},a._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return s.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});s.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},a._generateRequestWithPreferredKeySession=function(t,e){var r=this,a=this._mediaKeysList[0];if(!a)return s.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(a.mediaKeysSessionInitialized)s.b.warn("Key-Session already initialized but requested again");else{var n=a.mediaKeysSession;if(!n)return s.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return s.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});s.b.log('Generating key-session request for "'+t+'" init data type'),a.mediaKeysSessionInitialized=!0,n.generateRequest(t,e).then((function(){s.b.debug("Key-session generation succeeded")})).catch((function(t){s.b.error("Error generating key-session request:",t),r.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},a._createLicenseXhr=function(t,e,r){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,t,e,r);var n=this._licenseXhrSetup;if(n)try{n.call(this.hls,a,t),n=void 0}catch(t){s.b.error(t)}try{a.readyState||a.open("POST",t,!0),n&&n.call(this.hls,a,t)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return a},a._onLicenseRequestReadyStageChange=function(t,e,r,a){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,s.b.log("License request succeeded");var n=t.response,l=this._licenseResponseCallback;if(l)try{n=l.call(this.hls,t,e)}catch(t){s.b.error(t)}a(n)}else{if(s.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var u=3-this._requestLicenseFailureCount+1;s.b.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(r,a)}}},a._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case wr.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},a._requestLicense=function(t,e){s.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var a=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(a,t,e);s.b.log("Sending license request to URL: "+a);var l=this._generateLicenseRequestChallenge(r,t);n.send(l)}catch(t){s.b.error("Failure requesting DRM license: "+t),this.hls.trigger(i.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},a.onMediaAttached=function(t,e){if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted)}},a.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},a.onManifestParsed=function(t,e){if(this._emeEnabled){var r=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),a=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(wr.WIDEVINE,r,a)}},e=t,(r=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Er(e.prototype,r),t}();function Rr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Or(t,e,r){return e&&Rr(t.prototype,e),r&&Rr(t,r),t}function Cr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Dr(){return(Dr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(xr||(xr={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(_r||(_r={})),function(t){t.VOD="v",t.LIVE="l"}(Lr||(Lr={}));var Pr=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:xr.MANIFEST,su:!r.initialized})}catch(t){s.b.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,a=r.hls.levels[e.level],n=r.getObjectType(e),i={d:1e3*e.duration,ot:n};n!==xr.VIDEO&&n!==xr.AUDIO&&n!=xr.MUXED||(i.br=a.bitrate/1e3,i.tb=r.getTopBandwidth(n)/1e3,i.bl=r.getBufferLength(n)),r.apply(t,i)}catch(t){s.b.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var a=this.config=e.config,n=a.cmcd;null!=n&&(a.pLoader=this.createPlaylistLoader(),a.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},e.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,a;this.audioBuffer=null===(r=e.tracks.audio)||void 0===r?void 0:r.buffer,this.videoBuffer=null===(a=e.tracks.video)||void 0===a?void 0:a.buffer},e.createData=function(){var t;return{v:1,sf:_r.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),Dr(r,this.createData());var a=r.ot===xr.INIT||r.ot===xr.VIDEO||r.ot===xr.MUXED;if(this.starved&&a&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=t.toHeaders(r);if(!Object.keys(n).length)return;e.headers||(e.headers={}),Dr(e.headers,n)}else{var i=t.toQuery(r);if(!i)return;e.url=t.appendQueryToUri(e.url,i)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?xr.TIMED_TEXT:"initSegment"===t.sn?xr.INIT:"audio"===e?xr.AUDIO:"main"===e?this.hls.audioTracks.length?xr.VIDEO:xr.MUXED:void 0},e.getTopBandwidth=function(t){var e,r=0,a=this.hls;if(t===xr.AUDIO)e=a.audioTracks;else{var n=a.maxAutoLevel,i=n>-1?n+1:a.levels.length;e=a.levels.slice(0,i)}for(var o,s=Cr(e);!(o=s()).done;){var l=o.value;l.bitrate>r&&(r=l.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r=t===xr.AUDIO?this.audioBuffer:this.videoBuffer;return r&&e?1e3*lt.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},Or(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},Or(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],a=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},n=function(t){return Math.round(t)},i=function(t){return 100*n(t/100)},o={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(t){return encodeURIComponent(t)},rtp:i,tb:n},s=Cr(Object.keys(t||{}).sort());!(e=s()).done;){var l=e.value,u=t[l];if(a(u)&&!("v"===l&&1===u||"pr"==l&&1===u)){var c=o[l];c&&(u=c(u));var d,f=typeof u;d="ot"===l||"sf"===l||"st"===l?l+"="+u:"boolean"===f?l:"number"===f?l+"="+u:l+"="+JSON.stringify(u),r.push(d)}}return r.join(",")},t.toHeaders=function(e){for(var r={},a=["Object","Request","Session","Status"],n=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(e);o<s.length;o++){var l=s[o];n[null!=i[l]?i[l]:1][l]=e[l]}for(var u=0;u<n.length;u++){var c=t.serialize(n[u]);c&&(r["CMCD-"+a[u]]=c)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),Mr=r(12),Fr=/^age:\s*[\d.]+\s*$/m,Br=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new Mr.a,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var r=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var n=this.xhrSetup;try{if(n)try{n(r,e.url)}catch(t){r.open("GET",e.url,!0),n(r,e.url)}r.readyState||r.open("GET",e.url,!0);var i=this.context.headers;if(i)for(var o in i)r.setRequestHeader(o,i[o])}catch(t){return void this.callbacks.onError({code:r.status,text:t.message},e,r)}e.rangeEnd&&r.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),r.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var a=e.readyState,n=this.config;if(!r.aborted&&a>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===a){e.onreadystatechange=null,e.onprogress=null;var i=e.status;if(i>=200&&i<300){var o,l;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===t.responseType?(o=e.response).byteLength:(o=e.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,t,o,e),!this.callbacks)return;var c={url:e.responseURL,data:o};this.callbacks.onSuccess(c,r,t,e)}else r.retry>=n.maxRetry||i>=400&&i<499?(s.b.error(i+" while loading "+t.url),this.callbacks.onError({code:i,text:e.statusText},t,e)):(s.b.warn(i+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout)}},e.loadtimeout=function(){s.b.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&Fr.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}();function Nr(t){var e="function"==typeof Map?new Map:void 0;return(Nr=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return Ur(t,arguments,zr(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Gr(a,t)})(t)}function Ur(t,e,r){return(Ur=jr()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&Gr(n,r.prototype),n}).apply(null,arguments)}function jr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(){return(Hr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var qr=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Yr,this.controller=new self.AbortController,this.stats=new Mr.a}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var a=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var o=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Hr({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),s=r.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){a.abortInternal(),r.onTimeout(i,t,a.response)}),e.timeout),self.fetch(this.request).then((function(r){if(a.response=a.loader=r,!r.ok){var o=r.status,u=r.statusText;throw new Kr(u||"fetch, bad network response",o,r)}return i.loading.first=Math.max(self.performance.now(),i.loading.start),i.total=parseInt(r.headers.get("Content-Length")||"0"),s&&Object(n.a)(e.highWaterMark)?a.loadProgressively(r,i,t,e.highWaterMark,s):l?r.arrayBuffer():r.text()})).then((function(o){var l=a.response;self.clearTimeout(a.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first),i.loaded=i.total=o[u];var c={url:l.url,data:o};s&&!Object(n.a)(e.highWaterMark)&&s(i,t,o,l),r.onSuccess(c,i,t,l)})).catch((function(e){if(self.clearTimeout(a.requestTimeout),!i.aborted){var n=e.code||0;r.onError({code:n,text:e.message},t,e.details)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,r,a,n){void 0===a&&(a=0);var i=new se.a,o=t.body.getReader();return function s(){return o.read().then((function(o){if(o.done)return i.dataLength&&n(e,r,i.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=o.value,u=l.length;return e.loaded+=u,u<a||i.dataLength?(i.push(l),i.dataLength>=a&&n(e,r,i.flush(),t)):n(e,r,l,t),s()})).catch((function(){return Promise.reject()}))}()},t}();function Yr(t,e){return new self.Request(t.url,e)}var Kr=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this,e)||this).code=void 0,n.details=void 0,n.code=r,n.details=a,n}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Gr(e,r),a}(Nr(Error)),Vr=qr,Wr=/\s/;function Xr(){return(Xr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function Qr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function $r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qr(Object(r),!0).forEach((function(e){Jr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Zr=$r($r({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Br,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:oe,bufferController:xe,capLevelController:Sr,fpsController:kr,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Tr,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:{newCue:function(t,e,r,a){for(var n,i,o,s,l,u=[],c=self.VTTCue||self.TextTrackCue,d=0;d<a.rows.length;d++)if(o=!0,s=0,l="",!(n=a.rows[d]).isEmpty()){for(var f=0;f<n.chars.length;f++)Wr.test(n.chars[f].uchar)&&o?s++:(l+=n.chars[f].uchar,o=!1);n.cueStartTime=e,e===r&&(r+=1e-4),s>=16?s--:s++;var h=Je(l.trim()),p=ir(e,r,h);t&&t.cues&&t.cues.getCueById(p)||((i=new c(e,r,h)).id=p,i.line=d+1,i.align="left",i.position=10+Math.min(80,10*Math.floor(8*s/32)),u.push(i))}return t&&u.length&&(u.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),u.forEach((function(e){return I(t,e)}))),u}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:ye,subtitleTrackController:Se,timelineController:vr,audioStreamController:ce,audioTrackController:he,emeController:Ar,cmcdController:Pr});function ta(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ea=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Qt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Xr({},t,e)}(t.DefaultConfig,e);this.userConfig=e,Object(s.a)(r.debug),this._autoLevelCapping=-1,r.progressive&&function(t){var e=t.loader;e!==Vr&&e!==Br?(s.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Vr,t.progressive=!0,t.enableSoftwareAES=!0,s.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}(r);var a=r.abrController,n=r.bufferController,i=r.capLevelController,o=r.fpsController,l=this.abrController=new a(this),u=this.bufferController=new n(this),c=this.capLevelController=new i(this),d=new o(this),f=new R(this),h=new O(this),p=new F(this),m=this.levelController=new rt(this),y=new at(this),v=this.streamController=new re(this,y);c.setStreamController(v),d.setStreamController(v);var g=[m,v];this.networkControllers=g;var b=[f,h,l,u,c,d,p,y];this.audioTrackController=this.createController(r.audioTrackController,null,g),this.createController(r.audioStreamController,y,g),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,g),this.createController(r.subtitleStreamController,y,g),this.createController(r.timelineController,null,b),this.emeController=this.createController(r.emeController,null,b),this.cmcdController=this.createController(r.cmcdController,null,b),this.latencyController=this.createController(U,null,b),this.coreComponents=b}t.isSupported=function(){return function(){var t=Kt();if(!t)return!1;var e=Vt(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!a}()};var e,r,n,l=t.prototype;return l.createController=function(t,e,r){if(t){var a=e?new t(this,e):new t(this);return r&&r.push(a),a}return null},l.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},l.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},l.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},l.off=function(t,e,r,a){void 0===r&&(r=this),this._emitter.off(t,e,r,a)},l.listeners=function(t){return this._emitter.listeners(t)},l.emit=function(t,e,r){return this._emitter.emit(t,e,r)},l.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){s.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(i.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},l.listenerCount=function(t){return this._emitter.listenerCount(t)},l.destroy=function(){s.b.log("destroy"),this.trigger(i.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},l.attachMedia=function(t){s.b.log("attachMedia"),this._media=t,this.trigger(i.a.MEDIA_ATTACHING,{media:t})},l.detachMedia=function(){s.b.log("detachMedia"),this.trigger(i.a.MEDIA_DETACHING,void 0),this._media=null},l.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,n=this.url=a.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});s.b.log("loadSource:"+n),e&&r&&r!==n&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(i.a.MANIFEST_LOADING,{url:t})},l.startLoad=function(t){void 0===t&&(t=-1),s.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},l.stopLoad=function(){s.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},l.swapAudioCodec=function(){s.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){s.b.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},l.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,n=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return i.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Zr},set:function(e){t.defaultConfig=e}}],(r=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){s.b.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){s.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){s.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){s.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){s.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(s.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,a=0;a<r;a++)if(t[a].maxBitrate>e)return a;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&ta(e.prototype,r),n&&ta(e,n),t}();ea.defaultConfig=void 0}]).default})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("smartplayer",[],e):"object"==typeof exports?exports.smartplayer=e():t.smartplayer=e()}(window,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=76)}([function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=r(13),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function l(t){return null!==t&&"object"===a(t)}function u(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===i.call(t)}function d(t,e){if(null!=t)if("object"!==a(t)&&(t=[t]),o(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isPlainObject:u,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:c,isStream:function(t){return l(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function t(){var e={};function r(r,a){u(e[a])&&u(r)?e[a]=t(e[a],r):u(r)?e[a]=t({},r):o(r)?e[a]=r.slice():e[a]=r}for(var a=0,n=arguments.length;a<n;a++)d(arguments[a],r);return e},extend:function(t,e,r){return d(e,(function(e,a){t[a]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,r){"use strict";for(var a=r(2),n=[],i=0;i<256;++i)n.push((i+256).toString(16).substr(1));e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase();if(!Object(a.a)(r))throw TypeError("Stringified UUID is invalid");return r}},function(t,e,r){"use strict";var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;e.a=function(t){return"string"==typeof t&&a.test(t)}},function(t,e,r){"use strict";(function(t){var a=r(23),n=r(24);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=setTimeout;function s(t){return Boolean(t&&void 0!==t.length)}function l(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],m(t,this)}function c(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var a;try{a=r(t._value)}catch(t){return void f(e.promise,t)}d(e.promise,a)}else(1===t._state?d:f)(e.promise,t._value)}))):t._deferreds.push(e)}function d(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===i(e)||"function"==typeof e)){var r=e.then;if(e instanceof u)return t._state=3,t._value=e,void h(t);if("function"==typeof r)return void m((a=r,n=e,function(){a.apply(n,arguments)}),t)}t._state=1,t._value=e,h(t)}catch(e){f(t,e)}var a,n}function f(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)c(t,t._deferreds[e]);t._deferreds=null}function p(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function m(t,e){var r=!1;try{t((function(t){r||(r=!0,d(e,t))}),(function(t){r||(r=!0,f(e,t))}))}catch(t){if(r)return;r=!0,f(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var r=new this.constructor(l);return c(this,new p(t,e,r)),r},u.prototype.finally=a.a,u.all=function(t){return new u((function(e,r){if(!s(t))return r(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return e([]);var n=a.length;function o(t,s){try{if(s&&("object"===i(s)||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){o(t,e)}),r)}a[t]=s,0==--n&&e(a)}catch(t){r(t)}}for(var l=0;l<a.length;l++)o(l,a[l])}))},u.allSettled=n.a,u.resolve=function(t){return t&&"object"===i(t)&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,r){r(t)}))},u.race=function(t){return new u((function(e,r){if(!s(t))return r(new TypeError("Promise.race accepts an array"));for(var a=0,n=t.length;a<n;a++)u.resolve(t[a]).then(e,r)}))},u._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=u}).call(this,r(53).setImmediate)},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(a=window)}t.exports=a},function(t,e,r){"use strict";r.r(e),r.d(e,"v1",(function(){return u})),r.d(e,"v3",(function(){return w})),r.d(e,"v4",(function(){return S.a})),r.d(e,"v5",(function(){return E})),r.d(e,"NIL",(function(){return x})),r.d(e,"version",(function(){return _})),r.d(e,"validate",(function(){return c.a})),r.d(e,"stringify",(function(){return o.a})),r.d(e,"parse",(function(){return d}));var a,n,i=r(7),o=r(1),s=0,l=0;var u=function(t,e,r){var u=e&&r||0,c=e||new Array(16),d=(t=t||{}).node||a,f=void 0!==t.clockseq?t.clockseq:n;if(null==d||null==f){var h=t.random||(t.rng||i.a)();null==d&&(d=a=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=n=16383&(h[6]<<8|h[7]))}var p=void 0!==t.msecs?t.msecs:Date.now(),m=void 0!==t.nsecs?t.nsecs:l+1,y=p-s+(m-l)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||p>s)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,l=m,n=f;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;c[u++]=v>>>24&255,c[u++]=v>>>16&255,c[u++]=v>>>8&255,c[u++]=255&v;var g=p/4294967296*1e4&268435455;c[u++]=g>>>8&255,c[u++]=255&g,c[u++]=g>>>24&15|16,c[u++]=g>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var b=0;b<6;++b)c[u+b]=d[b];return e||Object(o.a)(c)},c=r(2);var d=function(t){if(!Object(c.a)(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r};var f=function(t,e,r){function a(t,a,n,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof a&&(a=d(a)),16!==a.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(a),s.set(t,a.length),(s=r(s))[6]=15&s[6]|e,s[8]=63&s[8]|128,n){i=i||0;for(var l=0;l<16;++l)n[i+l]=s[l];return n}return Object(o.a)(s)}try{a.name=t}catch(t){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a};function h(t){return 14+(t+64>>>9<<4)+1}function p(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function m(t,e,r,a,n,i){return p((o=p(p(e,t),p(a,i)))<<(s=n)|o>>>32-s,r);var o,s}function y(t,e,r,a,n,i,o){return m(e&r|~e&a,t,e,n,i,o)}function v(t,e,r,a,n,i,o){return m(e&a|r&~a,t,e,n,i,o)}function g(t,e,r,a,n,i,o){return m(e^r^a,t,e,n,i,o)}function b(t,e,r,a,n,i,o){return m(r^(e|~a),t,e,n,i,o)}var w=f("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,a=0;a<r;a+=8){var n=t[a>>5]>>>a%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[h(e)-1]=e;for(var r=1732584193,a=-271733879,n=-1732584194,i=271733878,o=0;o<t.length;o+=16){var s=r,l=a,u=n,c=i;r=y(r,a,n,i,t[o],7,-680876936),i=y(i,r,a,n,t[o+1],12,-389564586),n=y(n,i,r,a,t[o+2],17,606105819),a=y(a,n,i,r,t[o+3],22,-1044525330),r=y(r,a,n,i,t[o+4],7,-176418897),i=y(i,r,a,n,t[o+5],12,1200080426),n=y(n,i,r,a,t[o+6],17,-1473231341),a=y(a,n,i,r,t[o+7],22,-45705983),r=y(r,a,n,i,t[o+8],7,1770035416),i=y(i,r,a,n,t[o+9],12,-1958414417),n=y(n,i,r,a,t[o+10],17,-42063),a=y(a,n,i,r,t[o+11],22,-1990404162),r=y(r,a,n,i,t[o+12],7,1804603682),i=y(i,r,a,n,t[o+13],12,-40341101),n=y(n,i,r,a,t[o+14],17,-1502002290),a=y(a,n,i,r,t[o+15],22,1236535329),r=v(r,a,n,i,t[o+1],5,-165796510),i=v(i,r,a,n,t[o+6],9,-1069501632),n=v(n,i,r,a,t[o+11],14,643717713),a=v(a,n,i,r,t[o],20,-373897302),r=v(r,a,n,i,t[o+5],5,-701558691),i=v(i,r,a,n,t[o+10],9,38016083),n=v(n,i,r,a,t[o+15],14,-660478335),a=v(a,n,i,r,t[o+4],20,-405537848),r=v(r,a,n,i,t[o+9],5,568446438),i=v(i,r,a,n,t[o+14],9,-1019803690),n=v(n,i,r,a,t[o+3],14,-187363961),a=v(a,n,i,r,t[o+8],20,1163531501),r=v(r,a,n,i,t[o+13],5,-1444681467),i=v(i,r,a,n,t[o+2],9,-51403784),n=v(n,i,r,a,t[o+7],14,1735328473),a=v(a,n,i,r,t[o+12],20,-1926607734),r=g(r,a,n,i,t[o+5],4,-378558),i=g(i,r,a,n,t[o+8],11,-2022574463),n=g(n,i,r,a,t[o+11],16,1839030562),a=g(a,n,i,r,t[o+14],23,-35309556),r=g(r,a,n,i,t[o+1],4,-1530992060),i=g(i,r,a,n,t[o+4],11,1272893353),n=g(n,i,r,a,t[o+7],16,-155497632),a=g(a,n,i,r,t[o+10],23,-1094730640),r=g(r,a,n,i,t[o+13],4,681279174),i=g(i,r,a,n,t[o],11,-358537222),n=g(n,i,r,a,t[o+3],16,-722521979),a=g(a,n,i,r,t[o+6],23,76029189),r=g(r,a,n,i,t[o+9],4,-640364487),i=g(i,r,a,n,t[o+12],11,-421815835),n=g(n,i,r,a,t[o+15],16,530742520),a=g(a,n,i,r,t[o+2],23,-995338651),r=b(r,a,n,i,t[o],6,-198630844),i=b(i,r,a,n,t[o+7],10,1126891415),n=b(n,i,r,a,t[o+14],15,-1416354905),a=b(a,n,i,r,t[o+5],21,-57434055),r=b(r,a,n,i,t[o+12],6,1700485571),i=b(i,r,a,n,t[o+3],10,-1894986606),n=b(n,i,r,a,t[o+10],15,-1051523),a=b(a,n,i,r,t[o+1],21,-2054922799),r=b(r,a,n,i,t[o+8],6,1873313359),i=b(i,r,a,n,t[o+15],10,-30611744),n=b(n,i,r,a,t[o+6],15,-1560198380),a=b(a,n,i,r,t[o+13],21,1309151649),r=b(r,a,n,i,t[o+4],6,-145523070),i=b(i,r,a,n,t[o+11],10,-1120210379),n=b(n,i,r,a,t[o+2],15,718787259),a=b(a,n,i,r,t[o+9],21,-343485551),r=p(r,s),a=p(a,l),n=p(n,u),i=p(i,c)}return[r,a,n,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(h(e)),a=0;a<e;a+=8)r[a>>5]|=(255&t[a/8])<<a%32;return r}(t),8*t.length))})),S=r(12);function k(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function T(t,e){return t<<e|t>>>32-e}var E=f("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var a=unescape(encodeURIComponent(t));t=[];for(var n=0;n<a.length;++n)t.push(a.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),s=new Array(o),l=0;l<o;++l){for(var u=new Uint32Array(16),c=0;c<16;++c)u[c]=t[64*l+4*c]<<24|t[64*l+4*c+1]<<16|t[64*l+4*c+2]<<8|t[64*l+4*c+3];s[l]=u}s[o-1][14]=8*(t.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(t.length-1)&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),h=0;h<16;++h)f[h]=s[d][h];for(var p=16;p<80;++p)f[p]=T(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var m=r[0],y=r[1],v=r[2],g=r[3],b=r[4],w=0;w<80;++w){var S=Math.floor(w/20),E=T(m,5)+k(S,y,v,g)+b+e[S]+f[w]>>>0;b=g,g=v,v=T(y,30)>>>0,y=m,m=E}r[0]=r[0]+m>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),x="00000000-0000-0000-0000-000000000000";var _=function(t){if(!Object(c.a)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,a){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);a&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},function(t,e,r){"use strict";var a;r.d(e,"a",(function(){return i}));var n=new Uint8Array(16);function i(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(n)}},function(t,e,r){var a=r(9);t.exports=function(t){"use strict";var e="",r=(t=t||{}).icons,n=a.$escape,i=t.message,o=t.btnLink,s=t.btnText;return e+='<div class="smartplayer-blocked">\n  <div class="smartplayer-blocked__logo">',e+=r.vturb,e+='</div>\n  <div class="smartplayer-blocked__content">\n    <div class="smartplayer-blocked__msg">',e+=n(i||"BLOQUEADO"),e+="</div>\n    ",o&&s&&(e+='\n      <a href="',e+=n(o),e+='" target="_blank" class="smartplayer-blocked__button">',e+=n(s),e+="</a>\n    "),e+="\n  </div>\n</div>\n"}},function(t,e,r){"use strict";t.exports=r(55)},function(t,e,r){"use strict";var a=r(6),n=r.n(a),i=r(22),o=n()((function(t){return t[1]}));o.i(i.a),o.push([t.i,'#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-ms-flex-line-pack:stretch;align-content:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;align-self:auto;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-direction:normal;animation-direction:normal;-webkit-animation-duration:0s;animation-duration:0s;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:none;animation-name:none;-webkit-animation-play-state:running;animation-play-state:running;-webkit-animation-timing-function:ease;animation-timing-function:ease;azimuth:center;-webkit-backface-visibility:visible;backface-visibility:visible;background-attachment:scroll;background-blend-mode:normal;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-repeat:repeat;background-size:auto auto;block-size:auto;border-block-end-color:currentcolor;border-block-end-style:none;border-block-end-width:medium;border-block-start-color:currentcolor;border-block-start-style:none;border-block-start-width:medium;border-bottom-left-radius:0;border-bottom-right-radius:0;border-collapse:separate;border-image-outset:0s;border-image-repeat:stretch;border-image-slice:100%;border-image-source:none;border-image-width:1;border-inline-end-color:currentcolor;border-inline-end-style:none;border-inline-end-width:medium;border-inline-start-color:currentcolor;border-inline-start-style:none;border-inline-start-width:medium;border-spacing:0;border-top-left-radius:0;border-top-right-radius:0;border:none;bottom:auto;-webkit-box-decoration-break:slice;box-decoration-break:slice;-webkit-box-shadow:none;box-shadow:none;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-column-break-after:auto;-moz-column-break-after:auto;break-after:auto;-webkit-column-break-before:auto;-moz-column-break-before:auto;break-before:auto;-webkit-column-break-inside:auto;-moz-column-break-inside:auto;break-inside:auto;caption-side:top;caret-color:auto;clear:none;clip:auto;-webkit-clip-path:none;clip-path:none;color:initial;-webkit-column-count:auto;-moz-column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule-color:currentcolor;-moz-column-rule-color:currentcolor;column-rule-color:currentcolor;-webkit-column-rule-style:none;-moz-column-rule-style:none;column-rule-style:none;-webkit-column-rule-width:medium;-moz-column-rule-width:medium;column-rule-width:medium;-webkit-column-span:none;-moz-column-span:none;column-span:none;-webkit-column-width:auto;-moz-column-width:auto;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;display:inline;empty-cells:show;-webkit-filter:none;filter:none;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:1;flex-shrink:1;-ms-flex-wrap:nowrap;flex-wrap:nowrap;float:none;font-family:initial;-webkit-font-feature-settings:normal;font-feature-settings:normal;-webkit-font-kerning:auto;font-kerning:auto;-webkit-font-language-override:normal;font-language-override:normal;font-size:medium;font-size-adjust:none;font-stretch:normal;font-style:normal;font-synthesis:weight style;font-variant:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-east-asian:normal;-webkit-font-variant-ligatures:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;font-weight:400;grid-auto-columns:auto;grid-auto-flow:row;grid-auto-rows:auto;grid-column-end:auto;grid-column-gap:0;grid-column-start:auto;grid-row-end:auto;grid-row-gap:0;grid-row-start:auto;grid-template-areas:none;grid-template-columns:none;grid-template-rows:none;height:auto;-webkit-hyphens:manual;-ms-hyphens:manual;hyphens:manual;image-orientation:0deg;image-rendering:auto;image-resolution:1dppx;ime-mode:auto;inline-size:auto;isolation:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;left:auto;letter-spacing:normal;line-break:auto;line-height:normal;list-style-image:none;list-style-position:outside;list-style-type:disc;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-start:0;margin-inline-start:0;margin:0;-webkit-mask-clip:border-box;mask-clip:border-box;-webkit-mask-composite:source-over;mask-composite:add;-webkit-mask-image:none;mask-image:none;mask-mode:match-source;-webkit-mask-origin:border-box;mask-origin:border-box;-webkit-mask-position:0 0;mask-position:0 0;-webkit-mask-repeat:repeat;mask-repeat:repeat;-webkit-mask-size:auto;mask-size:auto;mask-type:luminance;max-height:none;max-width:none;min-block-size:0;min-height:0;min-inline-size:0;min-width:0;mix-blend-mode:normal;-o-object-fit:fill;object-fit:fill;-o-object-position:50% 50%;object-position:50% 50%;offset-block-end:auto;offset-block-start:auto;offset-inline-end:auto;offset-inline-start:auto;opacity:1;-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;orphans:2;outline-color:initial;outline-offset:0;outline-style:none;outline-width:medium;overflow:visible;overflow-wrap:normal;overflow-x:visible;overflow-y:visible;-webkit-padding-after:0;padding-block-end:0;-webkit-padding-before:0;padding-block-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-padding-start:0;padding-inline-start:0;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:initial;resize:none;right:auto;ruby-align:space-around;ruby-merge:separate;ruby-position:over;scroll-behavior:auto;-ms-scroll-snap-coordinate:none;scroll-snap-coordinate:none;-ms-scroll-snap-destination:0 0;scroll-snap-destination:0 0;-ms-scroll-snap-points-x:none;scroll-snap-points-x:none;-ms-scroll-snap-points-y:none;scroll-snap-points-y:none;-ms-scroll-snap-type:none;scroll-snap-type:none;shape-image-threshold:0;shape-margin:0;shape-outside:none;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:initial;-moz-text-align-last:auto;text-align-last:auto;text-combine-upright:none;-webkit-text-decoration-color:currentcolor;text-decoration-color:currentcolor;-webkit-text-decoration-line:none;text-decoration-line:none;-webkit-text-decoration-style:solid;text-decoration-style:solid;-webkit-text-emphasis-color:currentcolor;text-emphasis-color:currentcolor;-webkit-text-emphasis-position:over;text-emphasis-position:over right;-webkit-text-emphasis-style:none;text-emphasis-style:none;text-indent:0;text-justify:auto;text-orientation:mixed;-o-text-overflow:clip;text-overflow:clip;text-rendering:auto;text-shadow:none;text-transform:none;text-underline-position:auto;top:auto;-ms-touch-action:auto;touch-action:auto;-webkit-transform:none;-ms-transform:none;transform:none;transform-box:border-box;-webkit-transform-origin:50% 50% 0;-ms-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:0s;-o-transition-duration:0s;transition-duration:0s;-webkit-transition-property:all;-o-transition-property:all;transition-property:all;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;will-change:auto;word-break:normal;word-spacing:normal;word-wrap:normal;-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb;z-index:auto;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none}#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-webkit-box-sizing:border-box;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;text-decoration:none}#smartplayer#smartplayer#smartplayer,#smartplayer#smartplayer#smartplayer div{display:block}@-webkit-keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}#smartplayer#smartplayer#smartplayer [data-balloon]:before{display:none}#smartplayer#smartplayer#smartplayer [data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}#smartplayer#smartplayer#smartplayer [data-balloon][data-balloon-pos=up]:after{margin-bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon.smartplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-50px 0 0 -50px;height:100px;width:100px;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot{-webkit-animation:smartplayer-loading-dot-fade .8s ease infinite;animation:smartplayer-loading-dot-fade .8s ease infinite;opacity:0;-webkit-transform-origin:4px 4px;-ms-transform-origin:4px 4px;transform-origin:4px 4px}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}@keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%;position:absolute;bottom:0;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller{position:absolute;bottom:0;left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons.smartplayer-comment-box{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-bar .smartplayer-played .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-highlight{display:block;width:8px;-webkit-transform:translateX(-4px);-ms-transform:translateX(-4px);transform:translateX(-4px);top:4px;height:40%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover .smartplayer-highlight-text{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-preview{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-time{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight .smartplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;-webkit-transition:opacity .1s ease-in-out;-o-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time.smartplayer-hidden{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.4);height:3px;-webkit-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons{height:38px;position:absolute;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box{display:none;position:absolute;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-icon{position:absolute;left:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-send-icon{position:absolute;right:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;-webkit-box-shadow:0 0 25px rgba(0,0,0,.3);box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box.smartplayer-comment-setting-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box input[type=radio]{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box label{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type .smartplayer-comment-setting-title{margin-bottom:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-clear{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-left .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right .smartplayer-icon{padding:8px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-badge,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time span{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon{width:40px;height:100%;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon .smartplayer-icon-content{-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:.8;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon:hover .smartplayer-icon-content{opacity:1}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-comment-icon{padding:10px 9px 9px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-setting-icon{padding-top:8.5px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-volume-icon{width:43px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon svg{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}@media (min-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;-webkit-transition:all .1s ease;-o-transition:all .1s ease;transition:all .1s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-icon{pointer-events:all}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-subtitle-btn{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box{position:absolute;right:0;bottom:50px;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div.smartplayer-setting-origin-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-narrow{width:70px;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-speed .smartplayer-setting-origin-panel{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-speed .smartplayer-setting-speed-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-speed-item{height:30px;padding:5px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item:hover,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full{display:inline-block;height:100%;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-list,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-mask{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item{height:25px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;line-height:25px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-comment{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input{max-height:0;max-width:0;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label{display:inline-block;position:relative;-webkit-box-shadow:#dfdfdf 0 0 0 0 inset;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:after{content:"";position:absolute;display:block;left:0;top:0;border-radius:15px;background:#fff;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.4);box-shadow:0 1px 3px rgba(0,0,0,.4);height:18px;width:18px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:after{left:12px}#smartplayer#smartplayer#smartplayer .smartplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}#smartplayer#smartplayer#smartplayer .smartplayer-logo img{max-width:100%;max-height:100%;background:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:12;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu.smartplayer-menu-show{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item{height:30px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;margin:0;display:inline-block;vertical-align:middle;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a:hover{text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle.smartplayer-subtitle-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:11;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-mask.smartplayer-mask-show{display:block}#smartplayer#smartplayer#smartplayer.smartplayer-playing:not(.smartplayer-fulled):not(.smartplayer-loading) .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap{position:absolute;font-size:0;width:100%;height:100%;top:0;left:0;right:0;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;display:none;-o-object-fit:contain;object-fit:contain;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-current{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-prepare{display:none}#smartplayer#smartplayer#smartplayer.smartplayer-initial .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplayer-fulled .smartplayer-video-wrap{background:#000}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-data{width:260px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action{position:absolute;top:0;left:0;width:100%;height:100%;padding:20px 20px 40px;-webkit-transform:initial;-ms-transform:initial;transform:none;display:block;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action.smartplayer-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action>*{position:absolute}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{top:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*{top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*{bottom:40px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*{left:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*{left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link{pointer-events:all;display:inline-block;padding:.65em .5em .5em;text-align:center;border-radius:5px;color:#fff;font-weight:700;line-height:1.2;-webkit-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-resume{position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999;background-color:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);padding:8px;cursor:auto}#smartplayer#smartplayer#smartplayer .smartplayer-resume__content{position:absolute;top:50%;left:0;right:0;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{margin:0 8px 16px;min-width:180px;font-size:2em;line-height:1.3;text-align:center;color:#fff;font-weight:700}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions{display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{background:rgba(0,0,0,0);padding:0;margin:4px;text-align:left;cursor:pointer;border:none;display:inline-table;color:#fff;min-width:180px;opacity:1;-webkit-transition:opacity .2s ease;-o-transition:opacity .2s ease;transition:opacity .2s ease}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{display:table}}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div:hover{opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{text-align:left;font-size:16px;line-height:1.1;font-weight:700;display:table-cell;vertical-align:middle;padding:0 1em 0 .6em}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:45px;height:45px;padding:5px;border:2px solid #fff;border-radius:50%;margin-right:8px;display:table-cell;vertical-align:middle}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:10px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:9px 9px 9px 7px}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{font-size:1.15em;margin-bottom:8px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{font-size:.9em}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:30px;height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:4px 4px 4px 2px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:5px}}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:150px;height:150px;border-radius:75px;padding-left:20px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.9;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay.smartplayer-hidden{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay svg{cursor:pointer}@media (max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:70px;height:70px;padding-left:13px;padding-right:6px}}#smartplayer#smartplayer#smartplayer.smartplayer-smart-auto-play .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content{display:none;position:absolute;top:0;right:0;font-size:12px;overflow:hidden;pointer-events:none;z-index:10000;max-width:100%}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box{background:rgba(0,0,0,.5);padding:2px 6px;border-bottom-left-radius:8px;-webkit-transform:translateX(91%);-ms-transform:translateX(91%);transform:translateX(91%);-webkit-transition:-webkit-transform .3s .5s;transition:-webkit-transform .3s .5s;-o-transition:transform .3s .5s;transition:transform .3s .5s;transition:transform .3s .5s,-webkit-transform .3s .5s;pointer-events:auto;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box:hover{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .3s 0s;transition:-webkit-transform .3s 0s;-o-transition:transform .3s 0s;transition:transform .3s 0s;transition:transform .3s 0s,-webkit-transform .3s 0s}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon{height:12px;width:12px;display:inline-block;margin-right:6px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon svg{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__text{color:#fff;font-size:12px;line-height:12px;white-space:nowrap}#smartplayer#smartplayer#smartplayer.smartplayer-offline .smartplayer-offline-content{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar{left:0;width:0;bottom:0;height:10px;opacity:.8;z-index:100005;position:absolute}#smartplayer#smartplayer#smartplayer .smartplayer-blocked{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#202020;-webkit-box-shadow:inset 0 0 160px 0 #000;box-shadow:inset 0 0 160px 0 #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo{position:absolute;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);height:80%;opacity:.035}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg path{fill:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__content{top:50%;left:50%;width:80%;position:absolute;max-width:32em;text-align:center;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{color:#ccc;text-align:center;font-size:1.2em;text-shadow:0 2px 0 #000,0 3px 3px #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{color:#fff;padding:.7em 1.5em;display:inline-block;font-size:1em;margin:1.2em auto 0;background:#f1582d;font-weight:600;border-radius:5px;text-decoration:none;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;-o-transition:transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}@media (max-width:480px){#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{font-size:1em}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{font-size:.8em}}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-finish,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-pause,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-start{position:absolute;top:0;display:none;width:100%;height:100%;background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-initial .smartplayer-image-start{z-index:9;display:block;background-color:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-paused:not(.smartplayer-finished) .smartplayer-image-pause{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-finished .smartplayer-image-finish{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail{position:absolute;top:0;display:none;width:100%;height:100%;background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;pointer-events:none;cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tc,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tl,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tr{top:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cc,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cl,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cr{top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--bc,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--bl,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--br{bottom:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--bl,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cl,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tl{left:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--bc,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cc,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tc{left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cc{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--br,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--cr,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--tr{right:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--link{position:absolute;display:inline-block;pointer-events:all;padding:.5em;color:#fff;font-size:1rem;font-weight:700;line-height:1.2;text-align:center;border-radius:5px;text-decoration:none;-webkit-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--md{font-size:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-thumbnail--lg{font-size:1.5rem}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-paused .smartplayer-thumbnail--ready{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-smart-auto-play .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay{cursor:pointer;z-index:9999;position:absolute;top:0;opacity:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay *{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplayer-show-smart-auto-play .smartplayer-smartplay{opacity:1}#smartplayer#smartplayer#smartplayer.smartplayer-smart-auto-play:not(.smartplayer-show-smart-auto-play) .smartplayer-loading-icon{opacity:0}#smartplayer#smartplayer#smartplayer.smartplay{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1;width:100%;max-width:100%;max-height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-initial{cursor:pointer!important}#smartplayer#smartplayer#smartplayer.smartplay svg{width:100%;height:100%}#smartplayer#smartplayer#smartplayer.smartplay svg circle,#smartplayer#smartplayer#smartplayer.smartplay svg path{fill:#fff}#smartplayer#smartplayer#smartplayer.smartplay:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0!important;-webkit-transform:translate(0);transform:translate(0)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-bar-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-setting-loop,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-setting-speed,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-time{display:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-arrow .smartplayer-icon{margin:0 -3px}@media (min-width:900px){#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller-mask{opacity:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller-mask{opacity:1}}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-loading .smartplayer-bezel .smartplayer-loading-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller{cursor:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller-mask{opacity:0;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller-mask{opacity:1}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled{position:fixed!important;z-index:100000;left:0;top:0;width:100%!important;height:100%!important;padding:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap .smartplayer-video-current{height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{position:static;display:inline-block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-bar-time,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile.smartplayer-hide-controller .smartplayer-mobile-play,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-mobile-play{display:none}.smartplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer:not(.smartplayer-fulled){width:100%;position:relative;padding:56.25% 0 0}#smartplayer#smartplayer#smartplayer .smartplayer-content{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-opacity-0{opacity:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-in-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-icon{display:none}',""]),e.a=o},function(t,e){var r,a,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(t){a=o}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var t=s(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";var a=r(7),n=r(1);e.a=function(t,e,r){var i=(t=t||{}).random||(t.rng||a.a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=i[o];return e}return Object(n.a)(i)}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return t.apply(e,r)}}},function(t,e,r){"use strict";var a=r(0);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(a.isURLSearchParams(e))i=e.toString();else{var o=[];a.forEach(e,(function(t,e){null!=t&&(a.isArray(t)?e+="[]":t=[t],a.forEach(t,(function(t){a.isDate(t)?t=t.toISOString():a.isObject(t)&&(t=JSON.stringify(t)),o.push(n(e)+"="+n(t))})))})),i=o.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var a=r(0),n=r(65),i={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(s=r(17)),s),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),a.forEach(["post","put","patch"],(function(t){l.headers[t]=a.merge(i)})),t.exports=l}).call(this,r(11))},function(t,e,r){"use strict";var a=r(0),n=r(66),i=r(68),o=r(14),s=r(69),l=r(72),u=r(73),c=r(18);t.exports=function(t){return new Promise((function(e,r){var d=t.data,f=t.headers;a.isFormData(d)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(p+":"+m)}var y=s(t.baseURL,t.url);if(h.open(t.method.toUpperCase(),o(y,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in h?l(h.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:a,config:t,request:h};n(e,r,i),h=null}},h.onabort=function(){h&&(r(c("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){r(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(c(e,t,"ECONNABORTED",h)),h=null},a.isStandardBrowserEnv()){var v=(t.withCredentials||u(y))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in h&&a.forEach(f,(function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete f[e]:h.setRequestHeader(e,t)})),a.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),r(t),h=null)})),d||(d=null),h.send(d)}))}},function(t,e,r){"use strict";var a=r(67);t.exports=function(t,e,r,n,i){var o=new Error(t);return a(o,e,r,n,i)}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(t,e){return a.isPlainObject(t)&&a.isPlainObject(e)?a.merge(t,e):a.isPlainObject(e)?a.merge({},e):a.isArray(e)?e.slice():e}function u(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(t[n],e[n])}a.forEach(n,(function(t){a.isUndefined(e[t])||(r[t]=l(void 0,e[t]))})),a.forEach(i,u),a.forEach(o,(function(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(void 0,e[n])})),a.forEach(s,(function(a){a in e?r[a]=l(t[a],e[a]):a in t&&(r[a]=l(void 0,t[a]))}));var c=n.concat(i).concat(o).concat(s),d=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return a.forEach(d,u),r}},function(t,e,r){"use strict";function a(t){this.message=t}a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},a.prototype.__CANCEL__=!0,t.exports=a},function(t,e,r){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),o=[];function s(t){for(var e=-1,r=0;r<o.length;r++)if(o[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},a=[],n=0;n<t.length;n++){var i=t[n],l=e.base?i[0]+e.base:i[0],u=r[l]||0,c="".concat(l," ").concat(u);r[l]=u+1;var d=s(c),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:c,updater:y(f,e),references:1}),a.push(c)}return a}function u(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var n=r.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var o=i(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function f(t,e,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,n);else{var i=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function h(t,e,r){var a=r.css,n=r.media,i=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var p=null,m=0;function y(t,e){var r,a,n;if(e.singleton){var i=m++;r=p||(p=u(e)),a=f.bind(null,r,i,!1),n=f.bind(null,r,i,!0)}else r=u(e),a=h.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<r.length;a++){var n=s(r[a]);o[n].references--}for(var i=l(t,e),u=0;u<r.length;u++){var c=s(r[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}r=i}}}},function(t,e,r){"use strict";var a=r(6),n=r.n(a)()((function(t){return t[1]}));n.push([t.i,':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{opacity:0;pointer-events:none;-webkit-transition:all .18s ease-out .18s;-o-transition:all .18s ease-out .18s;transition:all .18s ease-out .18s;text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;position:absolute;white-space:nowrap;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-top:5px solid var(--balloon-color);opacity:0;pointer-events:none;-webkit-transition:all .18s ease-out .18s;-o-transition:all .18s ease-out .18s;transition:all .18s ease-out .18s;content:"";position:absolute;z-index:10}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{-webkit-transition:none;-o-transition:none;transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after{-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after{-webkit-transform:translate(0);-ms-transform:translate(0);transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{-webkit-transform:translate(0);-ms-transform:translate(0);transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;-webkit-transform-origin:top;-ms-transform-origin:top;transform-origin:top;-webkit-transform:translateY(var(--balloon-move));-ms-transform:translateY(var(--balloon-move));transform:translateY(var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;-webkit-transform:translate(-50%,var(--balloon-move));-ms-transform:translate(-50%,var(--balloon-move));transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;-webkit-transform:translateY(calc(var(--balloon-move)*-1));-ms-transform:translateY(calc(var(--balloon-move)*-1));transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-bottom:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;-webkit-transform:translate(-50%,calc(var(--balloon-move)*-1));-ms-transform:translate(-50%,calc(var(--balloon-move)*-1));transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;-webkit-transform:translate(var(--balloon-move),-50%);-ms-transform:translate(var(--balloon-move),-50%);transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-left:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;-webkit-transform:translate(calc(var(--balloon-move)*-1),-50%);-ms-transform:translate(calc(var(--balloon-move)*-1),-50%);transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid rgba(0,0,0,0);border-right:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}',""]),e.a=n},function(t,e,r){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))}},function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(e){o(t,e)}),(function(r){n[t]={status:"rejected",reason:r},0==--i&&e(n)}))}n[t]={status:"fulfilled",value:r},0==--i&&e(n)}for(var s=0;s<n.length;s++)o(s,n[s])}))}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(t,e){t.exports='<svg class="lds-eclipse" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M68.095 59.578A20 20 0 0031.14 44.27a22 20-67.5 0136.955 15.308" fill="#fff"><animateTransform attributeName="transform" begin="0s" calcMode="linear" dur="0.8s" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="0 50 51;360 50 51"></animateTransform></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M21.5,1.385,13.918,8.232a.25.25,0,0,1-.418-.185V2.521A1.5,1.5,0,0,0,11,1.385L.505,10.863a1.541,1.541,0,0,0,0,2.273L11,22.614a1.5,1.5,0,0,0,2.5-1.136V15.953a.25.25,0,0,1,.418-.185L21.5,22.614A1.5,1.5,0,0,0,24,21.478V2.521A1.5,1.5,0,0,0,21.5,1.385Z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M23.5,10.865,13,1.384a1.5,1.5,0,0,0-2.5,1.138V8.047a.25.25,0,0,1-.418.186L2.5,1.384A1.5,1.5,0,0,0,0,2.522V21.479a1.5,1.5,0,0,0,2.5,1.136l7.583-6.847a.25.25,0,0,1,.418.186v5.525A1.5,1.5,0,0,0,13,22.615l10.5-9.479A1.539,1.539,0,0,0,23.5,10.865Z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.567 1.258C10.4159 1.34378 8.33932 2.06916 6.60269 3.34139C4.86607 4.61363 3.54834 6.37489 2.818 8.4C2.79854 8.45424 2.76093 8.50009 2.71155 8.5298C2.66217 8.5595 2.60404 8.57123 2.547 8.563L0.858001 8.309C0.765439 8.29713 0.671392 8.31069 0.58595 8.34821C0.500507 8.38574 0.426892 8.44582 0.373001 8.522C0.320143 8.59948 0.290143 8.69027 0.28643 8.78399C0.282716 8.87771 0.305439 8.97058 0.352001 9.052L3.031 13.752C3.06906 13.8186 3.12192 13.8755 3.18549 13.9184C3.24906 13.9612 3.32164 13.9889 3.39762 13.9993C3.4736 14.0096 3.55094 14.0023 3.62366 13.978C3.69638 13.9537 3.76253 13.913 3.817 13.859L7.587 10.113C7.65301 10.0476 7.69952 9.9652 7.72129 9.87489C7.74307 9.78459 7.73926 9.69 7.71029 9.60175C7.68132 9.51349 7.62834 9.43504 7.55728 9.37521C7.48622 9.31538 7.3999 9.27652 7.308 9.263L5.593 9.007C5.5547 9.00143 5.51822 8.98705 5.48643 8.96498C5.45464 8.94292 5.4284 8.91377 5.40979 8.87984C5.39118 8.84591 5.3807 8.80813 5.37917 8.76946C5.37765 8.73079 5.38512 8.69229 5.401 8.657C5.99665 7.30842 6.94242 6.14385 8.14013 5.28421C9.33783 4.42457 10.7438 3.9012 12.2121 3.76843C13.6804 3.63565 15.1574 3.89832 16.4899 4.52916C17.8224 5.16 18.9617 6.13602 19.7896 7.35588C20.6176 8.57574 21.1038 9.99497 21.198 11.4662C21.2922 12.9375 20.9909 14.4071 20.3253 15.7226C19.6597 17.0381 18.6541 18.1514 17.4129 18.947C16.1717 19.7426 14.7402 20.1915 13.267 20.247C12.9355 20.253 12.6199 20.3904 12.3897 20.629C12.1595 20.8677 12.0335 21.188 12.0395 21.5195C12.0455 21.851 12.1829 22.1666 12.4215 22.3968C12.6602 22.627 12.9805 22.753 13.312 22.747H13.359C14.7758 22.7035 16.1699 22.3803 17.4613 21.796C18.7527 21.2117 19.9157 20.3778 20.8836 19.3422C21.8515 18.3067 22.605 17.09 23.1009 15.7622C23.5967 14.4343 23.8251 13.0215 23.7729 11.6051C23.7207 10.1886 23.3889 8.79645 22.7967 7.5087C22.2044 6.22096 21.3633 5.06304 20.3218 4.10158C19.2804 3.14012 18.0591 2.39409 16.7282 1.90642C15.3973 1.41875 13.9831 1.19906 12.567 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.433 1.258C13.5841 1.34378 15.6607 2.06916 17.3973 3.34139C19.1339 4.61363 20.4517 6.37489 21.182 8.4C21.2015 8.45424 21.2391 8.50009 21.2885 8.5298C21.3378 8.5595 21.396 8.57123 21.453 8.563L23.142 8.309C23.2346 8.29713 23.3286 8.31069 23.4141 8.34821C23.4995 8.38574 23.5731 8.44582 23.627 8.522C23.6799 8.59948 23.7099 8.69027 23.7136 8.78399C23.7173 8.87771 23.6946 8.97058 23.648 9.052L20.969 13.752C20.9309 13.8186 20.8781 13.8755 20.8145 13.9184C20.7509 13.9612 20.6784 13.9889 20.6024 13.9993C20.5264 14.0096 20.4491 14.0023 20.3763 13.978C20.3036 13.9537 20.2375 13.913 20.183 13.859L16.413 10.113C16.347 10.0476 16.3005 9.9652 16.2787 9.87489C16.2569 9.78459 16.2607 9.69 16.2897 9.60175C16.3187 9.51349 16.3717 9.43504 16.4427 9.37521C16.5138 9.31538 16.6001 9.27652 16.692 9.263L18.407 9.007C18.4453 9.00143 18.4818 8.98705 18.5136 8.96498C18.5454 8.94292 18.5716 8.91377 18.5902 8.87984C18.6088 8.84591 18.6193 8.80813 18.6208 8.76946C18.6224 8.73079 18.6149 8.69229 18.599 8.657C18.0034 7.30842 17.0576 6.14385 15.8599 5.28421C14.6622 4.42457 13.2562 3.9012 11.7879 3.76843C10.3196 3.63565 8.84257 3.89832 7.51008 4.52916C6.17759 5.16 5.03826 6.13602 4.21035 7.35588C3.38245 8.57574 2.89616 9.99497 2.80198 11.4662C2.70779 12.9375 3.00914 14.4071 3.67474 15.7226C4.34034 17.0381 5.34592 18.1514 6.58709 18.947C7.82826 19.7426 9.25977 20.1915 10.733 20.247C11.0645 20.253 11.3801 20.3904 11.6103 20.629C11.8405 20.8677 11.9665 21.188 11.9605 21.5195C11.9545 21.851 11.8171 22.1666 11.5785 22.3968C11.3398 22.627 11.0195 22.753 10.688 22.747H10.641C9.22425 22.7035 7.83008 22.3803 6.53871 21.796C5.24733 21.2117 4.08425 20.3778 3.11639 19.3422C2.14853 18.3067 1.39498 17.09 0.899117 15.7622C0.403251 14.4343 0.17485 13.0215 0.22706 11.6051C0.27927 10.1886 0.611059 8.79645 1.20333 7.5087C1.79561 6.22096 2.63668 5.06304 3.67815 4.10158C4.71963 3.14012 5.94094 2.39409 7.27183 1.90642C8.60271 1.41875 10.0169 1.19906 11.433 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32"><g fill="#000" clip-path="url(#a)"><path d="M16 2.9 2.59 29.624h26.82L16 2.899zM16 0c.69 0 1.38.465 1.903 1.395l13.659 27.223c1.046 1.86.156 3.382-1.979 3.382H2.417C.283 32-.607 30.478.44 28.617L14.098 1.395C14.62.465 15.31 0 16 0z"></path><path d="M14 25a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm2-4a2 2 0 0 0 2-2v-6a2 2 0 1 0-4 0v6a2 2 0 0 0 2 2z"></path></g><defs><clipPath id="a"><path d="M0 0h32v32H0z" fill="#fff" transform="matrix(-1 0 0 1 32 0)"></path></clipPath></defs></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 13 14"><path d="M11.48 4.541c-.688-.377-1.36-.781-2.04-1.173l-2.28-1.32c-.873-.504-1.753-.997-2.616-1.516-.577-.347-1.178-.556-1.858-.53-.373.015-.384.01-.384.393V10.88c0 .434.17.628.593.708.221.041.412-.045.597-.141.166-.087.321-.192.483-.286l4.62-2.667c.53-.306 1.066-.6 1.589-.917.362-.22.444-.707.197-1.016-.097-.12-.229-.196-.36-.272A3429.1 3429.1 0 0 0 7.176 4.65c-.91-.524-1.823-1.045-2.732-1.572-.134-.078-.198-.07-.197.1.002.324.002.649-.002.973a.255.255 0 0 0 .143.245c.358.201.714.405 1.07.61 1.06.61 2.12 1.22 3.179 1.833.182.105.178.175-.006.282-.871.505-1.743 1.01-2.614 1.517l-2.353 1.366c-.167.097-.215.073-.229-.114-.003-.044-.002-.087-.002-.13V1.805c0-.08-.001-.16.006-.238.022-.257.062-.28.28-.155.948.548 1.893 1.098 2.84 1.645 1.465.846 2.933 1.686 4.395 2.537.355.207.592.526.697.926.21.809-.106 1.521-.842 1.935-.401.225-.798.46-1.197.69a6910.143 6910.143 0 0 1-5.883 3.414c-.42.243-.874.312-1.333.173-.746-.227-1.174-.84-1.174-1.627 0-2.694.002-5.39-.003-8.084 0-.367.027-.719.225-1.039a.422.422 0 0 0 .047-.23c0-.375.001-.749-.001-1.124 0-.068.026-.156-.059-.191-.066-.027-.127.021-.176.06-.368.296-.685.631-.91 1.054C.076 2.052.02 2.598.021 3.144c.009 2.73-.076 5.462.04 8.19.05 1.2.809 2.105 1.898 2.483.283.098.586.207.882.178.522-.05 1.03-.168 1.497-.445.934-.555 1.883-1.086 2.824-1.63 1.39-.801 2.779-1.606 4.17-2.408.48-.277.9-.61 1.182-1.105.77-1.35.311-3.129-1.036-3.866z" fill="#000"></path></svg>'},function(t,e,r){var a=r(9);t.exports=function(t){"use strict";var e="",r=(t=t||{}).options,n=a.$escape,i=t.icons,o=t.video,s=a.$each,l=(t.$value,t.$index,t.tran);return e+='<div class="smartplayer-mask"></div>\n<div class="smartplayer-video-wrap">\n    ',r.logo&&r.displays.logo&&(e+='\n    <div class="smartplayer-logo">\n        <img src="',e+=n(r.logo),e+='">\n    </div>\n    '),e+='\n    <div class="smartplayer-subtitle"></div>\n    <div class="smartplayer-bezel">\n        <span class="smartplayer-bezel-icon"></span>\n        <span class="smartplayer-loading-icon">',e+=i.loading,e+="</span>\n    </div>\n</div>\n\n",o.pic&&(e+='\n<div class="smartplayer-image-start smartplayer-opacity-0" style="background-image: url(',e+=n(o.pic),e+=");",o.pic_background&&(e+="background-color: ",e+=n(o.pic_background)),e+='"></div>\n'),e+="\n\n",o.pic_pause&&(e+='\n<div class="smartplayer-image-pause" style="background-image: url(',e+=n(o.pic_pause),e+=");",o.pic_background&&(e+="background-color: ",e+=n(o.pic_background)),e+='"></div>\n'),e+="\n\n",o.pic_finish&&(e+='\n<div class="smartplayer-image-finish" style="background-image: url(',e+=n(o.pic_finish),e+=");",o.pic_background&&(e+="background-color: ",e+=n(o.pic_background)),e+='"></div>\n'),e+="\n\n",r.thumbs.length>0&&(e+='\n<div class="smartplayer-thumbnail"></div>\n<style>',s(r.thumbs,(function(t,r){e+="\n",t.has_button&&(e+="#smartplayer#smartplayer#smartplayer #",e+=n(t.id),e+=" {background-color: ",e+=n(t.button_background_color),e+=";color:",e+=n(t.button_text_color),e+=";}\n#smartplayer#smartplayer#smartplayer #",e+=n(t.id),e+=":hover {background-color: ",e+=n(t.button_background_hover_color),e+=";color:",e+=n(t.button_text_color),e+=";}"),e+="\n"})),e+="</style>\n"),e+='\n\n<div class="smartplayer-controller-mask"></div>\n<div class="smartplayer-controller"',r.fake_bar&&(e+=' style="margin-bottom: ',e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height+43:53),e+='px"'),e+='>\n    <div class="smartplayer-icons smartplayer-icons-left">\n        ',r.displays.play_pause&&(e+='\n        <button class="smartplayer-icon smartplayer-play-icon" aria-label="play">\n            <span class="smartplayer-icon-content">',e+=i.play,e+="</span>\n        </button>\n        "),e+="\n\n        ",r.displays.backward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-rewind-icon" aria-label="rewind">\n                <span class="smartplayer-icon-content">',e+=i.seekRewind,e+="</span>\n            </button>\n        "),e+="\n        ",r.displays.forward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-forward-icon" aria-label="forward">\n                <span class="smartplayer-icon-content">',e+=i.seekForward,e+="</span>\n            </button>\n        "),e+="\n\n        ",r.displays.volume&&(e+='\n        <div class="smartplayer-volume">\n            <button class="smartplayer-icon smartplayer-volume-icon" aria-label="volume">\n                <span class="smartplayer-icon-content">',e+=i.volumeDown,e+="</span>\n            </button>\n\n            ",r.displays.volume_bar&&(e+='\n            <div class="smartplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="smartplayer-volume-bar">\n                    <div class="smartplayer-volume-bar-inner" style="background: ',e+=n(r.theme),e+=';">\n                        <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n                    </div>\n                </div>\n            </div>\n            '),e+="\n        </div>\n        "),e+="\n\n        ",r.displays.time&&(e+='\n        <span class="smartplayer-time">\n            <span class="smartplayer-ptime">0:00</span> /\n            <span class="smartplayer-dtime">0:00</span>\n        </span>\n        '),e+="\n        ",r.live&&(e+='\n        <span class="smartplayer-live-badge"><span class="smartplayer-live-dot" style="background: ',e+=n(r.theme),e+=';"></span>',e+=n(l("Live")),e+="</span>\n        "),e+='\n    </div>\n    <div class="smartplayer-icons smartplayer-icons-right">\n        ',r.video.quality&&(e+='\n        <div class="smartplayer-quality">\n            <button class="smartplayer-icon smartplayer-quality-icon" aria-label="quality">',e+=n(r.video.quality[r.video.defaultQuality].name),e+='</button>\n            <div class="smartplayer-quality-mask">\n                <div class="smartplayer-quality-list">\n                ',s(r.video.quality,(function(t,r){e+='\n                    <div class="smartplayer-quality-item" data-index="',e+=n(r),e+='">',e+=n(t.name),e+="</div>\n                "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n        ",r.screenshot&&(e+='\n        <div class="smartplayer-icon smartplayer-camera-icon" data-balloon="',e+=n(l("Screenshot")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.camera,e+="</span>\n        </div>\n        "),e+="\n        ",r.airplay&&(e+='\n        <div class="smartplayer-icon smartplayer-airplay-icon" data-balloon="',e+=n(l("AirPlay")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.airplay,e+="</span>\n        </div>\n        "),e+="\n        ",r.subtitle&&r.displays.subtitleSettings&&(e+='\n        <div class="smartplayer-subtitle-btn">\n            <button class="smartplayer-icon smartplayer-subtitle-icon" aria-label="subtitle" data-balloon="',e+=n(l("Hide subtitle")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.subtitle,e+="</span>\n            </button>\n        </div>\n        "),e+="\n\n        ",r.displays.settings&&(e+='\n        <div class="smartplayer-setting">\n            <button class="smartplayer-icon smartplayer-setting-icon" aria-label="setting" data-balloon="',e+=n(l("Setting")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.setting,e+='</span>\n            </button>\n            <div class="smartplayer-setting-box">\n                <div class="smartplayer-setting-origin-panel">\n                    <div class="smartplayer-setting-item smartplayer-setting-speed">\n                        <span class="smartplayer-label">',e+=n(l("Speed")),e+='</span>\n                        <div class="smartplayer-toggle">',e+=i.right,e+='</div>\n                    </div>\n                    <div class="smartplayer-setting-item smartplayer-setting-loop">\n                        <span class="smartplayer-label">',e+=n(l("Loop")),e+='</span>\n                        <div class="smartplayer-toggle">\n                            <input class="smartplayer-toggle-setting-input" type="checkbox" name="smartplayer-toggle">\n                            <label for="smartplayer-toggle"></label>\n                        </div>\n                    </div>\n                </div>\n                <div class="smartplayer-setting-speed-panel">\n                    ',s(r.playbackSpeed,(function(t,r){e+='\n                        <div class="smartplayer-setting-speed-item" data-speed="',e+=n(t),e+='">\n                            <span class="smartplayer-label">',e+=n(1===t?l("Normal"):t),e+="</span>\n                        </div>\n                    "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n\n        ",r.displays.fullscreen&&(e+='\n        <div class="smartplayer-full">\n            <button class="smartplayer-icon smartplayer-full-in-icon" aria-label="fullscreen" data-balloon="',e+=n(l("Web full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.fullWeb,e+='</span>\n            </button>\n            <button class="smartplayer-icon smartplayer-full-icon" aria-label="fullscreen" data-balloon="',e+=n(l("Full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.full,e+="</span>\n            </button>\n        </div>\n        "),e+="\n    </div>\n    ",r.displays.seekbar&&(e+='\n    <div class="smartplayer-bar-wrap">\n        ',r.displays.seekbar_time&&(e+='\n        <div class="smartplayer-bar-time smartplayer-hidden">00:00</div>\n        '),e+='\n        <div class="smartplayer-bar-preview"></div>\n        <div class="smartplayer-bar">\n            <div class="smartplayer-loaded" style="width: 0;"></div>\n            <div class="smartplayer-played" style="width: 0; background: ',e+=n(r.theme),e+='">\n                <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n            </div>\n        </div>\n    </div>\n    '),e+='\n</div>\n\n<div class="smartplayer-info-panel smartplayer-info-panel-hide">\n    <div class="smartplayer-info-panel-close">[x]</div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-version">\n        <span class="smartplayer-info-panel-item-title">Player version</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-fps">\n        <span class="smartplayer-info-panel-item-title">Player FPS</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-type">\n        <span class="smartplayer-info-panel-item-title">Video type</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-url">\n        <span class="smartplayer-info-panel-item-title">Video url</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-resolution">\n        <span class="smartplayer-info-panel-item-title">Video resolution</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-duration">\n        <span class="smartplayer-info-panel-item-title">Video duration</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n</div>\n',"smartplay"!=r.autoplay||r.smart_autoplay_elements&&r.smart_autoplay_elements.length||(e+='\n<div class="smartplayer-smartplay">\n',e+=r.smartplay,e+="\n</div>\n"),e+="\n\n","smartplay"==r.autoplay&&r.smart_autoplay_elements&&r.smart_autoplay_elements.length&&(e+='\n    <div class="smartplayer-smartplay smartplayer-elements-container" style="position:absolute;transform-origin:top left;width: ',e+=r.video.width,e+="px;height: ",e+=r.video.height,e+='px;">\n        ',s(r.smart_autoplay_elements,(function(t,r){e+="\n            ","text"===t.type&&(e+='\n                <span id="',e+=n(t.id),e+='" class="smartplayer-autoplay-text-element smartplayer-smart-element" style="display:block;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;position:absolute;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;font-size:",e+=n(t.properties.size),e+="px;color:",e+=n(t.properties.color),e+="; ",t.properties.align&&(e+="text-align:",e+=n(t.properties.align),e+=";"),e+="font-weight:",e+=n(t.properties.weight),e+=";",t.properties.opacity&&(e+="opacity:",e+=n(t.properties.opacity),e+=";"),e+='">',e+=n(t.properties.value),e+="</span>\n            "),e+="\n            ","image"===t.type&&(e+='\n                <img id="',e+=n(t.id),e+='" alt="',e+=n(t.properties.alt),e+='" src=',e+=n(t.properties.src),e+=' class="smartplayer-autoplay-img-element smartplayer-smart-element" style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;",t.properties.opacity&&(e+="opacity:",e+=n(t.properties.opacity),e+=";"),e+='" />\n            '),e+="\n            ","box"===t.type&&(e+='\n                <div id="',e+=n(t.id),e+='" class="smartplayer-autoplay-box-element smartplayer-smart-element" style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;border-width:",e+=n(t.properties.border.size),e+="px;border-color:",e+=n(t.properties.border.color),e+=";border-radius:",e+=n(t.properties.radius),e+="px;border-style:",e+=n(t.properties.border.type),e+=";background-color:",e+=n(t.properties.color),e+="; ",t.properties.opacity&&(e+=" opacity:",e+=n(t.properties.opacity),e+=";"),e+='" ></div>\n            '),e+="\n        "})),e+="    \n    </div>\n"),e+="\n",r.displays.big_play&&(e+="\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-bigplay {\n    background-color: ",e+=n(r.theme?r.theme:"rgba(0, 0, 0, 0.6)"),e+=';\n}\n</style>\n<button class="smartplayer-bigplay" aria-label="play">\n',e+=i.play,e+="\n</button>\n"),e+='\n<div class="smartplayer-menu">\n    ',s(r.contextmenu,(function(t,r){e+='\n        <div class="smartplayer-menu-item">\n            <a',t.link&&(e+=' target="_blank"'),e+=' href="',e+=n(t.link||"javascript:void(0);"),e+='">',e+=n(l(t.text)),e+="</a>\n        </div>\n    "})),e+='\n</div>\n<div class="smartplayer-notice"></div>\n<button class="smartplayer-mobile-play" aria-label="play">\n    ',e+=i.play,e+="\n</button>\n\n",r.callAction&&r.callAction.length>0&&(e+="\n<style>",s(r.callAction,(function(t,r){e+="\n",!t.colors||null!=t.type&&"inner_button"!=t.type||(e+="#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link {background-color: ",e+=n(t.colors.background),e+=";color:",e+=n(t.colors.text),e+=";}\n#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link:hover {background-color: ",e+=n(t.colors.background_hover),e+=";color:",e+=n(t.colors.text_hover),e+=";}"),e+="\n"})),e+="</style>\n",s(r.callAction,(function(t,r){e+="\n  ",null!=t.type&&"inner_button"!=t.type||(e+='\n    <div class="smartplayer-call-action smartplayer-hide smartplayer-call-action__',e+=n(t.position),e+=" ",e+=n(t.id),e+='" id="',e+=n(t.id),e+='">\n        <a href="',e+=n(t.link),e+='" target="_parent" class="smartplayer-call-action--link" title="',e+=n(t.btnText),e+='">\n            ',e+=n(t.btnText),e+="\n        </a>\n    </div>\n  "),e+="\n"})),e+="\n"),e+='\n\n<div class="smartplayer-offline-content">\n  <div class="smartplayer-offline-content__box">\n    <span class="smartplayer-offline-content__icon">',e+=i.warning,e+='</span><span class="smartplayer-offline-content__text">Identificamos um problema de conexão!</span>\n  </div>\n</div>\n\n',r.fake_bar&&(e+='\n<div class="smartplayer-fake-bar"></div>\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar {\n  background-color: ',e+=n(r.theme?r.theme:"rgba(0, 0, 0, 0.6)"),e+=";\n  height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;\n}\n</style>\n"),e+="\n\n",r.resume&&(e+='\n<div class="smartplayer-resume" style="display:none;">\n    <style>\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume {\n        background-color: ',e+=n(r.resume_options&&r.resume_options.background_color?r.resume_options.background_color:"rgba(0, 0, 0, 0.6)"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__title,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div span {\n        color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon {\n        border-color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg * {\n        fill: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color+" !important":"#FFFFFF !important"),e+=';\n    }\n    </style>\n    <div class="smartplayer-resume__content">\n      <div class="smartplayer-resume__title">\n        ',e+=n(r.resume_options&&r.resume_options.title?r.resume_options.title:"Você já começou a assistir isso"),e+='\n      </div>\n      <div class="smartplayer-resume__actions">\n        <div class="smartplayer-resume__play">\n          <span class="smartplayer-resume__icon">',e+=i.play,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.play?r.resume_options.play:"Continuar assistindo"),e+='</span>\n        </div>\n        <div class="smartplayer-resume__rewind">\n          <span class="smartplayer-resume__icon">',e+=i.synchronizeRewind,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.replay?r.resume_options.replay:"Assistir do início"),e+="</span>\n        </div>\n      </div>\n    </div>\n</div>\n"),e+="\n"}},function(t){t.exports=JSON.parse('{"a":"0.2.1"}')},function(t,e,r){(function(r){var a,n,i,o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){return function t(e,r,a){function n(o,s){if(!r[o]){if(!e[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,(function(t){var r=e[o][1][t];return n(r||t)}),u,u.exports,t,e,r,a)}return r[o].exports}for(var i=!1,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(t,e,a){(function(t){"use strict";var r,a,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var i=0,o=new n(c),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,r=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;a=!0;for(var r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length}a=!1}e.exports=function(t){1!==u.push(t)||a||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var a=t(1);function n(){}var i={},o=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==n&&p(this,t)}function d(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){a((function(){var a;try{a=e(r)}catch(e){return i.reject(t,e)}a===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,a)}))}function h(t){var e=t&&t.then;if(t&&("object"===s(t)||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function a(e){r||(r=!0,i.reject(t,e))}function n(e){r||(r=!0,i.resolve(t,e))}var o=m((function(){e(n,a)}));"error"===o.status&&a(o.value)}function m(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===l||"function"!=typeof e&&this.state===o)return this;var r=new this.constructor(n);return this.state!==u?f(r,this.state===l?t:e,this.outcome):this.queue.push(new d(r,t,e)),r},d.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){i.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=m(h,e);if("error"===r.status)return i.reject(t,r.value);var a=r.value;if(a)p(t,a);else{t.state=l,t.outcome=e;for(var n=-1,o=t.queue.length;++n<o;)t.queue[n].callFulfilled(e)}return t},i.reject=function(t,e){t.state=o,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:i.resolve(new this(n),t)},c.reject=function(t){var e=new this(n);return i.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,a=!1;if(!r)return this.resolve([]);for(var o=new Array(r),s=0,l=-1,u=new this(n);++l<r;)c(t[l],l);return u;function c(t,n){e.resolve(t).then((function(t){o[n]=t,++s!==r||a||(a=!0,i.resolve(u,o))}),(function(t){a||(a=!0,i.reject(u,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,a=!1;if(!r)return this.resolve([]);for(var o,s=-1,l=new this(n);++s<r;)o=t[s],e.resolve(o).then((function(t){a||(a=!0,i.resolve(l,t))}),(function(t){a||(a=!0,i.reject(l,t))}));return l}},{1:1}],3:[function(t,e,a){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var a="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)},n=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<t.length;a+=1)r.append(t[a]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var o=Promise;function l(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function u(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function c(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f=void 0,h={},p=Object.prototype.toString;function m(t){return"boolean"==typeof f?o.resolve(f):function(t){return new o((function(e){var r=t.transaction("local-forage-detect-blob-support","readwrite"),a=i([""]);r.objectStore("local-forage-detect-blob-support").put(a,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return f=t}))}function y(t){var e=h[t.name],r={};r.promise=new o((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function v(t){var e=h[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function g(t,e){var r=h[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function b(t,e){return new o((function(r,a){if(h[t.name]=h[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return r(t.db);y(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=n.open.apply(n,i);e&&(o.onupgradeneeded=function(e){var r=o.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),a(o.error)},o.onsuccess=function(){var e=o.result;e.onversionchange=function(t){t.target.close()},r(e),v(t)}}))}function w(t){return b(t,!1)}function S(t){return b(t,!0)}function k(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),a=t.version<t.db.version,n=t.version>t.db.version;if(a&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),n||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function T(t){return i([function(t){for(var e=t.length,r=new ArrayBuffer(e),a=new Uint8Array(r),n=0;n<e;n++)a[n]=t.charCodeAt(n);return r}(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function x(t){var e=this,r=e._initReady().then((function(){var t=h[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return u(r,t,t),r}function _(t,e,r,a){void 0===a&&(a=1);try{var n=t.db.transaction(t.storeName,e);r(null,n)}catch(n){if(a>0&&(!t.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return o.resolve().then((function(){if(!t.db||"NotFoundError"===n.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),S(t)})).then((function(){return function(t){y(t);for(var e=h[t.name],r=e.forages,a=0;a<r.length;a++){var n=r[a];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return t.db=null,w(t).then((function(e){return t.db=e,k(t)?S(t):e})).then((function(a){t.db=e.db=a;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=a})).catch((function(e){throw g(t,e),e}))}(t).then((function(){_(t,e,r,a-1)}))})).catch(r);r(n)}}var L={_driver:"asyncStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var a in t)r[a]=t[a];var n=h[r.name];n||(n={forages:[],db:null,dbReady:null,deferredOperations:[]},h[r.name]=n),n.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=x);var i=[];function s(){return o.resolve()}for(var l=0;l<n.forages.length;l++){var u=n.forages[l];u!==e&&i.push(u._initReady().catch(s))}var c=n.forages.slice(0);return o.all(i).then((function(){return r.db=n.db,w(r)})).then((function(t){return r.db=t,k(r,e._defaultConfig.version)?S(r):t})).then((function(t){r.db=n.db=t,e._dbInfo=r;for(var a=0;a<c.length;a++){var i=c[a];i!==e&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!n||!n.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var r=this,a=new o((function(e,a){r.ready().then((function(){_(r._dbInfo,"readonly",(function(n,i){if(n)return a(n);try{var o=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var r=o.result;if(r){var a=r.value;E(a)&&(a=T(a));var n=t(a,r.key,s++);void 0!==n?e(n):r.continue()}else e()},o.onerror=function(){a(o.error)}}catch(t){a(t)}}))})).catch(a)}));return l(a,e),a},getItem:function(t,e){var r=this;t=c(t);var a=new o((function(e,a){r.ready().then((function(){_(r._dbInfo,"readonly",(function(n,i){if(n)return a(n);try{var o=i.objectStore(r._dbInfo.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),E(t)&&(t=T(t)),e(t)},o.onerror=function(){a(o.error)}}catch(t){a(t)}}))})).catch(a)}));return l(a,e),a},setItem:function(t,e,r){var a=this;t=c(t);var n=new o((function(r,n){var i;a.ready().then((function(){return i=a._dbInfo,"[object Blob]"===p.call(e)?m(i.db).then((function(t){return t?e:(r=e,new o((function(t,e){var a=new FileReader;a.onerror=e,a.onloadend=function(e){var a=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:a,type:r.type})},a.readAsBinaryString(r)})));var r})):e})).then((function(e){_(a._dbInfo,"readwrite",(function(i,o){if(i)return n(i);try{var s=o.objectStore(a._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),r(e)},o.onabort=o.onerror=function(){var t=l.error?l.error:l.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return l(n,r),n},removeItem:function(t,e){var r=this;t=c(t);var a=new o((function(e,a){r.ready().then((function(){_(r._dbInfo,"readwrite",(function(n,i){if(n)return a(n);try{var o=i.objectStore(r._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){a(o.error)},i.onabort=function(){var t=o.error?o.error:o.transaction.error;a(t)}}catch(t){a(t)}}))})).catch(a)}));return l(a,e),a},clear:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){_(e._dbInfo,"readwrite",(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).clear();n.oncomplete=function(){t()},n.onabort=n.onerror=function(){var t=i.error?i.error:i.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return l(r,t),r},length:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){_(e._dbInfo,"readonly",(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return l(r,t),r},key:function(t,e){var r=this,a=new o((function(e,a){t<0?e(null):r.ready().then((function(){_(r._dbInfo,"readonly",(function(n,i){if(n)return a(n);try{var o=i.objectStore(r._dbInfo.storeName),s=!1,l=o.openKeyCursor();l.onsuccess=function(){var r=l.result;r?0===t||s?e(r.key):(s=!0,r.advance(t)):e(null)},l.onerror=function(){a(l.error)}}catch(t){a(t)}}))})).catch(a)}));return l(a,e),a},keys:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){_(e._dbInfo,"readonly",(function(a,n){if(a)return r(a);try{var i=n.objectStore(e._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var e=i.result;e?(o.push(e.key),e.continue()):t(o)},i.onerror=function(){r(i.error)}}catch(t){r(t)}}))})).catch(r)}));return l(r,t),r},dropInstance:function(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var a,i=this;if(t.name){var s=t.name===r.name&&i._dbInfo.db,u=s?o.resolve(i._dbInfo.db):w(t).then((function(e){var r=h[t.name],a=r.forages;r.db=e;for(var n=0;n<a.length;n++)a[n]._dbInfo.db=e;return e}));a=t.storeName?u.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;y(t);var a=h[t.name],i=a.forages;e.close();for(var s=0;s<i.length;s++){var l=i[s];l._dbInfo.db=null,l._dbInfo.version=r}return new o((function(e,a){var i=n.open(t.name,r);i.onerror=function(t){i.result.close(),a(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){a.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,v(r._dbInfo)}})).catch((function(e){throw(g(t,e)||o.resolve()).catch((function(){})),e}))}})):u.then((function(e){y(t);var r=h[t.name],a=r.forages;e.close();for(var i=0;i<a.length;i++)a[i]._dbInfo.db=null;return new o((function(e,r){var a=n.deleteDatabase(t.name);a.onerror=function(){var t=a.result;t&&t.close(),r(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},a.onsuccess=function(){var t=a.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<a.length;e++)v(a[e]._dbInfo)})).catch((function(e){throw(g(t,e)||o.resolve()).catch((function(){})),e}))}))}else a=o.reject("Invalid arguments");return l(a,e),a}},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:".length,C=O+"arbf".length,I=Object.prototype.toString;function D(t){var e,r,a,n,i,o=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(e=0;e<s;e+=4)r=A.indexOf(t[e]),a=A.indexOf(t[e+1]),n=A.indexOf(t[e+2]),i=A.indexOf(t[e+3]),c[l++]=r<<2|a>>4,c[l++]=(15&a)<<4|n>>2,c[l++]=(3&n)<<6|63&i;return u}function P(t){var e,r=new Uint8Array(t),a="";for(e=0;e<r.length;e+=3)a+=A[r[e]>>2],a+=A[(3&r[e])<<4|r[e+1]>>4],a+=A[(15&r[e+1])<<2|r[e+2]>>6],a+=A[63&r[e+2]];return r.length%3==2?a=a.substring(0,a.length-1)+"=":r.length%3==1&&(a=a.substring(0,a.length-2)+"=="),a}var M={serialize:function(t,e){var r="";if(t&&(r=I.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===I.call(t.buffer))){var a,n="__lfsc__:";t instanceof ArrayBuffer?(a=t,n+="arbf"):(a=t.buffer,"[object Int8Array]"===r?n+="si08":"[object Uint8Array]"===r?n+="ui08":"[object Uint8ClampedArray]"===r?n+="uic8":"[object Int16Array]"===r?n+="si16":"[object Uint16Array]"===r?n+="ur16":"[object Int32Array]"===r?n+="si32":"[object Uint32Array]"===r?n+="ui32":"[object Float32Array]"===r?n+="fl32":"[object Float64Array]"===r?n+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(n+P(a))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+t.type+"~"+P(this.result);e("__lfsc__:blob"+r)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,O))return JSON.parse(t);var e,r=t.substring(C),a=t.substring(O,C);if("blob"===a&&R.test(r)){var n=r.match(R);e=n[1],r=r.substring(n[0].length)}var o=D(r);switch(a){case"arbf":return o;case"blob":return i([o],{type:e});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+a)}},stringToBuffer:D,bufferToString:P};function F(t,e,r,a){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,a)}function B(t,e,r,a,n,i){t.executeSql(r,a,n,(function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?i(t,o):F(t,e,(function(){t.executeSql(r,a,n,i)}),i)}),i):i(t,o)}),i)}function N(t,e,r,a){var n=this;t=c(t);var i=new o((function(i,o){n.ready().then((function(){void 0===e&&(e=null);var s=e,l=n._dbInfo;l.serializer.serialize(e,(function(e,u){u?o(u):l.db.transaction((function(r){B(r,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(s)}),(function(t,e){o(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(a>0)return void i(N.apply(n,[t,s,r,a-1]));o(e)}}))}))})).catch(o)}));return l(i,r),i}function U(t){return new o((function(e,r){t.transaction((function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,a){for(var n=[],i=0;i<a.rows.length;i++)n.push(a.rows.item(i).name);e({db:t,storeNames:n})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}var j={_driver:"webSQLStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var a in t)r[a]="string"!=typeof t[a]?t[a].toString():t[a];var n=new o((function(t,a){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return a(t)}r.db.transaction((function(n){F(n,r,(function(){e._dbInfo=r,t()}),(function(t,e){a(e)}))}),a)}));return r.serializer=M,n},_support:"function"==typeof openDatabase,iterate:function(t,e){var r=this,a=new o((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){B(r,n,"SELECT * FROM "+n.storeName,[],(function(r,a){for(var i=a.rows,o=i.length,s=0;s<o;s++){var l=i.item(s),u=l.value;if(u&&(u=n.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()}),(function(t,e){a(e)}))}))})).catch(a)}));return l(a,e),a},getItem:function(t,e){var r=this;t=c(t);var a=new o((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){B(r,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var a=r.rows.length?r.rows.item(0).value:null;a&&(a=n.serializer.deserialize(a)),e(a)}),(function(t,e){a(e)}))}))})).catch(a)}));return l(a,e),a},setItem:function(t,e,r){return N.apply(this,[t,e,r,1])},removeItem:function(t,e){var r=this;t=c(t);var a=new o((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){B(r,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){a(e)}))}))})).catch(a)}));return l(a,e),a},clear:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){B(e,a,"DELETE FROM "+a.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r},length:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){B(e,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],(function(e,r){var a=r.rows.item(0).c;t(a)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r},key:function(t,e){var r=this,a=new o((function(e,a){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){B(r,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var a=r.rows.length?r.rows.item(0).key:null;e(a)}),(function(t,e){a(e)}))}))})).catch(a)}));return l(a,e),a},keys:function(t){var e=this,r=new o((function(t,r){e.ready().then((function(){var a=e._dbInfo;a.db.transaction((function(e){B(e,a,"SELECT key FROM "+a.storeName,[],(function(e,r){for(var a=[],n=0;n<r.rows.length;n++)a.push(r.rows.item(n).key);t(a)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r},dropInstance:function(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var a,n=this;return l(a=t.name?new o((function(e){var a;a=t.name===r.name?n._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:a,storeNames:[t.storeName]}):e(U(a))})).then((function(t){return new o((function(e,r){t.db.transaction((function(a){function n(t){return new o((function(e,r){a.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var i=[],s=0,l=t.storeNames.length;s<l;s++)i.push(n(t.storeNames[s]));o.all(i).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):o.reject("Invalid arguments"),e),a}};function G(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function z(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var H={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return e.keyPrefix=G(t,this._defaultConfig),z()?(this._dbInfo=e,e.serializer=M,o.resolve()):o.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var r=this,a=r.ready().then((function(){for(var e=r._dbInfo,a=e.keyPrefix,n=a.length,i=localStorage.length,o=1,s=0;s<i;s++){var l=localStorage.key(s);if(0===l.indexOf(a)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(n),o++)))return u}}}));return l(a,e),a},getItem:function(t,e){var r=this;t=c(t);var a=r.ready().then((function(){var e=r._dbInfo,a=localStorage.getItem(e.keyPrefix+t);return a&&(a=e.serializer.deserialize(a)),a}));return l(a,e),a},setItem:function(t,e,r){var a=this;t=c(t);var n=a.ready().then((function(){void 0===e&&(e=null);var r=e;return new o((function(n,i){var o=a._dbInfo;o.serializer.serialize(e,(function(e,a){if(a)i(a);else try{localStorage.setItem(o.keyPrefix+t,e),n(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))}));return l(n,r),n},removeItem:function(t,e){var r=this;t=c(t);var a=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return l(a,e),a},clear:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var a=localStorage.key(r);0===a.indexOf(t)&&localStorage.removeItem(a)}}));return l(r,t),r},length:function(t){var e=this.keys().then((function(t){return t.length}));return l(e,t),e},key:function(t,e){var r=this,a=r.ready().then((function(){var e,a=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(a.keyPrefix.length)),e}));return l(a,e),a},keys:function(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,a=[],n=0;n<r;n++){var i=localStorage.key(n);0===i.indexOf(t.keyPrefix)&&a.push(i.substring(t.keyPrefix.length))}return a}));return l(r,t),r},dropInstance:function(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var a,n=this;return l(a=t.name?new o((function(e){t.storeName?e(G(t,n._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):o.reject("Invalid arguments"),e),a}},q=function(t,e){for(var r,a,n=t.length,i=0;i<n;){if((r=t[i])===(a=e)||"number"==typeof r&&"number"==typeof a&&isNaN(r)&&isNaN(a))return!0;i++}return!1},Y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},K={},V={},W={INDEXEDDB:L,WEBSQL:j,LOCALSTORAGE:H},X=[W.INDEXEDDB._driver,W.WEBSQL._driver,W.LOCALSTORAGE._driver],Q=["dropInstance"],$=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Q),J={description:"",driver:X.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Z(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function tt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Y(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var et=new(function(){function t(e){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W)if(W.hasOwnProperty(r)){var a=W[r],n=a._driver;this[r]=n,K[n]||this.defineDriver(a)}this._defaultConfig=tt({},J),this._config=tt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":a(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var a=new o((function(e,r){try{var a=t._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(n);for(var i=$.concat("_initStorage"),s=0,u=i.length;s<u;s++){var c=i[s];if((!q(Q,c)||t[c])&&"function"!=typeof t[c])return void r(n)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=o.reject(e);return l(r,arguments[arguments.length-1]),r}},r=0,a=Q.length;r<a;r++){var n=Q[r];t[n]||(t[n]=e(n))}}();var d=function(r){K[a]&&console.info("Redefining LocalForage driver: "+a),K[a]=t,V[a]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(d,r):d(!!t._support):d(!0)}catch(t){r(t)}}));return u(a,e,r),a},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var a=K[t]?o.resolve(K[t]):o.reject(new Error("Driver not found."));return u(a,e,r),a},t.prototype.getSerializer=function(t){var e=o.resolve(M);return u(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return u(r,t,t),r},t.prototype.setDriver=function(t,e,r){var a=this;Y(t)||(t=[t]);var n=this._getSupportedDrivers(t);function i(){a._config.driver=a.driver()}function s(t){return a._extend(t),i(),a._ready=a._initStorage(a._config),a._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=l.then((function(){var t=n[0];return a._dbInfo=null,a._ready=null,a.getDriver(t).then((function(t){a._driver=t._driver,i(),a._wrapLibraryMethodsWithReady(),a._initDriver=function(t){return function(){var e=0;return function r(){for(;e<t.length;){var n=t[e];return e++,a._dbInfo=null,a._ready=null,a.getDriver(n).then(s).catch(r)}i();var l=new Error("No available storage method found.");return a._driverSet=o.reject(l),a._driverSet}()}}(n)}))})).catch((function(){i();var t=new Error("No available storage method found.");return a._driverSet=o.reject(t),a._driverSet})),u(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!V[t]},t.prototype._extend=function(t){tt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var n=t[r];this.supports(n)&&e.push(n)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=$.length;t<e;t++)Z(this,$[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=et},{3:3}]},{},[4])(4)},"object"===s(e)&&void 0!==t?t.exports=o():(n=[],void 0===(i="function"==typeof(a=o)?a.apply(e,n):a)||(t.exports=i))}).call(this,r(4))},function(t,e,r){"use strict";(function(e){function r(t){var e,r,n,i,o,s,l=Object.create(null);if(this[u]=l,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),o=0,s=(i=t.split("&")).length;o<s;o++)-1<(e=(n=i[o]).indexOf("="))?d(l,f(n.slice(0,e)),f(n.slice(e+1))):n.length&&d(l,f(n),"");else if(a(t))for(o=0,s=t.length;o<s;o++)d(l,(n=t[o])[0],n[1]);else if(t.forEach)t.forEach(c,l);else for(r in t)d(l,r,t[r])}var a=Array.isArray,n=r.prototype,i=/[!'\(\)~]|%20|%00/g,o=/\+/g,s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l=function(t){return s[t]},u="__URLSearchParams__:"+Math.random();function c(t,e){d(this,e,t)}function d(t,e,r){var n=a(r)?r.join(","):r;e in t?t[e].push(n):t[e]=[n]}function f(t){return decodeURIComponent(t.replace(o," "))}function h(t){return encodeURIComponent(t).replace(i,l)}n.append=function(t,e){d(this[u],t,e)},n.delete=function(t){delete this[u][t]},n.get=function(t){var e=this[u];return t in e?e[t][0]:null},n.getAll=function(t){var e=this[u];return t in e?e[t].slice(0):[]},n.has=function(t){return t in this[u]},n.set=function(t,e){this[u][t]=[""+e]},n.forEach=function(t,e){var r=this[u];Object.getOwnPropertyNames(r).forEach((function(a){r[a].forEach((function(r){t.call(e,r,a,this)}),this)}),this)},n.toJSON=function(){return{}},n.toString=function(){var t,e,r,a,n=this[u],i=[];for(e in n)for(r=h(e),t=0,a=n[e];t<a.length;t++)i.push(r+"="+h(a[t]));return i.join("&")},function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,e){var r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=this.getAll(a)).forEach((function(r){t.call(e,r,a,this)}),this)}),this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach((function(e,r){t.push(r)}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),"values"in t||(t.values=function(){var t=[];this.forEach((function(e){t.push(e)}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),"entries"in t||(t.entries=function(){var t=[];this.forEach((function(e,r){t.push([r,e])}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,r,a=this.entries(),n=a.next(),i=n.done,o=[],s=Object.create(null);!i;)e=(r=n.value)[0],o.push(e),e in s||(s[e]=[]),s[e].push(r[1]),i=(n=a.next()).done;for(o.sort(),t=0;t<o.length;t++)this.delete(o[t]);for(t=0;t<o.length;t++)e=o[t],this.append(e,s[e].shift())})}((r=t.exports=e.URLSearchParams||r).prototype)}).call(this,r(4))},function(t,e,r){var a=r(9);t.exports=function(t){"use strict";var e="",r=(t=t||{}).enableSubtitle,n=t.subtitle,i=t.current,o=t.autoplay,s=t.volume,l=t.airplay,u=t.screenshot,c=t.preload,d=a.$escape;r=n&&"webvtt"===n.type;return e+='\n<video\n    class="smartplayer-video ',i&&(e+="smartplayer-video-current"),e+='"\n    ',o&&(e+="autoplay"),e+="\n    ",s<=0&&(e+="muted"),e+="\n    playsinline\n    ",l&&(e+=' x-webkit-airplay="allow" '),e+="\n    ",(u||r)&&(e+='crossorigin="anonymous"'),e+="\n    ",c&&(e+='preload="',e+=d(c),e+='"'),e+="\n    >\n    ",r&&(e+='\n    <track kind="metadata" default src="',e+=d(n.url),e+='"></track>\n    '),e+="\n</video>\n"}},function(t,e,r){(function(t){var a=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(n.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new i(n.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(54),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var a,n,i,o,s,l=1,u={},c=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},a=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,a=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):a=function(t){setTimeout(p,0,t)}:(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),a=function(e){t.postMessage(o+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return u[l]=n,a(l),l++},f.clearImmediate=h}function h(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(4),r(11))},function(t,e,r){"use strict";(function(e){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},a=Object.create(r),n=/["&'<>]/;a.$escape=function(t){return function(t){var e=""+t,r=n.exec(e);if(!r)return t;var a="",i=void 0,o=void 0,s=void 0;for(i=r.index,o=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==i&&(a+=e.substring(o,i)),o=i+1,a+=s}return o!==i?a+e.substring(o,i):a}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},a.$each=function(t,e){if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)e(t[r],r);else for(var n in t)e(t[n],n)},t.exports=a}).call(this,r(4))},function(t,e,r){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){"use strict";var r=Object.prototype,a=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,a){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),s=new _(a||[]);return n(o,"_invoke",{value:k(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function h(){}function p(){}function m(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==r&&a.call(g,o)&&(y=g);var b=m.prototype=h.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,r){var i;n(this,"_invoke",{value:function(n,o){function s(){return new r((function(i,s){!function n(i,o,s,l){var u=d(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===e(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):r.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(u.arg)}(n,o,i,s)}))}return i=i?i.then(s,s):s()}})}function k(t,e,r){var a="suspendedStart";return function(n,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw i;return A()}for(r.method=n,r.arg=i;;){var o=r.delegate;if(o){var s=T(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=d(t,e,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}function T(t,e){var r=e.method,a=t.iterator[r];if(void 0===a)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var n=d(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=u(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(S.prototype),u(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,a,n,i){void 0===i&&(i=Promise);var o=new S(c(e,r,a,n),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var a in e)r.push(a);return r.reverse(),function t(){for(;r.length;){var a=r.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=L,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return o.type="throw",o.arg=t,e.next=r,a&&(e.method="next",e.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;x(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=r}catch(t){"object"===("undefined"==typeof globalThis?"undefined":e(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}).call(this,r(57)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";var t=[,function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var a=r(2),n=r(3);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s={product:null,account_id:null},l={path:"receive"},u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.options=Object.assign(Object.assign({},s),e),this.settings=Object.assign(Object.assign({},l),r),this.mercuryAddress=(0,n.createMercuryAddressUrl)();var a=this.createIframe();this.shouldAddListeners=!0,this.insertIframe(a)}var e,r,u;return e=t,(r=[{key:"createMercuryServerUrl",value:function(){try{return"https://cdn.converteai.net"}catch(t){return"http://localhost:5000"}}},{key:"createIframe",value:function(){var t=document.createElement("iframe");return t.setAttribute("style","height:0px;width:0px;border:0;"),t.src=this.mercuryAddress,t}},{key:"insertIframe",value:function(t){var e=this;window.mercury=new a.default(this.options,this.settings),this.mercury=window.mercury,this.shouldAddListeners&&this.addEventLisneters(t),window.addEventListener("load",(function(){e.shouldAddListeners&&e.addEventLisneters(t)}))}},{key:"addEventLisneters",value:function(t){document.body.appendChild(t),window.mercury.watchLoadedStatus(t.contentWindow),this.shouldAddListeners=!1}},{key:"event",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mercury.event(t,e,r)}},{key:"conversion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mercury.conversion(t,e,r)}}])&&o(e.prototype,r),u&&o(e,u),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,r){r.r(e),r.d(e,{default:function(){return s}});var a=r(3);function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function o(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.settings=r,this.frameIsLoaded=!1,this.mercuryHost=(0,a.createMercuryServerUrl)(),this.eventStore=[],this.conversionStore=[]}var e,r,i;return e=t,(r=[{key:"watchLoadedStatus",value:function(t){var e=this;window.addEventListener("message",(function(r){r.origin===e.mercuryHost&&"ready"===r.data.status&&(e.frameIsLoaded=!0,e.iWindow=t,e.sendStoredMessages())}))}},{key:"event",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({target:"mercurySync",type:"event",settings:this.settings,options:r,event:t,value:e},this.options);this.frameIsLoaded?this.iWindow.postMessage(a,"*"):this.eventStore.push(a)}},{key:"conversion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({target:"mercurySync",type:"conversion",settings:this.settings,options:r,name:t,value:e},this.options);this.frameIsLoaded?this.iWindow.postMessage(a,"*"):this.conversionStore.push(a)}},{key:"sendStoredMessages",value:function(){this.sendConversionMessages(this.conversionStore),this.sendEventMessages(this.eventStore)}},{key:"sendConversionMessages",value:function(t){for(var e=n(t);e.length>0;){var r=t.pop();r&&this.conversion(r.name||"missing conversion name",r.value,r.options)}}},{key:"sendEventMessages",value:function(t){for(var e=n(t);e.length>0;){var r=e.pop();r&&this.event(r.event||"missing event name",r.value,r.options)}}}])&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,r){r.r(e),r.d(e,{createMercuryAddressUrl:function(){return n.default},createMercuryServerUrl:function(){return a.default}});var a=r(4),n=r(5)},function(t,e,r){function a(){try{return"https://cdn.converteai.net"}catch(t){return"http://localhost:5000"}}r.r(e),r.d(e,{default:function(){return a}})},function(t,e,r){function a(){try{return"https://cdn.converteai.net/lib/js/analytics-js-v2/v1/index.html"}catch(t){return"http://localhost:5000"}}r.r(e),r.d(e,{default:function(){return a}})}],e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,r),i.exports}r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};!function(){r.r(a);var t=r(1);window.iframeManagerClass=t.default}()}()},function(t,e,r){t.exports=r(60)},function(t,e,r){"use strict";var a=r(0),n=r(13),i=r(61),o=r(19);function s(t){var e=new i(t),r=n(i.prototype.request,e);return a.extend(r,i.prototype,e),a.extend(r,e),r}var l=s(r(16));l.Axios=i,l.create=function(t){return s(o(l.defaults,t))},l.Cancel=r(20),l.CancelToken=r(74),l.isCancel=r(15),l.all=function(t){return Promise.all(t)},l.spread=r(75),t.exports=l,t.exports.default=l},function(t,e,r){"use strict";var a=r(0),n=r(14),i=r(62),o=r(63),s=r(19);function l(t){this.defaults=t,this.interceptors={request:new i,response:new i}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},l.prototype.getUri=function(t){return t=s(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,r){return this.request(s(r||{},{method:t,url:e,data:(r||{}).data}))}})),a.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,r,a){return this.request(s(a||{},{method:t,url:e,data:r}))}})),t.exports=l},function(t,e,r){"use strict";var a=r(0);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){a.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,r){"use strict";var a=r(0),n=r(64),i=r(15),o=r(16);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=a.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),a.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return s(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e,r){return a.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){a.forEach(t,(function(r,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[a])}))}},function(t,e,r){"use strict";var a=r(18);t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(a("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,a,n){return t.config=e,r&&(t.code=r),t.request=a,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?{write:function(t,e,r,n,i,o){var s=[];s.push(t+"="+encodeURIComponent(e)),a.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),a.isString(n)&&s.push("path="+n),a.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var a=r(70),n=r(71);t.exports=function(t,e){return t&&!a(e)?n(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var a=r(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,o={};return t?(a.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=a.trim(t.substr(0,i)).toLowerCase(),r=a.trim(t.substr(i+1)),e){if(o[e]&&n.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}})),o):o}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var a=t;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=a.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var a=r(20);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new a(t),e(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";r.r(e);var a=r(21),n=r.n(a),i=r(10),o={insert:"head",singleton:!1},s=(n()(i.a,o),i.a.locals,r(3));function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,p(a.key),a)}}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}var m=f({},window.innerWidth<600?{maxBufferSize:5e6,maxBufferLength:16,maxMaxBufferLength:16,startLevel:0}:{maxBufferSize:1e7,maxBufferLength:32,maxMaxBufferLength:32,startLevel:0}),y=function(){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u(this,t),this.hls=null,this.video=e,this.player=r,this.options=f(f({},m),a),this.resolutions=[],this.optionsSmartAutoPlay=f(f({},this.options),{},{maxBufferLength:8,maxMaxBufferLength:8}),window.Hls.isSupported()?this.init():this.video.src=this.player.options.video.url}var e,r,a;return e=t,(r=[{key:"getLevelfromVideoWidth",value:function(){var t=this.player.container.getBoundingClientRect().width;return this.resolutions.map((function(e,r){var a=e.width,n=parseFloat(t)/parseFloat(a);return[e,n>=1?n-1:-1*(n-1),r,a,t,n]})).sort((function(t,e){return t[1]-e[1]}))[0][2]}},{key:"init",value:function(){var t=this;"smartplay"===this.player.options.autoplay?(this.hls=new window.Hls(this.optionsSmartAutoPlay),this.player.on("smartplay_play",(function(){t.hls.config.maxBufferLength=t.options.maxBufferLength,t.hls.config.maxMaxBufferLength=t.options.maxMaxBufferLength}))):this.hls=new window.Hls(this.options),this.player.plugins.hls=this.hls,this.player.on("online",(function(){t.hls.startLoad()})),this.player.on("destroy",(function(){t.hls.destroy(),delete t.player.plugins.hls})),this.hls.on(window.Hls.Events.MANIFEST_PARSED,(function(e,r){var a=r.levels;t.resolutions=a;var n=t.getLevelfromVideoWidth();t.hls.autoLevelCapping=n})),this.hls.loadSource(this.player.options.video.url),this.hls.attachMedia(this.video)}}])&&c(e.prototype,r),a&&c(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),v=/mobile/i.test(window.navigator.userAgent),g=r(5).v4,b=0,w={secondToTime:function(t){if(0===(t=t||0)||t===1/0||"NaN"===t.toString())return"00:00";var e=Math.floor(t/3600),r=Math.floor((t-3600*e)/60),a=Math.floor(t-3600*e-60*r);return(e>0?[e,r,a]:[r,a]).map((function(t){return t<10?"0"+t:""+t})).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,r=t.offsetParent,a=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==r&&r!==t;)e+=r.offsetLeft,r=r.offsetParent;else for(;null!==r;)e+=r.offsetLeft,r=r.offsetParent;return e-a},getBoundingClientRectViewLeft:function(t){var e=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(t.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var r=document.createElement("div");r.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(r),this.getBoundingClientRectViewLeft.offset=-r.getBoundingClientRect().top-e,document.body.removeChild(r),r=null}var a=t.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return a.left+n}return this.getElementViewLeft(t)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(t){var e=t.left,r=void 0===e?0:e,a=t.top,n=void 0===a?0:a;this.isFirefox?(document.documentElement.scrollLeft=r,document.documentElement.scrollTop=n):window.scrollTo(r,n)},isMobile:v,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},nameMap:{dragStart:v?"touchstart":"mousedown",dragMove:v?"touchmove":"mousemove",dragEnd:v?"touchend":"mouseup"},uniqID:function(){return"uid_".concat(Math.floor(Math.random()*Date.now()),"_").concat(++b)},color2Number:function(t){return"#"===t[0]&&(t=t.substr(1)),3===t.length&&(t="".concat(t[0]).concat(t[0]).concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2])),parseInt(t,16)+0&16777215},number2Color:function(t){return"#"+("00000"+t.toString(16)).slice(-6)},number2Type:function(t){switch(t){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}},checkLocalStorage:function(){try{if(localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test"))return localStorage.removeItem("feature_test"),!0}catch(t){return!1}return!1},cookieSet:function(t,e,r){t=["".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))],r&&("expiry"in r&&("number"==typeof r.expiry&&(r.expiry=new Date(1e3*r.expiry+ +new Date)),t.push("expires=".concat(r.expiry.toGMTString()))),"domain"in r&&t.push("domain=".concat(r.domain)),"path"in r&&t.push("path=".concat(r.path)),"secure"in r&&r.secure&&t.push("secure")),document.cookie=t.join("; ")},cookieGet:function(t,e){for(var r=[],a=document.cookie.split(/; */),n=0;n<a.length;n++){var i=a[n].split("=");i[0]==encodeURIComponent(t)&&r.push(decodeURIComponent(i[1].replace(/\+/g,"%20")))}return e?r:r[0]},cookieRemove:function(t,e){e||(e={}),e.expiry=-86400,this.set(t,"",e)},insertAfter:function(t,e){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},currentSession:function(){var t;try{var e=localStorage.getItem("vturb.session"),r=JSON.parse(e);t=r.expires>=Date.now()?r.uuid:g()}catch(e){t=g()}try{localStorage.setItem("vturb.session",JSON.stringify({uuid:t,expires:Date.now()+432e5}))}catch(t){console.log("vturb cannot set data in localstorage")}return t}};var S={"zh-cn":{Top:"顶部",Bottom:"底部",Rolling:"滚动","About author":"关于作者","SmartPlayer feedback":"播放器意见反馈","About SmartPlayer":"关于 SmartPlayer 播放器",Loop:"洗脑循环",Speed:"速度",Normal:"正常","Video load failed":"视频加载失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退",Setting:"设置","Full screen":"全屏","Web full screen":"页面全屏",Send:"发送",Screenshot:"截图",AirPlay:"无线投屏",s:"秒","Show subtitle":"显示字幕","Hide subtitle":"隐藏字幕",Volume:"音量",Live:"直播","Video info":"视频统计信息"},"zh-tw":{Top:"頂部",Bottom:"底部",Rolling:"滾動","About author":"關於作者","SmartPlayer feedback":"播放器意見回饋","About SmartPlayer":"關於 SmartPlayer 播放器",Loop:"循環播放",Speed:"速度",Normal:"正常","Video load failed":"影片載入失敗","Switching to":"正在切換至","Switched to":"已經切換至",quality:"畫質",FF:"快進",REW:"快退",Setting:"設定","Full screen":"全螢幕","Web full screen":"頁面全螢幕",Send:"發送",Screenshot:"截圖",AirPlay:"無線投屏",s:"秒","Show subtitle":"顯示字幕","Hide subtitle":"隱藏字幕",Volume:"音量",Live:"直播","Video info":"影片統計訊息"}},k=function(t){var e=this;this.lang=t,this.tran=function(t){return S[e.lang]&&S[e.lang][t]?S[e.lang][t]:t}},T=r(25),E=r.n(T),x=r(26),_=r.n(x),L=r(27),A=r.n(L),R=r(28),O=r.n(R),C=r(29),I=r.n(C),D=r(30),P=r.n(D),M=r(31),F=r.n(M),B=r(32),N=r.n(B),U=r(33),j=r.n(U),G=r(34),z=r.n(G),H=r(35),q=r.n(H),Y=r(36),K=r.n(Y),V=r(37),W=r.n(V),X=r(38),Q=r.n(X),$=r(39),J=r.n($),Z=r(40),tt=r.n(Z),et=r(41),rt=r.n(et),at=r(42),nt=r.n(at),it=r(43),ot=r.n(it),st=r(44),lt=r.n(st),ut=r(45),ct=r.n(ut),dt=r(46),ft=r.n(dt),ht=r(47),pt=r.n(ht),mt={play:E.a,pause:_.a,seekRewind:nt.a,seekForward:ot.a,volumeUp:A.a,volumeDown:O.a,volumeOff:I.a,full:P.a,fullWeb:F.a,setting:N.a,right:j.a,comment:z.a,commentOff:q.a,send:K.a,pallette:W.a,camera:Q.a,subtitle:tt.a,loading:rt.a,airplay:J.a,synchronizeRewind:lt.a,synchronizeForward:ct.a,warning:ft.a,vturb:pt.a},yt=r(48),vt=r.n(yt);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==gt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===gt(i)?i:String(i)),a)}var n,i}var wt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=vt()({options:this.options,index:this.index,tran:this.tran,icons:mt,mobile:w.isMobile,video:{current:!0,pic:this.options.video.pic,pic_pause:this.options.video.pic_pause,pic_finish:this.options.video.pic_finish,pic_background:this.options.video.pic_background,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle,autoplay:this.options.autoplay,volume:this.options.volume}}),e=document.createElement("div");e.classList.add("smartplayer-content"),e.innerHTML=t,this.container.appendChild(e),this.container.id="smartplayer",this.volumeBar=this.container.querySelector(".smartplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".smartplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".smartplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".smartplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".smartplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".smartplayer-volume-icon .smartplayer-icon-content"),this.seekButtonRewind=this.container.querySelector(".smartplayer-seek-rewind-icon .smartplayer-icon-content"),this.seekButtonForward=this.container.querySelector(".smartplayer-seek-forward-icon .smartplayer-icon-content"),this.playedBar=this.container.querySelector(".smartplayer-played"),this.loadedBar=this.container.querySelector(".smartplayer-loaded"),this.playedBarWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".smartplayer-bar-time"),this.video=this.container.querySelector(".smartplayer-video-current"),this.bezel=this.container.querySelector(".smartplayer-bezel-icon"),this.playButton=this.container.querySelector(".smartplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".smartplayer-mobile-play"),this.videoWrap=this.container.querySelector(".smartplayer-video-wrap"),this.controllerMask=this.container.querySelector(".smartplayer-controller-mask"),this.ptime=this.container.querySelector(".smartplayer-ptime"),this.settingButton=this.container.querySelector(".smartplayer-setting-icon"),this.settingBox=this.container.querySelector(".smartplayer-setting-box"),this.mask=this.container.querySelector(".smartplayer-mask"),this.loop=this.container.querySelector(".smartplayer-setting-loop"),this.loopToggle=this.container.querySelector(".smartplayer-setting-loop .smartplayer-toggle-setting-input"),this.speed=this.container.querySelector(".smartplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".smartplayer-setting-speed-item"),this.dtime=this.container.querySelector(".smartplayer-dtime"),this.controller=this.container.querySelector(".smartplayer-controller"),this.commentInput=this.container.querySelector(".smartplayer-comment-input"),this.commentButton=this.container.querySelector(".smartplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".smartplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".smartplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".smartplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".smartplayer-send-icon"),this.commentSendFill=this.container.querySelector(".smartplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".smartplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".smartplayer-full-icon"),this.webFullButton=this.container.querySelector(".smartplayer-full-in-icon"),this.menu=this.container.querySelector(".smartplayer-menu"),this.menuItem=this.container.querySelectorAll(".smartplayer-menu-item"),this.qualityList=this.container.querySelector(".smartplayer-quality-list"),this.camareButton=this.container.querySelector(".smartplayer-camera-icon"),this.airplayButton=this.container.querySelector(".smartplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".smartplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".smartplayer-subtitle-icon .smartplayer-icon-content"),this.subtitle=this.container.querySelector(".smartplayer-subtitle"),this.qualityButton=this.container.querySelector(".smartplayer-quality-icon"),this.barPreview=this.container.querySelector(".smartplayer-bar-preview"),this.barWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.infoPanel=this.container.querySelector(".smartplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".smartplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".smartplayer-info-panel-item-version .smartplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".smartplayer-info-panel-item-fps .smartplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".smartplayer-info-panel-item-type .smartplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".smartplayer-info-panel-item-url .smartplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".smartplayer-info-panel-item-resolution .smartplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".smartplayer-info-panel-item-duration .smartplayer-info-panel-item-data"),this.smartPlay=this.container.querySelector(".smartplayer-smartplay"),this.imageStart=this.container.querySelector(".smartplayer-image-start"),this.imageController=this.container.querySelector(".smartplayer-image-pause"),this.thumbnail=this.container.querySelector(".smartplayer-thumbnail"),this.bigplay=this.container.querySelector(".smartplayer-bigplay"),this.resume=this.container.querySelector(".smartplayer-resume"),this.fakeBar=this.container.querySelector(".smartplayer-fake-bar")}}])&&bt(e.prototype,r),a&&bt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==St(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==St(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===St(i)?i:String(i)),a)}var n,i}var Tt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change","startLoading","finishLoading","offline","online","smartplay_play"]}var e,r,a;return e=t,(r=[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"off",value:function(t,e){if(this.type(t)&&"function"==typeof e&&this.events[t]){var r=this.events[t].indexOf(e);r>-1&&this.events[t].splice(r,1)}}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var r=0;r<this.events[t].length;r++)this.events[t][r](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.videoEvents.indexOf(t)?"video":(console.error("Unknown event name: ".concat(t)),null)}}])&&kt(e.prototype,r),a&&kt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Et(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Et(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Et(i)?i:String(i)),a)}var n,i}var _t=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isIframe=!!document.querySelector('meta[name="vturb-iframe"]'),this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",(function(){r.player.resize()})),this.player.events.on("webfullscreen_cancel",(function(){r.player.resize(),w.setScrollPosition(r.lastScrollPosition)}));var a=function(){r.player.resize(),r.isFullScreen("browser")?r.player.events.trigger("fullscreen"):(w.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition())},n=function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t!==r.player.container||(r.player.resize(),t?r.player.events.trigger("fullscreen"):(w.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition()))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",n),document.addEventListener("fullscreenchange",n)):(this.player.container.addEventListener("fullscreenchange",a),this.player.container.addEventListener("webkitfullscreenchange",a),document.addEventListener("msfullscreenchange",n),document.addEventListener("MSFullscreenChange",n))}var e,r,a;return e=t,(r=[{key:"isFullScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(t){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("smartplayer-fulled")}}},{key:"canDoFullscreenOnContent",value:function(){return this.player.container.requestFullscreen||this.player.container.mozRequestFullScreen||this.player.container.webkitRequestFullscreen||this.player.container.msRequestFullscreen}},{key:"requestFullscreenBrowser",value:function(){this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.container.msRequestFullscreen?this.player.container.msRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen&&this.player.video.webkitEnterFullScreen()}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";if("web"==t&&this.canDoFullscreenOnContent()&&(t="browser"),this.player.options.displays.fullscreen){var e="browser"===t?"web":"browser",r=this.isFullScreen(e);switch(r||(this.lastScrollPosition=w.getScrollPosition()),this.nextSibling=this.player.container.nextElementSibling,this.parentElement=this.player.container.parentElement,document.body.appendChild(this.player.container),t){case"browser":this.requestFullscreenBrowser();break;case"web":this.isIframe&&this.requestFullscreenBrowser(),this.player.container.classList.add("smartplayer-fulled"),document.body.classList.add("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}r&&this.cancel(e)}}},{key:"returnPosition",value:function(){this.parentElement&&(this.nextSibling?this.parentElement.insertBefore(this.player.container,this.nextSibling):this.parentElement.appendChild(this.player.container),this.parentElement=null)}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(this.returnPosition(),t){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("smartplayer-fulled"),document.body.classList.remove("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen("browser")?this.cancel("browser"):this.isFullScreen("web")?this.cancel("web"):this.request(t)}}])&&xt(e.prototype,r),a&&xt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Lt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Lt(i)?i:String(i)),a)}var n,i}var Rt=function(){function t(e,r,a,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.video=r,this.options=a,this.events=n,this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]){var e=this.video.textTracks[0];e.oncuechange=function(){var r=e.activeCues[0];if(t.container.innerHTML="",r){var a=document.createElement("div");a.appendChild(r.getCueAsHTML());var n=a.innerHTML.split(/\r?\n/).map((function(t){return"<p>".concat(t,"</p>")})).join("");t.container.innerHTML=n}t.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("smartplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("smartplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("smartplayer-subtitle-hide")?this.show():this.hide()}}])&&At(e.prototype,r),a&&At(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Ot(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Ot(i)?i:String(i)),a)}var n,i}var It=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar}var e,r,a;return e=t,(r=[{key:"set",value:function(t,e,r){e=Math.max(e,0),e=Math.min(e,1),this.elements[t]&&(this.elements[t].style[r]=100*e+"%")}},{key:"get",value:function(t){return this.elements[t]?parseFloat(this.elements[t].style.width)/100:0}}])&&Ct(e.prototype,r),a&&Ct(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Dt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Dt(i)?i:String(i)),a)}var n,i}var Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.alpha=this.getAlpha(this.player)}var e,r,a;return e=t,(r=[{key:"calcWidth",value:function(t){return 100*Math.pow(1-(t-=1)*t,1/this.alpha)}},{key:"set",value:function(t,e){if(!this.player.smartAutoPlay){var r=t/e;this.player.template.fakeBar.style.width="".concat(this.calcWidth(r),"%")}}},{key:"getAlpha",value:function(t){try{var e=t.template.options.fake_bar_options.alpha;return e?e>3||e<2?2:e:2}catch(t){return 2}}}])&&Pt(e.prototype,r),a&&Pt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Ft(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Ft(i)?i:String(i)),a)}var n,i}var Nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.types=["loading","info","fps"],this.init()}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;this.types.map((function(e){return"fps"!==e&&t["init".concat(e,"Checker")](),e}))}},{key:"initloadingChecker",value:function(){var t=this,e=0,r=0,a=!1;this.loadingChecker=setInterval((function(){t.enableloadingChecker&&(r=t.player.video.currentTime,a||r!==e||t.player.video.paused||(t.player.container.classList.add("smartplayer-loading"),a=!0,t.player.events.trigger("startLoading")),a&&r>e&&!t.player.video.paused&&(t.player.container.classList.remove("smartplayer-loading"),a=!1,t.player.events.trigger("finishLoading")),e=r)}),100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame((function(){if(t.enablefpsChecker)if(t.initfpsChecker(),t.fpsStart){t.fpsIndex++;var e=new Date;e-t.fpsStart>1e3&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)}else t.fpsStart=new Date,t.fpsIndex=0;else t.fpsStart=0,t.fpsIndex=0}))}},{key:"initinfoChecker",value:function(){var t=this;this.infoChecker=setInterval((function(){t.enableinfoChecker&&t.player.infoPanel.update()}),1e3)}},{key:"enable",value:function(t){this["enable".concat(t,"Checker")]=!0,"fps"===t&&this.initfpsChecker()}},{key:"disable",value:function(t){this["enable".concat(t,"Checker")]=!1}},{key:"destroy",value:function(){var t=this;this.types.map((function(e){return t["enable".concat(e,"Checker")]=!1,t["".concat(e,"Checker")]&&clearInterval(t["".concat(e,"Checker")]),e}))}}])&&Bt(e.prototype,r),a&&Bt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Ut(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Ut(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Ut(i)?i:String(i)),a)}var n,i}var Gt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.container.addEventListener("animationend",(function(){r.container.classList.remove("smartplayer-bezel-transition")}))}var e,r,a;return e=t,(r=[{key:"switch",value:function(t){this.container.innerHTML=t,this.container.classList.add("smartplayer-bezel-transition")}}])&&jt(e.prototype,r),a&&jt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==zt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==zt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===zt(i)?i:String(i)),a)}var n,i}var qt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('".concat(e.url,"')"),this.events=e.events}var e,r,a;return e=t,(r=[{key:"resize",value:function(t,e,r){this.container.style.width="".concat(t,"px"),this.container.style.height="".concat(e,"px"),this.container.style.top="".concat(2-e,"px"),this.barWidth=r}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(t){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(t/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(t-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}])&&Ht(e.prototype,r),a&&Ht(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Yt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Yt(i)?i:String(i)),a)}var n,i}var Vt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.autoHideTimer=0,this.player.container.addEventListener("mousemove",(function(){r.setAutoHide()})),this.player.container.addEventListener("click",(function(t){if(r.setAutoHide(),r.player.wasPlayed){if(w.isMobile){if(t.composedPath().includes(r.player.template.controller))return;if(t.composedPath().includes(r.player.template.smartPlay))return;r.player.toggle()}}else r.player.play()})),this.player.container.addEventListener("dblclick",(function(t){t.composedPath().includes(r.player.template.controller)||r.player.fullScreen.toggle("web")})),w.isMobile&&this.player.container.addEventListener("touchstart",(function(t){if(t.touches)switch(t.touches.length){case 2:if(t.composedPath().includes(r.player.template.controller))return;r.player.fullScreen.toggle("web")}})),this.player.on("play",(function(){r.setAutoHide()})),this.player.on("pause",(function(){r.setAutoHide()})),this.initPlayButton(),this.initSeekButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),this.initAirplayButton(),this.initVolumeButton()}var e,r,a;return e=t,(r=[{key:"initPlayButton",value:function(){var t=this;this.player.template.playButton&&this.player.template.playButton.addEventListener("click",(function(){t.player.toggle()})),this.player.template.bigplay&&this.player.template.bigplay.addEventListener("click",(function(){w.isMobile||t.player.toggle()})),this.player.template.mobilePlayButton&&this.player.template.mobilePlayButton.addEventListener("click",(function(){t.player.toggle()})),w.isMobile?(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.toggle()}))):(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.player.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.player.toggle()})))}},{key:"initSeekButton",value:function(){var t=this;this.player.options.displays.backward&&this.player.template.seekButtonRewind.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime-t.player.options.seekTime),t.player.bezel.switch(mt.synchronizeRewind)})),this.player.options.displays.forward&&this.player.template.seekButtonForward.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime+t.player.options.seekTime),t.player.bezel.switch(mt.synchronizeForward)}))}},{key:"initHighlights",value:function(){var t=this;this.player.on("durationchange",(function(){if(1!==t.player.video.duration&&t.player.video.duration!==1/0&&t.player.options.highlight){var e=document.querySelectorAll(".smartplayer-highlight");[].slice.call(e,0).forEach((function(e){t.player.template.playedBarWrap.removeChild(e)}));for(var r=0;r<t.player.options.highlight.length;r++)if(t.player.options.highlight[r].text&&t.player.options.highlight[r].time){var a=document.createElement("div");a.classList.add("smartplayer-highlight"),a.style.left=t.player.options.highlight[r].time/t.player.video.duration*100+"%",a.innerHTML='<span class="smartplayer-highlight-text">'+t.player.options.highlight[r].text+"</span>",t.player.template.playedBarWrap.insertBefore(a,t.player.template.playedBarTime)}}}))}},{key:"initThumbnails",value:function(){var t=this;this.player.options.video.thumbnails&&(this.thumbnails=new qt({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",(function(){t.thumbnails.resize(160,t.player.video.videoHeight/t.player.video.videoWidth*160,t.player.template.barWrap.offsetWidth)})))}},{key:"initPlayedBar",value:function(){var t=this;if(this.player.options.displays.seekbar){var e=function(e){var r=((e.clientX||e.changedTouches[0].clientX)-w.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),t.player.bar.set("played",r,"width"),t.player.template.ptime.innerHTML=w.secondToTime(r*t.player.video.duration)},r=function r(a){document.removeEventListener(w.nameMap.dragEnd,r),document.removeEventListener(w.nameMap.dragMove,e);var n=((a.clientX||a.changedTouches[0].clientX)-w.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),t.player.bar.set("played",n,"width"),t.player.seek(t.player.bar.get("played")*t.player.video.duration),t.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(w.nameMap.dragStart,(function(){t.player.timer.disable("progress"),document.addEventListener(w.nameMap.dragMove,e),document.addEventListener(w.nameMap.dragEnd,r)})),this.player.template.playedBarWrap.addEventListener(w.nameMap.dragMove,(function(e){if(t.player.video.duration){var r=t.player.template.playedBarWrap.getBoundingClientRect().left,a=(e.clientX||e.changedTouches[0].clientX)-r;if(a<0||a>t.player.template.playedBarWrap.offsetWidth)return;var n=t.player.video.duration*(a/t.player.template.playedBarWrap.offsetWidth);w.isMobile&&t.thumbnails&&t.thumbnails.show(),t.thumbnails&&t.thumbnails.move(a),t.player.options.displays.seekbar_time&&(t.player.template.playedBarTime.style.left="".concat(a-(n>=3600?25:20),"px"),t.player.template.playedBarTime.innerText=w.secondToTime(n),t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))}})),this.player.template.playedBarWrap.addEventListener(w.nameMap.dragEnd,(function(){w.isMobile&&t.thumbnails&&t.thumbnails.hide()})),w.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.show(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))})),this.player.template.playedBarWrap.addEventListener("mouseleave",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.hide(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.add("smartplayer-hidden"))})))}}},{key:"initFullButton",value:function(){var t=this;this.player.template.browserFullButton&&this.player.template.browserFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("browser")})),this.player.template.webFullButton&&this.player.template.webFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("web")}))}},{key:"initVolumeButton",value:function(){var t=this;if(this.player.options.displays.volume){if(this.player.template.volumeBarWrapWrap){var e=function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-w.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)},r=function r(){document.removeEventListener(w.nameMap.dragEnd,r),document.removeEventListener(w.nameMap.dragMove,e),t.player.template.volumeButton.classList.remove("smartplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",(function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-w.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)})),this.player.template.volumeBarWrapWrap.addEventListener(w.nameMap.dragStart,(function(){document.addEventListener(w.nameMap.dragMove,e),document.addEventListener(w.nameMap.dragEnd,r),t.player.template.volumeButton.classList.add("smartplayer-volume-active")}))}this.player.template.volumeButtonIcon.addEventListener("click",(function(){t.player.video.muted?(t.player.video.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"width")):(t.player.video.muted=!0,t.player.template.volumeIcon.innerHTML=mt.volumeOff,t.player.bar.set("volume",0,"width"))}))}}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",(function(e){e.target.classList.contains("smartplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)}))}},{key:"initScreenshotButton",value:function(){var t=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",(function(){var e,r=document.createElement("canvas");r.width=t.player.video.videoWidth,r.height=t.player.video.videoHeight,r.getContext("2d").drawImage(t.player.video,0,0,r.width,r.height),r.toBlob((function(t){e=URL.createObjectURL(t);var r=document.createElement("a");r.href=e,r.download="smartplayer.png",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)})),t.player.events.trigger("screenshot",e)}))}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(t){switch(t.availability){case"available":this.template.airplayButton.disable=!1;break;default:this.template.airplayButton.disable=!0}this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var t=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Hide subtitle"),t.player.template.subtitleButtonInner.style.opacity=""})),this.player.events.on("subtitle_hide",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Show subtitle"),t.player.template.subtitleButtonInner.style.opacity="0.4"})),this.player.template.subtitleButton.addEventListener("click",(function(){t.player.subtitle.toggle()})))}},{key:"setAutoHide",value:function(){var t=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout((function(){t.player.video&&t.player.video.played.length&&!t.player.paused&&!t.disableAutoHide&&t.hide()}),3e3)}},{key:"show",value:function(){!this.player.smartAutoPlay&&this.player.wasPlayed&&this.player.container.classList.remove("smartplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("smartplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("smartplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}])&&Kt(e.prototype,r),a&&Kt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Wt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Wt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Wt(i)?i:String(i)),a)}var n,i}var Qt=function(){function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.displays.settings){this.player=e,this.player.template.mask.addEventListener("click",(function(){r.hide()})),this.player.template.settingButton.addEventListener("click",(function(){r.show()})),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",(function(){r.player.template.loopToggle.checked=!r.player.template.loopToggle.checked,r.player.template.loopToggle.checked?r.loop=!0:r.loop=!1,r.hide()})),this.player.template.speed.addEventListener("click",(function(){r.player.template.settingBox.classList.add("smartplayer-setting-box-narrow"),r.player.template.settingBox.classList.add("smartplayer-setting-box-speed")}));for(var a=function(t){r.player.template.speedItem[t].addEventListener("click",(function(){r.player.speed(r.player.template.speedItem[t].dataset.speed),r.hide()}))},n=0;n<this.player.template.speedItem.length;n++)a(n)}}var e,r,a;return e=t,(r=[{key:"hide",value:function(){var t=this;this.player&&(this.player.template.settingBox&&this.player.template.settingBox.classList.remove("smartplayer-setting-box-open"),this.player.template.mask.classList.remove("smartplayer-mask-show"),setTimeout((function(){t.player.template.settingBox&&(t.player.template.settingBox.classList.remove("smartplayer-setting-box-narrow"),t.player.template.settingBox.classList.remove("smartplayer-setting-box-speed"))}),300),this.player.controller.disableAutoHide=!1)}},{key:"show",value:function(){this.player.template.settingBox&&this.player.template.settingBox.classList.add("smartplayer-setting-box-open"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.player.controller.disableAutoHide=!0}}])&&Xt(e.prototype,r),a&&Xt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==$t(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==$t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===$t(i)?i:String(i)),a)}var n,i}var Zt,te,ee,re=(Zt=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.hotkey&&document.addEventListener("keydown",(function(t){if(e.focus){var r=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute("contenteditable");if("INPUT"!==r&&"TEXTAREA"!==r&&""!==a&&"true"!==a){var n=t||window.event;switch(n.keyCode){case 32:case 37:case 39:case 38:case 40:n.preventDefault()}}}})),document.addEventListener("keydown",(function(t){switch((t||window.event).keyCode){case 27:e.fullScreen.isFullScreen("web")&&e.fullScreen.cancel("web")}}))},te&&Jt(Zt.prototype,te),ee&&Jt(Zt,ee),Object.defineProperty(Zt,"prototype",{writable:!1}),Zt);function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==ae(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==ae(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===ae(i)?i:String(i)),a)}var n,i}var ie=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach((function(t,e){r.player.options.contextmenu[e]&&r.player.options.contextmenu[e].click&&t.addEventListener("click",(function(){r.player.options.contextmenu[e].click(r.player),r.hide()}))})),this.player.container.addEventListener("contextmenu",(function(t){var e=t||window.event;e.preventDefault();var a=r.player.container.getBoundingClientRect();r.show(e.clientX-a.left,e.clientY-a.top)})),this.player.template.mask.addEventListener("click",(function(){r.hide()}))}return function(t,e,r){e&&ne(t.prototype,e),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"show",value:function(t,e){if(this.player.options.contextmenu.length&&!w.isMobile){this.player.template.menu.classList.add("smartplayer-menu-show");var r=this.player.container.getBoundingClientRect();t+this.player.template.menu.offsetWidth>=r.width?(this.player.template.menu.style.right=r.width-t+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=t+"px",this.player.template.menu.style.right="initial"),e+this.player.template.menu.offsetHeight>=r.height?(this.player.template.menu.style.bottom=r.height-e+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=e+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}}},{key:"hide",value:function(){this.player.template.mask.classList.remove("smartplayer-mask-show"),this.player.template.menu.classList.remove("smartplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}]),t}();function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==oe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==oe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===oe(i)?i:String(i)),a)}var n,i}var le=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.smartAutoPlay=!0,this.times=0,this.muted=this.muted.bind(this),this.removeSmartPlay=this.removeSmartPlay.bind(this),this.init(),this.player.template.smartPlay.addEventListener("click",this.removeSmartPlay),this.player.container.classList.add("smartplayer-smart-auto-play"),this.player.on("loadeddata",(function(){r.player.container.classList.add("smartplayer-show-smart-auto-play")}))}return function(t,e,r){e&&se(t.prototype,e),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"muted",value:function(){var t=this;this.player.container.classList.add("smartplayer-smart-auto-play");var e=this.player.video.muted;this.player.video.muted="muted";return s.a.resolve(this.player.video.play()).catch((function(){t.player.video.muted=e,t.times<5&&setTimeout((function(){t.player.video.currentTime<=.01&&t.init()}),50)}))}},{key:"removeSmartPlay",value:function(){var t=this;this.player.smartAutoPlay=!1,this.player.container.classList.remove("smartplayer-smart-auto-play"),this.player.container.classList.remove("smartplayer-show-smart-auto-play"),this.player.template.smartPlay.remove(),this.player.seek(0),this.player.volume(100),this.player.events.trigger("smartplay_play"),this.player.events.trigger("play"),this.player.video.paused&&s.a.resolve(this.player.video.play()).catch((function(){setTimeout((function(){t.player.video.play()}),100)}))}},{key:"init",value:function(){if(this.times+=1,this.player.options.preview)return this.muted();!0!==this.player.video.muted&&"muted"!==this.player.video.muted?s.a.resolve(this.player.video.play()).then(this.removeSmartPlay).catch(this.muted):this.player.video.play()}}]),t}();function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==ue(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==ue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===ue(i)?i:String(i)),a)}var n,i}r(77);var de=r(5).v4,fe=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e;var a=w.currentSession();this.hermes=new window.hermes.class({product:"vturb",account_id:this.player.options.accountId},{dynamicPath:function(){return"".concat(window.location.hostname,"/").concat(r.player.options.id,"/").concat(a,"/").concat(de())}}),this.options={video_id:this.player.options.videoId,player_id:this.player.options.id,session:a},this.played=!1,this.finished=!1,this.lastTime=0,this.events()}return function(t,e,r){e&&ce(t.prototype,e),r&&ce(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"events",value:function(){var t=this;this.hermes.event("pageview",1,this.options),this.player.on("play",(function(){setTimeout((function(){t.played||t.player.smartAutoPlay||(t.played=!0,t.hermes.event("played",parseInt(Date.now()/1e3),t.options))}),100)})),window.addEventListener("beforeunload",(function(){return t.hermes.event("close",t.player.video.currentTime,t.options),null})),this.player.on("timeupdate",(function(){if(!t.player.smartAutoPlay){if(t.player.video.currentTime<t.lastTime+5)return;t.lastTime=t.player.video.currentTime,t.hermes.event("close",t.lastTime,t.options)}})),this.player.on("ended",(function(){t.hermes.event("finished",parseInt(Date.now()/1e3),t.options)}))}}]),t}();function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t){return function(t){if(Array.isArray(t))return me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){ge(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ge(t,e,r){return(e=we(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function be(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,we(a.key),a)}}function we(t){var e=function(t,e){if("object"!==he(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==he(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===he(e)?e:String(e)}r(58);var Se=r(5).v4,ke=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.options.headline_number=this.chooseHeadline(this.player.options),this.headline_data=this.player.options.headlines.find((function(t){return t.number==r.player.options.headline_number}));var a=w.currentSession();this.mercury=new window.iframeManagerClass({product:"headlines",account_id:this.player.options.accountId},{path:"".concat(window.location.hostname,"/").concat(this.player.options.id,"/").concat(a,"/").concat(Se())}),this.headline=this.insertHeadline(this.player.options),this.options={player_id:this.player.options.id,session_id:a,headline_number:this.player.options.headline_number},this.events()}return function(t,e,r){e&&be(t.prototype,e),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"events",value:function(){var t=this;this.mercury.event("headlineview",parseInt(Date.now()/1e3),ve({clicked:0},this.options)),this.player.on("play",(function(){setTimeout((function(){t.played||t.player.smartAutoPlay||(t.played=!0,t.mercury.event("played",parseInt(Date.now()/1e3),ve({clicked:1},t.options)))}),100)}))}},{key:"chooseHeadline",value:function(e){var r=0,a=Math.random(),n=pe(e.headlines);n=t.filterHeadlines(n);var i=this.createRanges(n);return n.forEach((function(t,e){a>=i[e]&&a<=i[e+1]&&(r=t.number)})),r}},{key:"normalizeWeights",value:function(t){var e=t.map((function(t){return t.weight})).reduce((function(t,e){return t+e}));return e<1e-5?t.forEach((function(e){e.weight=1/t.length})):t.forEach((function(t){t.weight=t.weight/e})),t}},{key:"createRanges",value:function(t){var e=[0];return this.normalizeWeights(t),t.forEach((function(t){e.push(e[e.length-1]+t.weight)})),e}},{key:"insertHeadline",value:function(t){if(t.headline_number>=0){var e=document.createElement("div"),r=document.createElement("img");return this.setImageAttributes(r),this.setHeadlineElInitialAttributes(e,t),this.addImageEvents(e,r),e.appendChild(r),t.container.parentElement.insertBefore(e,t.container),e}}},{key:"setHeadlineElAttributes",value:function(t,e){t.setAttribute("style","text-align:center;margin-bottom:30px;height:".concat(e.clientHeight,"px;"))}},{key:"setHeadlineElInitialAttributes",value:function(t){t.setAttribute("style","text-align:center;margin-bottom:30px;"),t.id=this.headline_data.id,t.classList.add("smartplayer-headline")}},{key:"addImageEvents",value:function(t,e){var r=this;e.addEventListener("load",(function(){r.setHeadlineElAttributes(t,e)})),window.addEventListener("resize",(function(){r.setHeadlineElAttributes(t,e)}))}},{key:"setImageAttributes",value:function(t){if(this.headline_data.is_responsive&&w.isMobile)t.setAttribute("src",this.headline_data.url_mobile);else{var e=this.headline_data.url_desktop||this.headline_data.url_mobile;t.setAttribute("src",e)}t.setAttribute("style","background-color: transparent;"),t.id="vturb-headline-image"}}],[{key:"filterHeadlines",value:function(t){return t.filter((function(t){return t.active}))}},{key:"shouldLoadHeadline",value:function(e){return!!e.headline&&(!!e.headlines&&!!t.filterHeadlines(e.headlines).length)}}]),t}(),Te=r(51),Ee=r.n(Te),xe="URLSearchParams"in window?window.URLSearchParams:Ee.a;function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Re(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==_e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==_e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===_e(i)?i:String(i)),a)}var n,i}var Oe=/^(((http|https|ftp):\/\/)|\/)/,Ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=new xe}return function(t,e,r){e&&Re(t.prototype,e),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getHtmlLinks",value:function(t){var e=Array.from(document.getElementsByTagName("a"));this.links=e.filter((function(e){return e.classList.contains(t)}))}},{key:"setHtmlLinks",value:function(){var t,e=Le(this.links);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.updateSearchOfElement(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"updateSearchOfElement",value:function(t){var e=this;if(t.hasAttribute("href")&&t.getAttribute("href").match(Oe)){var r=new xe(t.search);this.params.forEach((function(t,a){r.set(a,""!=r.getAll(a)?r.getAll(a):e.params.getAll(a))})),t.search=r.toString()}}},{key:"parseURL",value:function(){var t=this,e=new xe(location.search);["utm_source","utm_medium","utm_campaign","utm_term","utm_content","src"].forEach((function(r){var a=e.get(r);a&&t.params.set(r,a)}))}},{key:"transferUtmTo",value:function(t){try{this.parseURL(),this.getHtmlLinks(t),this.setHtmlLinks()}catch(t){console.log(t)}}}]),t}();function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){Me(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Me(t,e,r){return(e=Be(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Be(a.key),a)}}function Be(t){var e=function(t,e){if("object"!==Ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Ie(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ie(e)?e:String(e)}var Ne="smartplayer-call-action-transfer-utm",Ue=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,(e.options.callAction||[]).length>0&&(this.onSeek=this.onSeek.bind(this),this.onDestroy=this.onDestroy.bind(this),this.callActions=e.options.callAction.map((function(t){var e=null;e=t.type&&"inner_button"!==t.type?r.insertButtonBelow(t):document.getElementById(t.id),r.addUtmTransferClass(e);var a=e.querySelector(".smartplayer-call-action--link");return Pe(Pe({},t),{},{el:e,elLink:a,showed:!1})})),this.setEvents()),this.transferUtm()}return function(t,e,r){e&&Fe(t.prototype,e),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"insertButtonBelow",value:function(t){var e=document.createElement("div");switch(e.id=t.id,e.classList.add("smartplayer-call-action","smartplayer-hide","smartplayer-call-action__".concat(t.position),"".concat(t.id)),t.type){case"below_button":var r=document.createElement("a");r.href=t.link||"#",r.title=t.btnText,r.target="_parent",r.innerText=t.btnText,r.classList.add("smartplayer-call-action--link");var a="18px";"md"==t.size&&(a="22px"),"lg"==t.size&&(a="26px");var n=document.createElement("style"),i=".smartplayer-call-action.smartplayer-hide {display: none}.smartplayer-call-action.".concat(t.id," {text-align: center;padding: 40px 10px;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link {background-color: ").concat(t.colors.background,";color: ").concat(t.colors.text,";padding: 1em 3em;display: inline-block;border-radius: 0.4em;font-size: ").concat(a,";line-height: 1;font-weight: 600;box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);text-decoration: none;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link:hover {background-color: ").concat(t.colors.background_hover,";color: ").concat(t.colors.text_hover,";text-decoration: none;}");n.innerText=i,e.appendChild(n),e.appendChild(r);break;case"custom_html":var o=document.createRange().createContextualFragment(t.custom_html||""),s=document.createElement("style");s.innerText=".smartplayer-call-action.smartplayer-hide {display: none}",e.appendChild(s),e.appendChild(o)}return w.insertAfter(this.player.container,e),e}},{key:"checkCallAction",value:function(t,e){!t.showed&&t.range.start<e&&t.range.finish>e?(t.showed=!0,t.el&&t.el.classList.remove("smartplayer-hide")):t.showed&&(t.range.start>e||t.range.finish<e)&&(t.showed=!1,t.el&&t.el.classList.add("smartplayer-hide"))}},{key:"setEvents",value:function(){this.player.on("timeupdate",this.onSeek)}},{key:"onSeek",value:function(){var t=this,e=this.player.video.currentTime;this.player.smartAutoPlay||this.player.inResume||this.callActions.forEach((function(r){new s.a((function(){t.checkCallAction(r,e)}))}))}},{key:"onDestroy",value:function(){}},{key:"addUtmTransferClass",value:function(t){try{var e=t.getElementsByTagName("a")[0];e&&!e.classList.contains(Ne)&&e.classList.add(Ne)}catch(t){console.log(t)}}},{key:"transferUtm",value:function(){try{(new Ce).transferUtmTo(Ne)}catch(t){console.error(t)}}}]),t}();function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==je(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==je(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===je(i)?i:String(i)),a)}var n,i}var ze=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.hasLocalstorage=w.checkLocalStorage(),this.id=e.options.id,e.options.resume&&this.get()&&(this.inResume=!0,this.player.options.autoplay=!1)}return function(t,e,r){e&&Ge(t.prototype,e),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"start",value:function(){this.player.options.resume&&(this.setEvents(),this.get()&&(this.inResume=!0,this.player.options.autoplay=!1,this.show()))}},{key:"show",value:function(){var t=this;this.player.pause(),this.el=this.player.template.resume,this.play=this.el.querySelector(".smartplayer-resume__play"),this.rewind=this.el.querySelector(".smartplayer-resume__rewind"),this.player.container.classList.add("smartplayer-in-resume"),this.player.inResume=!0,this.el.style.display="block",this.el.addEventListener("click",this.onBackdropClick,!1),this.play.addEventListener("click",this.onPlay.bind(this),!0),this.rewind.addEventListener("click",this.onRewind.bind(this),!0),this.player.video.load(),this.player.seek(this.get()),this.player.on("loadeddata",(function(){t.player.video.currentTime<=.01&&t.player.seek(t.get())}))}},{key:"onBackdropClick",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"onPlay",value:function(){this.resume()}},{key:"onRewind",value:function(){this.player.seek(0),this.resume()}},{key:"resume",value:function(){this.player.play(),this.player.container.classList.remove("smartplayer-in-resume"),this.el.style.display="none",this.player.inResume=!1}},{key:"onSeek",value:function(){if(!this.player.smartAutoPlay){var t=this.player.video.currentTime;t>5&&this.set(t)}}},{key:"setEvents",value:function(){this.onSeek=this.onSeek.bind(this),this.player.on("timeupdate",this.onSeek)}},{key:"get",value:function(){return this.hasLocalstorage?window.localStorage.getItem(this.id):w.cookieGet(this.id)}},{key:"set",value:function(t){return this.hasLocalstorage?window.localStorage.setItem(this.id,t):w.cookieSet(this.id,t)}}]),t}();function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==He(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==He(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===He(i)?i:String(i)),a)}var n,i}var Ye=function(t,e,r){return e&&qe(t.prototype,e),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.options.video.pic_finish&&(this.player.on("ended",(function(){r.player.container.classList.add("smartplayer-finished")})),this.player.on("play",(function(){r.player.container.classList.contains("smartplayer-finished")&&r.player.container.classList.remove("smartplayer-finished")}))),this.player.template.imageController&&this.player.template.imageController.addEventListener("click",(function(){w.isMobile||r.player.toggle()})),this.player.options.video.pic){var a=new Image;a.onload=function(){return r.player.template.imageStart.classList.remove("smartplayer-opacity-0")},a.src=this.player.options.video.pic}}));function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Ke(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Ke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Ke(i)?i:String(i)),a)}var n,i}var We=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",(function(){r.hide()}))}return function(t,e,r){e&&Ve(t.prototype,e),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("smartplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("smartplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("smartplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.10.3"," ").concat("bf194e8"),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration}},{key:"fps",value:function(t){this.template.infoFPS.innerHTML="".concat(t.toFixed(1))}}]),t}();function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Xe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Xe(i)?i:String(i)),a)}var n,i}var $e=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isOffline=!1,this.timeoutPromise=null,this.init()}return function(t,e,r){e&&Qe(t.prototype,e),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t=this;window.addEventListener("offline",(function(){t.isOffline=!0})),window.addEventListener("online",(function(){t.setOnline(),t.isOffline=!1})),this.player.on("startLoading",(function(){t.isOffline&&t.setOffline()}))}},{key:"setOffline",value:function(){var t=this;this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.timeoutPromise=setTimeout((function(){t.player.container.classList.add("smartplayer-offline"),t.player.events.trigger("offline")}),5e3)}},{key:"setOnline",value:function(){this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.player.container.classList.remove("smartplayer-offline"),this.player.events.trigger("online")}}]),t}();function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==Je(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Je(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===Je(i)?i:String(i)),a)}var n,i}var tr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.facebookContinousProgressRange=5,this.pixels=e.options.pixels||[],this.pixels.length&&this.setEvents(),this.initGooglePixel()}return function(t,e,r){e&&Ze(t.prototype,e),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setEvents",value:function(){var t=this;this.pixels.forEach((function(e){e.caller=function(){return!(t.player.smartAutoPlay||t.player.inResume)&&t.checkPixel(e)},t.player.on("timeupdate",e.caller)}))}},{key:"checkPixel",value:function(t){var e=this.player.video.currentTime;if("facebook"==t.type&&this.facebookContinousProgress(t,e),!t.called&&t.dispatch)switch(t.dispatch_type){case"time":t.dispatch_in==parseInt(e)&&(t.called=!0,this.exec(t));break;case"percent":t.dispatch_in==this.currentVideoPercent()&&(t.called=!0,this.exec(t));break;default:console.error("Type is not defined!")}}},{key:"exec",value:function(t){try{switch(t.type){case"facebook":return this.execFacebook(t);case"google":return this.execGoogle(t);case"custom":return this.execCustom(t);default:console.error("Type is not defined!")}}catch(t){console.error(t)}}},{key:"execFacebook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.fbq&&"function"==typeof window.fbq||this.initFbPixel(),window.fbq("trackSingleCustom",t.pixel_id,e||t.pixel_value)}},{key:"initFbPixel",value:function(){var t,e,r,a,n,i;t=window,e=document,r="script",t.fbq||(a=t.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},t._fbq||(t._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(n=e.createElement(r)).async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",(i=e.getElementsByTagName(r)[0]).parentNode.insertBefore(n,i)),this.pixels.forEach((function(t){"facebook"===t.type&&window.fbq("init",t.pixel_id)})),window.fbq("track","PageView")}},{key:"initGooglePixel",value:function(){var t=window.gtag&&"function"==typeof window.gtag,e=window.dataLayer&&"function"==typeof window.dataLayer.push;t||e||(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),this.pixels.forEach((function(t){"google"===t.type&&(window.dataLayer.find((function(e){return e&&e.config&&e.config.send_to===t.pixel_id}))||(window.gtag("config",t.pixel_id),document.head.innerHTML+='<script async src="https://www.googletagmanager.com/gtag/js?id='.concat(t.pixel_id,'"><\/script>')))})))}},{key:"execGoogle",value:function(t){if(this.player.off("timeupdate",t.caller),window.gtag&&"function"==typeof window.gtag)return window.gtag("event","conversion",{send_to:"".concat(t.pixel_id,"/").concat(t.pixel_value)});!function(){window.dataLayer.push(arguments)}("event","conversion",{send_to:"".concat(t.pixel_id,"/").concat(t.pixel_value)})}},{key:"execCustom",value:function(t){if(this.player.off("timeupdate",t.caller),t.custom_html){var e=document.createRange().createContextualFragment(t.custom_html);document.body.appendChild(e)}}},{key:"facebookContinousProgress",value:function(t){var e=this.currentVideoPercent();e%this.facebookContinousProgressRange!=0||t["percent".concat(e)]||(t["percent".concat(e)]=!0,this.execFacebook(t,"View".concat(e,"%")))}},{key:"currentVideoPercent",value:function(){return parseInt(this.player.video.currentTime/this.player.video.duration*100)}}]),t}();function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==er(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==er(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===er(i)?i:String(i)),a)}var n,i}var ar=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.mounted=null,this.currentId=null,this.checkThumb=this.checkThumb.bind(this),this.thumbs=(e.options.thumbs||[]).sort((function(t,e){return t.start-e.start})),this.thumbs.length&&this.setEvents()}return function(t,e,r){e&&rr(t.prototype,e),r&&rr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setEvents",value:function(){var t=this;this.thumbs.forEach((function(e){t.player.on("timeupdate",(function(){return t.checkThumb(e)}))}))}},{key:"checkThumb",value:function(t){var e=this.player.video.currentTime,r=t.start<=e&&e<=t.finish;!this.mounted&&r?(this.currentId=t.id,this.mounted=!0,this.mount(t)):this.mounted&&t.id==this.currentId&&!r&&(this.mounted=!1,this.unmount())}},{key:"mount",value:function(t){if(this.player.template.thumbnail.innerHTML="",this.player.template.thumbnail.style.backgroundImage="url('".concat(t.image,"')"),t.has_button){var e=document.createElement("a");e.id=t.id,e.href=t.button_url,e.target="_parent",e.innerHTML=t.button_name,e.classList.add("smartplayer-thumbnail--link"),e.classList.add("smartplayer-thumbnail--".concat(t.button_size)),e.classList.add("smartplayer-thumbnail--".concat(t.button_position)),this.player.template.thumbnail.appendChild(e)}this.player.template.thumbnail.classList.add("smartplayer-thumbnail--ready")}},{key:"unmount",value:function(){this.player.template.thumbnail.classList.remove("smartplayer-thumbnail--ready")}}]),t}();function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==nr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==nr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===nr(i)?i:String(i)),a)}var n,i}var or=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.defaultWidth=this.player.options.video.width||1280;var a=this.getContainers();window.addEventListener("resize",(function(){r.rescaleElements(a)})),this.player.on("resize",(function(){r.rescaleElements(a)})),this.player.on("canplay",(function(){r.rescaleElements(a)}))}return function(t,e,r){e&&ir(t.prototype,e),r&&ir(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"rescaleElement",value:function(t){t.style.scale=this.player.container.clientWidth/this.defaultWidth}},{key:"rescaleElements",value:function(t){var e=this;Array.prototype.forEach.call(t,(function(t){e.rescaleElement(t)}))}},{key:"getContainers",value:function(){return this.player.options.smart_autoplay_elements&&this.player.options.smart_autoplay_elements.length?this.player.container.getElementsByClassName("smartplayer-smartplay"):[]}}]),t}(),sr=r(52),lr=r.n(sr);function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function dr(t,e,r){return(e=hr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,hr(a.key),a)}}function hr(t){var e=function(t,e){if("object"!==ur(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==ur(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ur(e)?e:String(e)}var pr=0,mr={instances:[]},yr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mounted=!1,this.options=function(t){var e={id:location.host+location.pathname,container:t.element||document.getElementsByClassName("smartplay")[0],preview:!1,live:!1,autoplay:!0,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!1,hotkey:!0,preload:"metadata",volume:1,seekTime:10,playbackSpeed:[.5,.75,1,1.25,1.5,2],video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},dash:{}},displays:{},callAction:[],pixels:[],thumbs:[],resume:!1,smartplay_options:{},fake_bar:!1,fake_bar_options:{}},r={volume:!0,volumeIcon:!0,volumeBar:!0,seekButton:!0,logo:!0,controlBar:!0,play:!0,fakebar:!1};for(var a in void 0===t.fake_bar&&t.displays&&t.displays.fakebar&&(t.fake_bar=t.displays.fakebar),e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=e[a]);for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&!Object.prototype.hasOwnProperty.call(t.displays,n)&&(t.displays[n]=r[n]);return t.video&&!t.video.type&&(t.video.type="m3u8"),t.video&&!t.video.height&&(t.video.height=720),t.video&&!t.video.width&&(t.video.width=1280),t.subtitle&&(!t.subtitle.type&&(t.subtitle.type="webvtt"),!t.subtitle.fontSize&&(t.subtitle.fontSize="20px"),!t.subtitle.bottom&&(t.subtitle.bottom="40px"),!t.subtitle.color&&(t.subtitle.color="#fff")),t.video.quality&&(t.video.url=t.video.quality[t.video.defaultQuality].url),t.lang&&(t.lang=t.lang.toLowerCase()),t.contextmenu=t.contextmenu.concat([{text:"Conheça o VTurb",link:"https://vturb.com.br/?via=player"}]),"smartplay"!==t.autoplay||""!==t.smartplay&&t.smartplay||(t.smartplay="<style>#smartplayer#smartplayer#smartplayer .smartplay-wrapper {border-radius: 10px;background-color: ".concat(t.smartplay_options.background_color||"rgba(9, 0 , 46, 0.75)",";border: 2px solid ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",";width: 80%;height: auto;top: 50%;left: 50%;padding: 0.5em;max-width: 400px;text-align: center;position: absolute;-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);}#smartplayer#smartplayer#smartplayer .smartplay-span {font-family: Arial,Helvetica,sans-serif;font-size: 24px;font-weight: 700;display: block;text-align: center;color: ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",';white-space: normal;width: 100%;line-height: 1.1em;padding: 0.5em 0;-webkit-box-sizing: border-box;box-sizing: border-box;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 36%;height: auto;}@media (max-width: 680px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 20px;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 30%;}}@media (max-width: 380px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 16px;line-height: 1em;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 25%;}}</style><div class="smartplay-wrapper"><span class="smartplay-span">').concat(t.smartplay_options.top_text||"Seu vídeo já começou",'</span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="46.75px" height="32.563px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"><style>@-webkit-keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}@keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}#smartplayer#smartplayer#smartplayer .blink_1 {-webkit-animation: BLINK 2s infinite;animation: BLINK 2s infinite;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_2 {-webkit-animation: BLINK 2s infinite .3s;animation: BLINK 2s infinite .3s;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_3 {-webkit-animation: BLINK 2s infinite .6s;animation: BLINK 2s infinite .6s;opacity: 0;}#smartplayer#smartplayer#smartplayer .smartplay-svg-color {fill: ').concat(t.smartplay_options.foreground_color||"#FFFFFF",' !important;}#smartplayer#smartplayer#smartplayer .adjustable {border: 4px solid red;}</style><g class="adjustable fg"><path class="smartplay-svg-color" d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path><path class="blink_3 smartplay-svg-color" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path><path class="blink_3 smartplay-svg-color" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path><path class="blink_2 smartplay-svg-color" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path><path class="blink_2 smartplay-svg-color" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path><path class="blink_1 smartplay-svg-color" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path><path class="blink_1 smartplay-svg-color" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path><polygon class="smartplay-svg-color" points="28.124,20.215 28.124,14.991 24.635,17.99  "></polygon><path class="smartplay-svg-color" d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path></g></svg><span class="smartplay-span">').concat(t.smartplay_options.bottom_text||"Clique para ouvir","</span></div>")),t.callAction.forEach((function(t){t.id=t.id||w.uniqID()})),t}(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cr(Object(r),!0).forEach((function(e){dr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({preload:"webtorrent"===e.video.type?"none":"metadata"},e)),this.container=this.options.container,this.events=new Tt,pr++,mr.instances.push(this),this.mountHeadlines()}return function(t,e,r){e&&fr(t.prototype,e),r&&fr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"mount",value:function(){var t=this;this.mounted=!0,this.videoMounted=!1,this.container.classList.add("smartplay","smartplayer-initial"),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS"),this.options.live?this.container.classList.add("smartplayer-live"):this.container.classList.remove("smartplayer-live"),w.isMobile&&this.container.classList.add("smartplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("smartplayer-arrow"),this.tran=new k(this.options.lang).tran,this.resume=new ze(this),this.template=new wt({container:this.container,options:this.options,index:pr,tran:this.tran}),this.video=document.createElement("video"),this.video.classList.add("smartplayer-video"),this.video.classList.add("smartplayer-video-current"),this.video.muted=this.options.volume<=0,this.video.preload=this.options.preload,this.video.autoplay=!!this.options.autoplay,this.video.playsInline=!0,this.bar=new It(this.template),this.fakeBar=new Mt(this),this.bezel=new Gt(this.template.bezel),this.fullScreen=new _t(this),this.controller=new Vt(this),this.imageController=new Ye(this),this.setting=new Qt(this),this.plugins={},document.addEventListener("click",(function(){t.focus=!1}),!0),this.container.addEventListener("click",(function(){t.focus=!0}),!0),this.paused=!0,this.timer=new Nt(this),this.hotkey=new re(this),this.contextmenu=new ie(this),("smartplay"===this.options.autoplay||this.options.resume||this.options.preview)&&this.mountVideo(),this.infoPanel=new We(this),this.callaction=new Ue(this),this.pixel=new tr(this),this.thumb=new ar(this),this.network=new $e(this),this.smartElements=new or(this),this.resume.start(),this.inResume||("smartplay"===this.options.autoplay?this.smartplay=new le(this):this.options.autoplay?this.play():this.controller.hide()),this.options.preview||(this.analytics=new fe(this)),this.ignoreMediaNotifications()}},{key:"mountHeadlines",value:function(){try{ke.shouldLoadHeadline(this.options)&&(this.headlines=new ke(this))}catch(t){console.error(t)}}},{key:"ignoreMediaNotifications",value:function(){navigator.mediaSession&&"function"==typeof navigator.mediaSession.setActionHandler&&(navigator.mediaSession.setActionHandler("play",(function(){})),navigator.mediaSession.setActionHandler("pause",(function(){})),navigator.mediaSession.setActionHandler("stop",(function(){})),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekto",(function(){})),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null))}},{key:"seek",value:function(t){t=Math.max(t,0),this.video.duration&&(t=Math.min(t,this.video.duration)),this.video.currentTime=t,this.bar.set("played",t/this.video.duration,"width"),this.template.ptime&&(this.template.ptime.innerHTML=w.secondToTime(t)),this.options.fake_bar&&this.fakeBar.set(t,this.video.duration)}},{key:"play",value:function(t){var e=this;if(this.paused=!1,this.wasPlayed=!0,!this.videoMounted)return this.mountVideo(this.play.bind(this));(this.container.classList.remove("smartplayer-initial"),this.template.bigplay&&this.template.bigplay.classList.add("smartplayer-hidden"),this.video.paused&&!w.isMobile&&this.bezel.switch(mt.play),this.template.playButton&&(this.template.playButton.innerHTML=mt.pause),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=mt.pause),t)||s.a.resolve(this.video.play()).catch((function(){e.pause()})).then((function(){e.video.play()}));if(this.timer.enable("loading"),this.container.classList.remove("smartplayer-paused"),this.container.classList.add("smartplayer-playing"),this.options.mutex&&mr.instances.length>1)for(var r=0;r<mr.instances.length;r++)this!==mr.instances[r]&&mr.instances[r].pause()}},{key:"pause",value:function(t){(this.options.displays.play_pause||this.options.displays.big_play)&&this.videoMounted&&(this.paused=!0,this.container.classList.remove("smartplayer-loading"),this.template.bigplay&&this.template.bigplay.classList.remove("smartplayer-hidden"),this.video.paused||w.isMobile||this.bezel.switch(mt.pause),this.template.playButton&&(this.template.playButton.innerHTML=mt.play),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=mt.play),t||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("smartplayer-playing"),this.container.classList.add("smartplayer-paused"))}},{key:"switchVolumeIcon",value:function(){this.template.volumeIcon&&(this.volume()>=.95?this.template.volumeIcon.innerHTML=mt.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=mt.volumeDown:this.template.volumeIcon.innerHTML=mt.volumeOff)}},{key:"volume",value:function(t,e,r){if(t=parseFloat(t),!isNaN(t)){t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t,"width");var a="".concat((100*t).toFixed(0),"%");this.template.volumeBarWrapWrap&&(this.template.volumeBarWrapWrap.dataset.balloon=a),r||this.notice("".concat(this.tran("Volume")," ").concat((100*t).toFixed(0),"%")),this.video.volume=t,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){!this.videoMounted||this.video.paused?this.play():this.pause()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"switchVideo",value:function(t){this.pause(),this.video.poster=t.pic?t.pic:"",this.video.src=t.url,this.initMSE(this.video,t.type||"auto")}},{key:"initMSE",value:function(t,e){var r=this;if(this.type=e,this.options.video.customType&&this.options.video.customType[e])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[e])?this.options.video.customType[e](this.video,this):console.error("Illegal customType: ".concat(e));else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(t.src)?this.type="hls":this.type="normal"),this.type){case"hls":if(this.options.isKwaiPreview){this.events.on("play",(function e(){new y(t,r,r.options.pluginOptions.hls),r.events.off("play",e)}))}else new y(t,this,this.options.pluginOptions.hls);break;case"dash":if(window.dashjs){var a=window.dashjs.MediaPlayer().create().initialize(t,t.src,!1),n=this.options.pluginOptions.dash;a.updateSettings(n),this.plugins.dash=a,this.events.on("destroy",(function(){window.dashjs.MediaPlayer().reset(),delete r.plugins.dash}))}else this.notice("Error: Can't find dashjs.");break;default:t.src=this.options.video.url}}},{key:"initVideo",value:function(t,e){var r=this;this.initMSE(t,e),this.on("durationchange",(function(){r.template.dtime&&1!==t.duration&&t.duration!==1/0&&(r.template.dtime.innerHTML=w.secondToTime(t.duration))})),this.on("progress",(function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;r.bar.set("loaded",e,"width")})),this.on("error",(function(){r.video.error&&r.tran&&r.notice&&"webtorrent"!==r.type&&r.notice(r.tran("Video load failed"),-1)})),this.on("ended",(function(){r.bar.set("played",1,"width"),r.setting.loop?(r.seek(0),r.play()):r.pause()})),this.on("play",(function(){r.paused&&r.play(!0)})),this.on("pause",(function(){r.paused||r.pause(!0)})),this.on("timeupdate",(function(){r.bar.set("played",r.video.currentTime/r.video.duration,"width");var t=w.secondToTime(r.video.currentTime);r.options.fake_bar&&r.fakeBar.set(r.video.currentTime,r.video.duration),r.template.ptime&&r.template.ptime.innerHTML!==t&&(r.template.ptime.innerHTML=t)}));for(var a=function(e){t.addEventListener(r.events.videoEvents[e],(function(){r.events.trigger(r.events.videoEvents[e])}))},n=0;n<this.events.videoEvents.length;n++)a(n);this.options.subtitle&&this.template.subtitle&&(this.subtitle=new Rt(this.template.subtitle,this.video,this.options.subtitle,this.events))}},{key:"mountVideo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.template.videoWrap.insertBefore(this.video,this.template.videoWrap.getElementsByTagName("div")[0]),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.volume(this.options.volume),this.videoMounted=!0,this.on("loadeddata",(function(){var e=t.video.videoHeight/t.video.videoWidth*100;e&&(t.container.style.padding="".concat(e,"% 0 0"))})),this.on("canplay",(function(){"function"==typeof e&&e(),t.removePreloadElement(),e=null}))}},{key:"removePreloadElement",value:function(){var t=document.getElementById("thumb_".concat(this.options.id));t&&this.container.removeChild(t);var e=document.getElementById("backdrop_".concat(this.options.id));e&&this.container.removeChild(e)}},{key:"switchQuality",value:function(t){var e=this;if(t="string"==typeof t?parseInt(t):t,this.qualityIndex!==t&&!this.switchingQuality){this.qualityIndex=t,this.switchingQuality=!0,this.quality=this.options.video.quality[t],this.template.qualityButton&&(this.template.qualityButton.innerHTML=this.quality.name);var r=this.video.paused;this.video.pause();var a=lr()({current:!1,pic:null,autoplay:this.options.autoplay,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),n=(new DOMParser).parseFromString(a,"text/html").body.firstChild;this.template.videoWrap.insertBefore(n,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=n,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",(function(){if(e.prevVideo){if(e.video.currentTime!==e.prevVideo.currentTime)return void e.seek(e.prevVideo.currentTime);e.template.videoWrap.removeChild(e.prevVideo),e.video.classList.add("smartplayer-video-current"),r||e.video.play(),e.prevVideo=null,e.notice("".concat(e.tran("Switched to")," ").concat(e.quality.name," ").concat(e.tran("quality"))),e.switchingQuality=!1,e.events.trigger("quality_end")}}))}}},{key:"notice",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice&&(this.template.notice.innerHTML=t,this.template.notice.style.opacity=a,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",t),r>0&&(this.noticeTime=setTimeout((function(){e.template.notice.style.opacity=0,e.events.trigger("notice_hide")}),r)))}},{key:"resize",value:function(){this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(t){this.video.playbackRate=t}},{key:"destroy",value:function(){this.mounted&&(this.pause(),this.controller.destroy(),this.timer.destroy(),this.container.innerHTML="",this.events.trigger("destroy"),this.video&&(this.video.src="")),mr.instances.splice(mr.instances.indexOf(this),1)}}],[{key:"version",get:function(){return"1.10.3"}},{key:"instances",get:function(){return mr}}]),t}(),vr=r(8),gr=r.n(vr);function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(n=a.key,i=void 0,i=function(t,e){if("object"!==br(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==br(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===br(i)?i:String(i)),a)}var n,i}var Sr=r(59),kr=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.options.container.id="smartplayer",this.axiosInstance=Sr.create({timeout:2e3}),this.domain=window.location.host,window.location!==window.parent.location){var r=document.referrer.match(/[http|https]:\/\/(.+?)(\/|&|$)/);this.domain=r?r[1]:window.parent.location.host}this.options.preview?this.m3u8_path="https://".concat(e.cdn,"/").concat(e.accountId,"/").concat(e.videoId,"/main.m3u8"):this.m3u8_path=e.video.url}return function(t,e,r){e&&wr(t.prototype,e),r&&wr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"check",value:function(t){var e=this;this.axiosInstance.post("https://api.vturb.com.br/vturb/check",{m3u8_path:this.m3u8_path,player_id:this.options.id,domain:this.domain}).then((function(){return!0})).catch((function(t){switch((t.response||{}).status){case 401:setTimeout((function(){e.options.container.innerHTML=gr()({icons:mt,message:"Não foi possível exibir o vídeo!"})}),50);break;case 403:setTimeout((function(){e.options.container.innerHTML=gr()({icons:mt,message:"Sua fatura está em aberto. Atualize o método de pagamento no painel da VTurb."})}),50);break;case 406:setTimeout((function(){e.options.container.innerHTML=gr()({icons:mt,message:"Este domínio não está na lista de domínios permitidos! Atualize as configurações de domínios no painel da VTurb."})}),50);break;default:return!0}return!1})).then(t)}}]),t}();function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function xr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Er(Object(r),!0).forEach((function(e){_r(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Tr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==Tr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Tr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lr=function(t,e,r,a){Ar(),console.info("::VTURB:: v(".concat("1.10.3",")"));var n=xr(xr({id:"".concat(t).replace(/vid_|scr_/,"")},a||{}),{},{videoId:r,accountId:e,container:document.getElementById(t)},function(){try{if((!(window.location==window.parent.location)&&document.referrer?document.referrer:document.location.href).toLocaleLowerCase().includes("type=preload"))return{autoplay:!1,isKwaiPreview:!0}}catch(t){console.error(t)}return{}}());n.cdn=n.cdn||"cdn.converteai.net",n.video=n.video||{},n.video.url=n.video.url||"https://".concat(n.cdn,"/").concat(e,"/").concat(r,"/main.m3u8"),n.video.type=n.video.type||"hls";var i=new yr(n);new kr(n).check((function(t){return t?i.mount():i.destroy()}))},Ar=function(){var t,e=null;window.location.search.slice(1).split("&").forEach((function(t){/^inspect=/.test(t)&&(e=t.split("=")[1])})),e&&((t=document.createElement("script")).src="https://remotejs.com/agent/agent.js",t.setAttribute("data-consolejs-channel",e),document.head.appendChild(t))};window.smrtvds&&((window.smrtvds.queue||[]).forEach((function(t){return Lr.apply(window.smrtvds,t)})),window.smrtvds.callMethod=Lr);e.default=yr.instances},function(t,e,r){"use strict";r.r(e);r(56);var a=r(49),n=r(50),i=r.n(n),o=r(12),s=["event","value"],l=["name","value"];function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},i=Object.keys(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),s=new L(n||[]);return a(o,"_invoke",{value:T(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function h(){}function p(){}function m(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(A([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=m.prototype=h.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){var n;a(this,"_invoke",{value:function(a,i){function o(){return new e((function(n,o){!function a(n,i,o,s){var l=d(t[n],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==u(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,o,s)}),(function(t){a("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return a("throw",t,o,s)}))}s(l.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}})}function T(t,e,r){var a="suspendedStart";return function(n,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw i;return R()}for(r.method=n,r.arg=i;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=d(t,e,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}function E(t,e){var r=e.method,a=t.iterator[r];if(void 0===a)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var n=d(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,n=function e(){for(;++a<t.length;)if(r.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=m,a(w,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,o,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,a,n,i){void 0===i&&(i=Promise);var o=new k(c(e,r,a,n),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(w),l(w,s,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var a in e)r.push(a);return r.reverse(),function t(){for(;r.length;){var a=r.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(r,a){return o.type="throw",o.arg=t,e.next=r,a&&(e.method="next",e.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;_(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function v(t,e,r,a,n,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(a,n)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function o(t){v(i,a,n,o,s,"next",t)}function s(t){v(i,a,n,o,s,"throw",t)}o(void 0)}))}}function b(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,w(a.key),a)}}function w(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}var S=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hermes=e,this.timer=3e3,this.online=navigator.onLine,this.disableCheck=!1,this.storage=i.a.createInstance({name:"hermes"}),this.deviceSave(),this.timeoutId=null,this.lastInteraction=null,this.pusher=[],this.errorCounter=0,this.events(),setInterval((function(){r.send()}),15e3)}var e,r,a,n,u,d;return e=t,(r=[{key:"deviceSave",value:(d=g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.getItem("uid");case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=Object(o.a)();case 5:this.device=t.t0,this.storage.setItem("uid",this.device),this.send();case 8:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"events",value:function(){window.addEventListener("online",this.updateOnlineStatus.bind(this)),window.addEventListener("offline",this.updateOnlineStatus.bind(this)),window.addEventListener("beforeunload",this.onClose.bind(this))}},{key:"event",value:function(t){var e=t.event,r=t.value,a=m(t,s);if(!e||void 0===r)throw new Error("Event missing event or value");this.push(h({event:e,value:r},a)),this.send()}},{key:"conversion",value:function(t){var e=t.name,r=t.value,a=void 0===r?1:r,n=m(t,l);if(!e||!a)throw new Error("Conversion missing name or value");this.push(h({convertion:!0,name:e,value:a},n)),this.send()}},{key:"message",value:function(t){this.errorCounter=0,t.target&&"hermesSync"===t.target&&("function"==typeof this[t.type]?this[t.type](t):this.message(t))}},{key:"push",value:(u=g(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=19;break}if(!this.online){t.next=5;break}this.pusher=[].concat(c(this.pusher),c(Array.isArray(e)?e:[e])),t.next=19;break;case 5:return t.t0=this.storage,t.t1="hermesToSync",t.t2=[],t.t3=c,t.next=11,this.storage.getItem("hermesToSync");case 11:if(t.t4=t.sent,t.t4){t.next=14;break}t.t4=[];case 14:t.t5=t.t4,t.t6=(0,t.t3)(t.t5),t.t7=c(Array.isArray(e)?e:[e]),t.t8=t.t2.concat.call(t.t2,t.t6,t.t7),t.t0.setItem.call(t.t0,t.t1,t.t8);case 19:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"defaultParams",value:function(){var t={};return this.device&&(t.device_id=this.device),this.hermes.options.product&&(t.product=this.hermes.options.product),this.hermes.options.account_id&&(t.account_id=this.hermes.options.account_id),t}},{key:"send",value:(n=g(y().mark((function t(){var e,r,a=this,n=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],this.device){t.next=3;break}return t.abrupt("return");case 3:if(!(this.errorCounter>=3)){t.next=5;break}return t.abrupt("return");case 5:if(!(e||this.disableCheck||this.lastInteraction+this.timer<Date.now())){t.next=17;break}return t.next=8,this.storage.getItem("hermesToSync");case 8:if(!(((r=t.sent)||[]).length>0)){t.next=14;break}return t.next=12,this.storage.setItem("hermesToSync",[]);case 12:t.next=16;break;case 14:r=this.pusher,this.pusher=[];case 16:this.online?r&&(!Array.isArray(r)||r.length>0)&&(this.lastInteraction=Date.now(),setTimeout((function(){a.send()}),this.timer+100),navigator.sendBeacon("".concat("https://api.vturb.com.br","/hermes/").concat(this.hermes.settings.dynamicPath()),JSON.stringify(h(h({},this.defaultParams()),{},{data:r})))):this.push(r);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onClose",value:function(){return this.disableCheck=!0,this.send(!0),null}},{key:"updateOnlineStatus",value:function(){this.errorCounter=0,this.send(!0),this.online=navigator.onLine}}])&&b(e.prototype,r),a&&b(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return(e=A(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,A(a.key),a)}}function A(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==k(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===k(e)?e:String(e)}var R={product:null,account_id:null},O={dynamicPath:function(){return"receive"}},C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(this,t),this.options=E(E({},R),e),this.settings=E(E({},O),r),this.sync=new S(this)}var e,r,a;return e=t,(r=[{key:"event",value:function(t,e,r){this.sync.message(E({target:"hermesSync",type:"event",event:t,value:e},r))}},{key:"conversion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sync.message(E({target:"hermesSync",type:"conversion",name:t,value:e},r))}}])&&L(e.prototype,r),a&&L(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.hermes||(console.log("::HERMES:: v(".concat(a.a,")")),window.hermes=window.hermes||new C,window.hermes.class=C);e.default=window.hermes}]).default}));